window.__require=function e(t,o,n){function i(r,a){if(!o[r]){if(!t[r]){var c=r.split("/");if(c=c[c.length-1],!t[c]){var l="function"==typeof __require&&__require;if(!a&&l)return l(c,!0);if(s)return s(c,!0);throw new Error("Cannot find module '"+r+"'")}r=c}var u=o[r]={exports:{}};t[r][0].call(u.exports,function(e){return i(t[r][1][e]||e)},u,u.exports,e,t,o,n)}return o[r].exports}for(var s="function"==typeof __require&&__require,r=0;r<n.length;r++)i(n[r]);return i}({"FortuneMouse-data":[function(e,t,o){"use strict";cc._RF.push(t,"c0215ZM7g1NqqBTYkKvMbSc","FortuneMouse-data"),Object.defineProperty(o,"__esModule",{value:!0}),o.FortuneMouseData=void 0;o.FortuneMouseData=function(){this.runNum=0},cc._RF.pop()},{}],Game1810Scroll:[function(e,t,o){"use strict";cc._RF.push(t,"1bed8aBkDpKUrOrT375q6um","Game1810Scroll");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),s=this&&this.__decorate||function(e,t,o,n){var i,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(r=(s<3?i(r):s>3?i(t,o,r):i(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=function(e){this.data=e},a=function(){function e(){this.head=new r(null),this.tail=new r(null),this.head.prev=null,this.head.next=this.tail,this.tail.prev=this.head,this.tail.next=null,this.size=0,this.nodePool=[]}return e.prototype.count=function(){return this.size},e.prototype.empty=function(){return 0==this.size},e.prototype.first=function(){return this.head.next},e.prototype.last=function(){return this.tail.prev},e.prototype.isHead=function(e){return e==this.head},e.prototype.isTail=function(e){return e==this.tail},e.prototype.getListNode=function(e){if(this.nodePool.length>0){var t=this.nodePool.pop();return t.data=e,t}return new r(e)},e.prototype.insertBefore=function(e,t){var o=this.getListNode(e);return o.prev=t.prev,o.next=t,t.prev.next=o,t.prev=o,++this.size,o},e.prototype.insertAfter=function(e,t){var o=this.getListNode(e);return o.prev=t,o.next=t.next,t.next.prev=o,t.next=o,++this.size,o},e.prototype.insertAsLast=function(e){return this.insertBefore(e,this.tail)},e.prototype.insertAsFirst=function(e){return this.insertAfter(e,this.head)},e.prototype.recycleListNode=function(e){e.prev=null,e.next=null,e.data=null,this.nodePool.push(e)},e.prototype.remove=function(e){e.prev.next=e.next,e.next.prev=e.prev,this.recycleListNode(e),--this.size},e.prototype.removeFirst=function(){this.remove(this.first())},e.prototype.removeLast=function(){this.remove(this.last())},e}(),c=cc._decorator,l=c.ccclass,u=c.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.symbolPrefab=null,t}return i(t,e),t.prototype.init=function(e){this.colNum=e,this.nodePool=new cc.NodePool,this.symbolList=[],this.scrollTotalTimeList=[],this.scrollTimeList=[],this.scrollTotalDistanceList=[],this.scrollDistanceList=[],this.scrollEaseList=[],this.needScrollList=[],this.needScrollForeverList=[],this.scrollForeverSpeedList=[];for(var t=0;t<this.colNum;t++)this.symbolList.push(new a),this.scrollTimeList.push(0),this.scrollTotalTimeList.push(0),this.scrollDistanceList.push(0),this.scrollEaseList.push(null),this.scrollTotalDistanceList.push(0),this.needScrollList.push(!1),this.needScrollForeverList.push(!1),this.scrollForeverSpeedList.push(0);this.curFrameScrollFinishColList=[]},t.prototype.getSymbolPrefab=function(){return this.symbolPrefab},t.prototype.getSymbolNode=function(){var e=this.nodePool.get();return e||(e=cc.instantiate(this.symbolPrefab)),e},t.prototype.putSymbolNode=function(e){e.active=!0,this.nodePool.put(e)},t.prototype.updateColSymbolsByCount=function(e,t,o){if(void 0===o&&(o=0),o<0)throw new Error("downwardOffset must be nonnegative:"+o);for(var n=0,i=this.colPosX(e),s=-this.node.height/2-o,r=this.symbolList[e],a=r.first();!r.isTail(a)&&n<t;){var c=a.data;this.onUpdateSymbol(e,n,c),c.position=cc.v3(i,s+c.height/2,0),s+=c.height,a=a.next,n++}if(r.isTail(a))for(;n<t;)c=this.getSymbolNode(),this.onUpdateSymbol(e,n,c),c.position=cc.v3(i,s+c.height/2,0),s+=c.height,c.parent=this.node,r.insertAsLast(c),n++;else for(;!r.isTail(a);){this.putSymbolNode(a.data);var l=a.next;r.remove(a),a=l}},t.prototype.updateColSymbols=function(e,t){if(void 0===t&&(t=0),t<0)throw new Error("downwardOffset must be nonnegative:"+t);for(var o=0,n=this.colPosX(e),i=-this.node.height/2-t,s=this.node.height/2,r=this.symbolList[e],a=r.first();!r.isTail(a)&&i<s;){var c=a.data;this.onUpdateSymbol(e,o,c),c.position=cc.v3(n,i+c.height/2,0),i+=c.height,a=a.next,o++}if(r.isTail(a))for(;i<s;)c=this.getSymbolNode(),this.onUpdateSymbol(e,o,c),c.position=cc.v3(n,i+c.height/2,0),i+=c.height,c.parent=this.node,r.insertAsLast(c),o++;else for(;!r.isTail(a);){this.putSymbolNode(a.data);var l=a.next;r.remove(a),a=l}},t.prototype.scroll=function(e,t,o,n){if(void 0===n&&(n=null),t<0)throw new Error("time must be nonnegative:"+t);this.stopForeverScroll(e),this.scrollTimeList[e]=0,this.scrollTotalTimeList[e]=t,this.scrollDistanceList[e]=0,this.scrollTotalDistanceList[e]=o,this.scrollEaseList[e]=n,this.needScrollList[e]=!0},t.prototype.stopScroll=function(e){this.needScrollList[e]=!1,this.scrollTimeList[e]=0,this.scrollTotalTimeList[e]=0,this.scrollDistanceList[e]=0,this.scrollEaseList[e]=null,this.scrollTotalDistanceList[e]=0},t.prototype.scrollForever=function(e,t){this.stopScroll(e),this.needScrollForeverList[e]=!0,this.scrollForeverSpeedList[e]=t},t.prototype.stopForeverScroll=function(e){this.needScrollForeverList[e]=!1,this.scrollForeverSpeedList[e]=0},t.prototype.createSymbol=function(){var e=this.nodePool.get();return e||(e=cc.instantiate(this.symbolPrefab)),e},t.prototype.colPosX=function(e){return-this.node.width/2+(e+.5)*this.symbolPrefab.data.width},t.prototype.cyclicScroll=function(e){for(var t=this.symbolList[e],o=-this.node.height/2,n=this.colPosX(e);;){var i=t.first().data;if((l=i.y-i.height/2)<=o)break;(c=this.createSymbol()).parent=this.node,t.insertAsFirst(c),this.onSymbolAppear(e,c),c.position=cc.v3(n,l-c.height/2,0)}for(var s=this.node.height/2;;){var r=t.last().data;if((a=r.y+r.height/2)>=s)break;(c=this.createSymbol()).parent=this.node,t.insertAsLast(c),this.onSymbolAppear(e,c),c.position=cc.v3(n,a+c.height/2,0)}for(;!t.empty();){var a;if((a=(c=t.first().data).y+c.height/2)>=o)break;t.removeFirst(),this.onSymbolRecycle(c),this.putSymbolNode(c)}for(;!t.empty();){var c,l;if((l=(c=t.last().data).y-c.height/2)<=s)break;t.removeLast(),this.onSymbolRecycle(c),this.putSymbolNode(c)}},t.prototype.update=function(e){e=Math.min(e,.02);for(var t=0;t<this.colNum;t++)if(this.needScrollList[t]){this.scrollTimeList[t]+=e;var o=Math.min(this.scrollTimeList[t]/this.scrollTotalTimeList[t],1);this.scrollEaseList[t]&&(o=this.scrollEaseList[t].easing(o));var n=this.scrollTotalDistanceList[t]*o,i=n-this.scrollDistanceList[t];this.scrollDistanceList[t]=n;for(var s=(r=this.symbolList[t]).first();!r.isTail(s);)(a=s.data).position=a.position.add(cc.v3(0,i,0)),s=s.next;this.scrollTimeList[t]>=this.scrollTotalTimeList[t]&&(this.stopScroll(t),this.curFrameScrollFinishColList.push(t)),this.cyclicScroll(t)}else if(this.needScrollForeverList[t]){var r;for(i=this.scrollForeverSpeedList[t]*e,s=(r=this.symbolList[t]).first();!r.isTail(s);){var a;(a=s.data).position=a.position.add(cc.v3(0,i,0)),s=s.next}this.cyclicScroll(t)}for(t=0;t<this.curFrameScrollFinishColList.length;t++)this.onColScrollFinish(this.curFrameScrollFinishColList[t]);this.curFrameScrollFinishColList.splice(0)},t.prototype.lastSymbolUpperBoundOffset=function(e){var t=this.symbolList[e].last().data,o=this.node.height/2;return t.y+t.height/2-o},t.prototype.hideSymbols=function(e){this.stopScroll(e),this.stopForeverScroll(e);for(var t=this.symbolList[e],o=t.first();!t.isTail(o);)o.data.active=!1,o=o.next},t.prototype.showColSymbols=function(e){for(var t=this.symbolList[e],o=t.first();!t.isTail(o);)o.data.active=!0,o=o.next},t.prototype.traversalColSymbols=function(e,t){for(var o=this.symbolList[e],n=o.first();!o.isTail(n);)t(n.data),n=n.next},t.prototype.symbolCount=function(e){return this.symbolList[e].count()},t.prototype.getSymbol=function(e,t){for(var o=this.symbolList[e].first();t>0;)o=o.next,t--;return o.data},s([u(cc.Prefab)],t.prototype,"symbolPrefab",void 0),s([l],t)}(cc.Component);o.default=h,cc._RF.pop()},{}],RetryTipDisplay:[function(e,t,o){"use strict";cc._RF.push(t,"1bdcb/V1+lMOLblkvueFK+K","RetryTipDisplay");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),s=this&&this.__decorate||function(e,t,o,n){var i,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(r=(s<3?i(r):s>3?i(t,o,r):i(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../../script/framework/i18n/i18n"),a=cc._decorator,c=a.ccclass,l=a.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.textLab=null,t}return i(t,e),t.prototype.show=function(e){this.node.active=!0;var t=r.tcI18n.i18nLabel(["Retry.First","Retry.Second","Retry.Third","Retry.Fourth","Retry.Fifth"][e-1]);this.textLab.string=r.tcI18n.i18nLabel("Retry.Busy")+"("+t+")",this.textLab.overflow=cc.Label.Overflow.NONE,this.textLab._forceUpdateRenderData(),this.textLab.node.width>650&&(this.textLab.overflow=cc.Label.Overflow.RESIZE_HEIGHT,this.textLab.node.width=650,this.textLab._forceUpdateRenderData()),this.node.height=this.textLab.node.height+80,cc.Tween.stopAllByTarget(this.node),this.node.opacity=250,cc.tween(this.node).delay(2).to(.3,{opacity:0}).start()},s([l(cc.Label)],t.prototype,"textLab",void 0),s([c],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../../../../script/framework/i18n/i18n":void 0}],RuleView:[function(e,t,o){"use strict";cc._RF.push(t,"97e17H2BnlM8rDSYWDM0cew","RuleView");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),s=this&&this.__decorate||function(e,t,o,n){var i,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(r=(s<3?i(r):s>3?i(t,o,r):i(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../../script/app/env"),a=e("../../../../script/framework/i18n/i18n"),c=e("../../../../script/pkg/currency"),l=cc._decorator,u=l.ccclass,h=l.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.betSizeLab=null,t.currencyLab=null,t}return i(t,e),t.prototype.onLoad=function(){var e=r.env.curGameInit.data.betSizes,t=c.currency.format(e[0]),o=c.currency.format(e[e.length-1]);this.betSizeLab.string=a.tcI18n.i18nLabel("FMGameRules.Desc2",t,o),this.currencyLab.string=a.tcI18n.i18nLabel("CommonRulesShared.InGameCurrency",c.currency.getSymbol())},s([h(cc.Label)],t.prototype,"betSizeLab",void 0),s([h(cc.Label)],t.prototype,"currencyLab",void 0),s([u],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../../../../script/app/env":void 0,"../../../../script/framework/i18n/i18n":void 0,"../../../../script/pkg/currency":void 0}],"fortuneMouse-anim":[function(e,t,o){"use strict";cc._RF.push(t,"e72cfv7qzdPAa8vn3B/+RoT","fortuneMouse-anim");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),s=this&&this.__decorate||function(e,t,o,n){var i,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(r=(s<3?i(r):s>3?i(t,o,r):i(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,s){function r(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,a)}c((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var o,n,i,s,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(e){return function(t){return c([e,t])}}function c(s){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,n=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){r.label=s[1];break}if(6===s[0]&&r.label<i[1]){r.label=i[1],i=s;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(s);break}i[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(a){s=[6,a],n=0}finally{o=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.FortuneMouseAnimAlert=o.FortuneMouseAnim=void 0;var c=e("../../../../bundles-v2/update-v2/script/api/fortuneMouse-define"),l=e("../../../../script/config/cmd"),u=e("../../../../script/config/config"),h=e("../../../../script/framework/audio/audio"),p=e("../../../../script/framework/log/log"),d=e("../../../../script/framework/res/res"),f=e("./fortuneMouse-table"),m=cc._decorator,g=m.ccclass,v=(m.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.goldAniNodes=[],t.timeount=0,t.timeExit=0,t.winCoin=0,t.maxWinLevel=0,t.curWinLevel=0,t.winLevels=[0],t.isAniOver=!1,t._runObj={num:0},t}return i(t,e),t.prototype.onLoad=function(){var e=this;this.mask=cc.find("mask",this.node),this.effect_1=cc.find("effect_1",this.node),this.effect_2=cc.find("effect_2",this.node),this.countbg=cc.find("countbg",this.node),this.labelWinCount=cc.find("amount",this.node).getComponent(cc.Label),this.goldAnimation=cc.find("goldAni/gold",this.node),this.huoHua_1_effect=cc.find("megaEffect/huoHua_1/effect",this.node),this.huoHua_2_effect=cc.find("megaEffect/huoHua_2/effect",this.node),this.huoHua_3_effect=cc.find("megaEffect/huoHua_3/effect",this.node),this.huoHua_4_effect=cc.find("megaEffect/huoHua_4/effect",this.node),this.jian_1=cc.find("jian_1",this.node),this.jian_2=cc.find("jian_2",this.node),this.jian_3=cc.find("jian_3",this.node),this.jian_4=cc.find("jian_4",this.node),this.huoHua_1_effect.active=!1,this.huoHua_2_effect.active=!1,this.huoHua_3_effect.active=!1,this.huoHua_4_effect.active=!1,this.grandeGanhd=cc.find("grandeGanhd",this.node),this.mergeGanhd=cc.find("mergeGanhd",this.node),this.superMergeGanhd=cc.find("superMergeGanhd",this.node),this.grandeMouse=cc.find("grandeMouse",this.node),this.mergeMouse=cc.find("mergeMouse",this.node),this.superMergeMouse=cc.find("superMergeMouse",this.node),this.node.getChildByName("grandeGanhd").active=!0,this.grandeMouse.active=!0,this.mask.on("click",this.onMaskHandel.bind(this),this),this.effect_2.getComponent(sp.Skeleton).setCompleteListener(function(){e.effect_2.getComponent(sp.Skeleton).setAnimation(0,"zhuan",!0)})},t.prototype.onEnable=function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown.bind(this),this)},t.prototype.onDisable=function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown.bind(this),this)},t.prototype.review=function(){this.unschedule(this.countTime.bind(this)),this.node.active=!0,this.grandeGanhd.active=!1,this.mergeGanhd.active=!1,this.superMergeGanhd.active=!1,this.grandeMouse.active=!1,this.mergeMouse.active=!1,this.superMergeMouse.active=!1,this.effect_1.active=!1,this.effect_2.active=!1,this.maxWinLevel=0,this.curWinLevel=0,this.effect_2.scale=1,this.huoHua_1_effect.active=!1,this.huoHua_2_effect.active=!1,this.huoHua_3_effect.active=!1,this.huoHua_4_effect.active=!1,this.jian_1.active=!1,this.jian_2.active=!1,this.jian_3.active=!1,this.jian_4.active=!1,this.countbg.active=!1,this.labelWinCount.node.active=!1},t.prototype.show=function(){return r(this,void 0,void 0,function(){var e=this;return a(this,function(){return this.review(),cc.tween(this.node).to(.2,{opacity:255}).call(function(){e.delayshow()}).start(),[2]})})},t.prototype.delayshow=function(){var e=this;p.tcLog.info("FortuneMouseAni... "),this.scheduleOnce(this.countTime.bind(this),1),cc.tween(this.countbg).set({opacity:0,scale:0}).delay(.3).to(.25,{opacity:255,scale:1},{easing:cc.easing.backOut}).start(),this.yanhuaLoop(),this.schedule(this.yanhuaLoop.bind(this),2),u.gameHelper.stopAllEffects(),h.uAudio.getInstance().stopMusic(),h.uAudio.getInstance().playEffect(c.FortuneMouseDefine.soundNames.bg_bigwin),cc.tween(this.mask).set({active:!0,opacity:0}).to(.2,{opacity:120}).start(),this.scheduleOnce(function(){e.effect_1.active=!0,e.effect_1.getComponent(sp.Skeleton).setAnimation(0,"kuosan",!1),e.effect_2.active=!0,e.effect_2.getComponent(sp.Skeleton).setAnimation(0,"tanchu",!1)},.1),this.scheduleOnce(function(){e.jian_1.active=!0,e.jian_2.active=!0,e.jian_3.active=!0,e.jian_4.active=!0,e.countbg.active=!0,e.labelWinCount.node.active=!0},.3),this.scheduleOnce(function(){},.1),this.grandeGanhd.active=!0,cc.tween(this.grandeGanhd.getChildByName("title")).set({active:!0,opacity:0,scale:0,position:cc.v3(0,-52,0)}).delay(.5).to(.2,{opacity:255,scale:1,position:cc.v3(0,99,0)},{easing:cc.easing.backOut}).start(),this.grandeMouse.active=!0,this.grandeMouse.opacity=0,this.grandeMouse.scale=0,cc.tween(this.grandeMouse).delay(.5).to(.2,{opacity:255,scale:1},{easing:cc.easing.backOut}).start(),cc.tween(this.labelWinCount.node).set({active:!0,opacity:0,scale:0}).delay(.5).to(.2,{opacity:255,scale:1},{easing:cc.easing.backOut}).start(),this.scheduleOnce(function(){e.runnum()},.5)},t.prototype.runnum=function(){var e=this;this.winCoin=f.FortuneMouseTable.tabelInfo.totalWin;for(var t=0;t<f.FortuneMouseTable.tabelInfo.winLevel.length;++t)this.winLevels[t]=f.FortuneMouseTable.tabelInfo.winLevel[t];var o=f.FortuneMouseTable.tabelInfo.totalWin/f.FortuneMouseTable.tabelInfo.bet;for(t=0;t<this.winLevels.length;++t)o>=this.winLevels[t]&&(this.maxWinLevel=t);var n=6.52;p.tcLog.info(" tween..  runTime  "+n+"  curWinLevel:"+this.curWinLevel+"   maxWinLevel:"+this.maxWinLevel),this._runObj={num:0},cc.tween(this._runObj).to(n,{num:this.winCoin},{progress:function(t,o,i,s){var r=t+(o-t)*s,a=Math.floor(801*Math.random())+100;1!=s&&(r+=a),e.labelWinCount.string=f.FortuneMouseTable.format(r,!0),f.FortuneMouseTable.tabelInfo.bet*e.winLevels[2]<=r?(n=16,e.changeWinLevel(2)):f.FortuneMouseTable.tabelInfo.bet*e.winLevels[1]<=r&&(n=10,e.changeWinLevel(1))}}).call(function(){e.overdeal()}).start()},t.prototype.changeWinLevel=function(e){var t=this;this.curWinLevel!=e&&(p.tcLog.info("changeWinLevel... "+e+"  curWinLevel:"+this.curWinLevel+"   maxWinLevel:"+this.maxWinLevel),this.curWinLevel=e,this.grandeGanhd.active=!1,this.mergeGanhd.active=!1,this.superMergeGanhd.active=!1,this.grandeMouse.active=!1,this.mergeMouse.active=!1,this.superMergeMouse.active=!1,this.huoHua_1_effect.getComponent(cc.Animation).play(),this.huoHua_2_effect.getComponent(cc.Animation).play(),1==e?(this.effect_1.active=!0,this.effect_1.getComponent(sp.Skeleton).setAnimation(0,"kuosan",!1),this.effect_2.active=!0,this.effect_2.getComponent(sp.Skeleton).setAnimation(0,"tanchu",!1),this.scheduleOnce(function(){t.effect_2.scale=1.2},.2),cc.tween(this.grandeGanhd.getChildByName("title")).to(.25,{opacity:0,scale:0,position:cc.v3(0,-47,0)}).set({active:!1}).start(),cc.tween(this.countbg).delay(.15).to(.15,{scale:1.2},{easing:cc.easing.backOut}).to(.1,{scale:1}).start(),cc.tween(this.labelWinCount.node).delay(.3).to(.2,{scale:1.2}).to(.1,{scale:1}).start(),this.mergeGanhd.active=!0,cc.tween(this.mergeGanhd.getChildByName("title")).set({active:!0,opacity:0,scale:0,position:cc.v3(0,-47,0)}).delay(.3).to(.25,{opacity:255,scale:1,position:cc.v3(0,99,0)},{easing:cc.easing.backOut}).start(),this.mergeMouse.active=!0,this.mergeMouse.opacity=0,this.mergeMouse.scale=0,cc.tween(this.mergeMouse).delay(.3).to(.25,{opacity:255,scale:1},{easing:cc.easing.backOut}).start()):2==e&&(this.playGoldAnimation(),this.effect_1.active=!0,this.effect_1.getComponent(sp.Skeleton).setAnimation(0,"kuosan",!1),this.effect_2.active=!0,this.effect_2.getComponent(sp.Skeleton).setAnimation(0,"tanchu",!1),this.grandeGanhd.active=!1,this.scheduleOnce(function(){t.effect_2.scale=1.5},.2),cc.tween(this.mergeGanhd.getChildByName("title")).to(.25,{opacity:0,scale:0,position:cc.v3(0,-47,0)}).set({active:!1}).start(),cc.tween(this.countbg).delay(.15).to(.15,{scale:1.2},{easing:cc.easing.backOut}).to(.1,{scale:1}).start(),cc.tween(this.labelWinCount.node).delay(.3).to(.2,{scale:1.2}).to(.1,{scale:1}).start(),this.superMergeGanhd.active=!0,cc.tween(this.superMergeGanhd.getChildByName("title")).set({active:!0,opacity:0,scale:0,position:cc.v3(0,-47,0)}).delay(.3).to(.25,{opacity:255,scale:1,position:cc.v3(0,99,0)},{easing:cc.easing.backOut}).start(),this.superMergeMouse.active=!0,this.superMergeMouse.opacity=0,this.superMergeMouse.scale=0,cc.tween(this.superMergeMouse).delay(.3).to(.25,{opacity:255,scale:1},{easing:cc.easing.backOut}).start()))},t.prototype.overdeal=function(){var e=this;p.tcLog.info(" show isAniOver... "),this.isAniOver=!0,h.uAudio.getInstance().stopEffect(c.FortuneMouseDefine.soundNames.bg_bigwin),h.uAudio.getInstance().playEffect(c.FortuneMouseDefine.soundNames.bigwin_end),this.scheduleOnce(function(){cc.tween(e.countbg).set({opacity:255,scale:1}).to(.2,{scale:1.4}).to(.15,{scale:1}).start(),cc.tween(e.labelWinCount.node).set({opacity:255,scale:1}).to(.2,{scale:1.4}).to(.15,{scale:1}).start(),cc.tween(e.grandeGanhd.getChildByName("title")).set({opacity:255,scale:1,position:cc.v3(0,99,0)}).to(.2,{scale:1.4}).to(.15,{scale:1}).start(),e.grandeMouse.opacity=255,e.grandeMouse.scale=1,cc.tween(e.grandeMouse).to(.2,{scale:1.4}).to(.15,{scale:1}).start(),cc.tween(e.mergeGanhd.getChildByName("title")).set({opacity:255,scale:1,position:cc.v3(0,99,0)}).to(.2,{scale:1.4}).to(.15,{scale:1}).start(),e.mergeMouse.opacity=255,e.mergeMouse.scale=1,cc.tween(e.mergeMouse).to(.2,{scale:1.4}).to(.15,{scale:1}).start(),cc.tween(e.superMergeGanhd.getChildByName("title")).set({opacity:255,scale:1,position:cc.v3(0,99,0)}).to(.2,{scale:1.4}).to(.15,{scale:1}).start(),e.superMergeMouse.opacity=255,e.superMergeMouse.scale=1,cc.tween(e.superMergeMouse).to(.2,{scale:1.4}).to(.15,{scale:1}).start(),e.scheduleOnce(function(){e.exist()},5)},.2)},t.prototype.onKeyDown=function(e){e.keyCode===cc.macro.KEY.space&&this.node.active&&this.onMaskHandel()},t.prototype.onMaskHandel=function(){var e=this;if(p.tcLog.info("click ",this.timeount),!(this.timeount<20)){if(this.scheduleOnce(function(){e.timeExit=20},.5),!this.isAniOver)return this.isAniOver=!0,p.tcLog.info("onMaskHandel ",this.isAniOver),this.unscheduleAllCallbacks(),cc.Tween.stopAllByTarget(this.grandeGanhd.getChildByName("title")),cc.Tween.stopAllByTarget(this.mergeGanhd.getChildByName("title")),cc.Tween.stopAllByTarget(this.superMergeGanhd.getChildByName("title")),cc.Tween.stopAllByTarget(this.grandeMouse),cc.Tween.stopAllByTarget(this.mergeMouse),cc.Tween.stopAllByTarget(this.superMergeMouse),cc.Tween.stopAllByTarget(this.countbg),cc.Tween.stopAllByTarget(this.labelWinCount.node),cc.Tween.stopAllByTarget(this._runObj),this.labelWinCount.string=f.FortuneMouseTable.format(this.winCoin,!0),1==this.maxWinLevel?(this.mergeGanhd.active=!0,this.mergeGanhd.getChildByName("title").active=!0,this.mergeMouse.active=!0,this.grandeGanhd.active=!1,this.superMergeGanhd.active=!1,this.grandeMouse.active=!1,this.superMergeMouse.active=!1):2==this.maxWinLevel&&(this.superMergeGanhd.active=!0,this.superMergeGanhd.getChildByName("title").active=!0,this.superMergeMouse.active=!0,this.grandeGanhd.active=!1,this.mergeGanhd.active=!1,this.grandeMouse.active=!1,this.mergeMouse.active=!1),void this.overdeal();this.timeExit<20||this.exist()}},t.prototype.countTime=function(){this.timeount=20},t.prototype.exist=function(){var e=this;p.tcLog.info(" exis... "),cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown.bind(this),this),this.effect_1.active=!1,this.effect_2.active=!1,cc.tween(this.node).to(.3,{opacity:0}).call(function(){e.node.active=!1,e.closeAnimAlert()}).start()},t.prototype.playGoldAnimation=function(){this.schedule(this.playGoldLoop.bind(this),.1)},t.prototype.playGoldLoop=function(e){var t=this;void 0===e&&(e=1);for(var o=function(e){var o=n.goldAniNodes.pop();o||(o=cc.instantiate(n.goldAnimation)).setParent(n.goldAnimation.parent),o.setPosition(cc.Vec3.ZERO);var i=5*Math.random(),s=cc.tween(o).by(2,{position:cc.v3(1e3*Math.sin(36*e+i),1e3*Math.cos(36*e+i),0)}),r=cc.tween(o).set({scale:.7}).to(2,{scale:1.8}),a=cc.tween(o).to(.3,{opacity:255});cc.tween(o).set({active:!0,opacity:0}).delay(.1*e).parallel(a,s,r).call(function(){o.active=!1,t.goldAniNodes.push(o)}).start()},n=this,i=0;i<5*e;++i)o(i)},t.prototype.yanhuaLoop=function(){var e=this;p.tcLog.info("yanhuaLoop "),this.huoHua_1_effect.active=!0,this.huoHua_1_effect.getComponent(cc.Animation).play(),this.scheduleOnce(function(){e.huoHua_2_effect.active=!0,e.huoHua_2_effect.getComponent(cc.Animation).play()},1),this.scheduleOnce(function(){e.huoHua_3_effect.active=!0,e.huoHua_3_effect.getComponent(cc.Animation).play()},2),this.scheduleOnce(function(){e.huoHua_4_effect.active=!0,e.huoHua_4_effect.getComponent(cc.Animation).play()},3),this.scheduleOnce(function(){e.huoHua_1_effect.getComponent(cc.Animation).play()},5),this.scheduleOnce(function(){e.huoHua_2_effect.getComponent(cc.Animation).play()},7),this.scheduleOnce(function(){e.huoHua_3_effect.getComponent(cc.Animation).play()},9),this.scheduleOnce(function(){e.huoHua_4_effect.getComponent(cc.Animation).play()},11)},t.prototype.closeAnimAlert=function(){cc.Tween.stopAllByTarget(this._runObj),h.uAudio.getInstance().stopEffect(c.FortuneMouseDefine.soundNames.bg_bigwin),h.uAudio.getInstance().playMusic(c.FortuneMouseDefine.soundNames.bg_music),f.FortuneMouseTable.tabelInfo.musicName=c.FortuneMouseDefine.soundNames.bg_music,this.unscheduleAllCallbacks(),this.node.active=!1,cc.systemEvent.emit(c.FortuneMouseDefine.events.closeAnimAlert)},s([g],t)}(cc.Component));o.FortuneMouseAnim=v,function(e){var t;e.clear=function(){t=void 0},e.init=function(){return r(this,void 0,void 0,function(){var e,o;return a(this,function(n){switch(n.label){case 0:return t?[3,2]:[4,d.tcRes.load(u.gameHelper.getBundleName(l.cmd.SERVER_TYPE_FORTUNE_MOUSE),cc.Prefab,"prefab/fortuneMouse-anim")];case 1:if(!(e=n.sent()))return[2];t=e,n.label=2;case 2:return(o=cc.instantiate(t)).name="FortuneMouseAnimAlert",o.setParent(u.config.uiNode.dialog),o.setPosition(cc.Vec3.ZERO),[2,o.addComponent(v)]}})})}}(o.FortuneMouseAnimAlert||(o.FortuneMouseAnimAlert={})),cc._RF.pop()},{"../../../../bundles-v2/update-v2/script/api/fortuneMouse-define":void 0,"../../../../script/config/cmd":void 0,"../../../../script/config/config":void 0,"../../../../script/framework/audio/audio":void 0,"../../../../script/framework/log/log":void 0,"../../../../script/framework/res/res":void 0,"./fortuneMouse-table":"fortuneMouse-table"}],"fortuneMouse-award-layer":[function(e,t,o){"use strict";cc._RF.push(t,"2cd02g8lWtFvqIobj5KA03u","fortuneMouse-award-layer");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),s=this&&this.__decorate||function(e,t,o,n){var i,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(r=(s<3?i(r):s>3?i(t,o,r):i(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.FortuneMouseAwardLayer=void 0;var r=e("../../../../script/framework/audio/audio"),a=e("../../../../bundles-v2/update-v2/script/api/fortuneMouse-define"),c=e("../../../../bundles-v2/update-v2/script/api/fortuneMouse-res"),l=e("../../../../script/framework/log/log"),u=e("../../../../script/pkg/currency"),h=e("./fortuneMouse-table"),p=cc._decorator,d=p.ccclass,f=(p.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lines=[],t.cellItems=[],t.nodeOnLineNums=new Map,t.lineCount=0,t}return i(t,e),t.prototype.onLoad=function(){var e,t=this;this.cellMasksNode_1=cc.find("cellMasks_1",this.node),this.body=cc.find("body",this.node),this.isItemTip=!1,this.linesNode=cc.find("lines",this.node);for(var o=1;o<=5;++o)this.lines.push(cc.find("lines/"+o,this.node)),this.nodeOnLineNums.set(10+o,cc.find("lineNumOnLine/line-"+o+"-l",this.node)),this.nodeOnLineNums.set(20+o,cc.find("lineNumOnLine/line-"+o+"-r",this.node));this.itemTip=cc.find("itemTip",this.node),this.itemTipBg=cc.find("itemTip/bg",this.node),this.itemSk=cc.find("itemTip/itemSkeletion",this.node).getComponent(sp.Skeleton),null===(e=this.body)||void 0===e||e.children.forEach(function(e){e.removeAllChildren();var o=[];t.cellItems.push(o);for(var n=1;n<=3;++n){var i=cc.instantiate(c.FortuneMouseRes.getAniItem());i.setParent(e),o.push(i)}}),this.itemTip.on("click",function(){t.itemTip.active&&(t.itemTip.active=!1,t.isItemTip=!1,t.setMaskActive(!1,150,t.cellMasksNode_1))},this)},t.prototype.setCellMasksNode=function(e){this.cellMasksNode=e},t.prototype.reInitView=function(){this.unscheduleAllCallbacks(),this.unschedule(this.showOneLineAndScore),this.setMaskActive(!1),this.setMaskActive(!1,0,this.cellMasksNode_1),this.showAllLineNums(!0),this.hideLines(),this.hideItemTip(),this.hideCells()},t.prototype.hideCells=function(){this.cellItems.forEach(function(e){e.forEach(function(e){e.children.forEach(function(e){e.active=!1})})})},t.prototype.hideLines=function(){var e=this;cc.Tween.stopAllByTarget(this.linesNode),this.lines.forEach(function(t,o){var n=cc.find("lines/"+(o+1),e.node),i=cc.find("lines/"+(o+1)+"/"+(o+1),e.node);t.active=!1,n.active=!1,i.active=!1})},t.prototype.showLines=function(e){var t=this;this.lines&&0!=this.lines.length&&cc.tween(this.linesNode).set({opacity:0}).call(function(){e.forEach(function(e){var o=cc.find("lines/"+e,t.node),n=cc.find("lines/"+e+"/"+e,t.node);t.scheduleOnce(function(){o.active=!0,t.scheduleOnce(function(){n.active=!0},.1)},.1),t.nodeOnLineNums.get(10+Number(e)).getChildByName("node_open").active=!1,t.nodeOnLineNums.get(20+Number(e)).getChildByName("node_open").active=!1,t.nodeOnLineNums.get(10+Number(e)).getChildByName("node_close").active=!1,t.nodeOnLineNums.get(20+Number(e)).getChildByName("node_close").active=!1,t.nodeOnLineNums.get(10+Number(e)).getChildByName("node_red").active=!0,t.nodeOnLineNums.get(20+Number(e)).getChildByName("node_red").active=!0})}).to(.7,{opacity:255}).to(.5,{opacity:200}).call(function(){}).start()},t.prototype.showAllLineNums=function(e){for(var t=1;t<=5;++t)this.nodeOnLineNums.get(10+t).getChildByName("node_close").active=!e,this.nodeOnLineNums.get(20+t).getChildByName("node_close").active=!e,this.nodeOnLineNums.get(10+t).getChildByName("node_open").active=e,this.nodeOnLineNums.get(20+t).getChildByName("node_open").active=e,this.nodeOnLineNums.get(10+t).getChildByName("node_red").active=!e,this.nodeOnLineNums.get(20+t).getChildByName("node_red").active=!e},t.prototype.setData=function(e,t,o){var n=0;this.cellItems[e].forEach(function(e,i){if(e){var s=e.getChildByName("circleBg"),r=e.getChildByName("sprite"),u=e.getChildByName("spine"),h=null==u?void 0:u.getComponent(sp.Skeleton),p=e.getChildByName("lab_coinbox"),d=e.getChildByName("lab_coinboxbg");u.scale=1,s.active=!1,d.active=!1,p.active=!1,r.active=!1,u.active=!1;var f=o[i],m=f.parent.convertToWorldSpaceAR(f.position);m=e.parent.convertToNodeSpaceAR(m),e.position=m;var g=t[i];83==g?(u.scale=a.FortuneMouseDefine.Constant.FuSpineScale,e.zIndex=1):51==g?(u.scale=a.FortuneMouseDefine.Constant.WildSpineScale,e.zIndex=2+n,n++):(u.scale=1,e.zIndex=0);var v=c.FortuneMouseRes.getItemSkeletionData(g);h.skeletonData&&h.skeletonData.name==(null==v?void 0:v.name)||(h.skeletonData=v),c.FortuneMouseRes.getItemIconById(g)||l.tcLog.warn("setItemSPrite not found:"+g)}})},t.prototype.playWildOne=function(e,t){var o=this.cellItems[e][t],n=null==o?void 0:o.getChildByName("circleBg"),i=o.getChildByName("sprite"),s=null==o?void 0:o.getChildByName("spine"),r=null==s?void 0:s.getComponent(sp.Skeleton);l.tcLog.info("playWindOne",s.zIndex),n.active=!1,i.active=!1,s.active=!0;var c=h.FortuneMouseTable.tabelInfo.screen[e][t];s.scale=83==c?a.FortuneMouseDefine.Constant.FuSpineScale:51==c?a.FortuneMouseDefine.Constant.WildSpineScale:1,r.setAnimation(0,"spawn",!1),r.setCompleteListener(function(){r.setAnimation(0,"idle",!0)})},t.prototype.playWildOnes=function(e,t,o){var n=o[t],i=this.cellItems[e][t],s=null==i?void 0:i.getChildByName("circleBg"),r=i.getChildByName("sprite"),c=null==i?void 0:i.getChildByName("spine"),l=null==c?void 0:c.getComponent(sp.Skeleton);s.active=!1,r.active=!1,c.scale=83==n?a.FortuneMouseDefine.Constant.FuSpineScale:51==n?a.FortuneMouseDefine.Constant.WildSpineScale:1,c.active=!0,l.setAnimation(0,"spawn",!1),l.setCompleteListener(function(){l.setAnimation(0,"idle",!0)})},t.prototype.setSprMove=function(e){var t=this,o=0;this.cellItems[e].forEach(function(e){if(e){var t=e.getChildByName("spine");t.opacity=0,t.active=!0}});for(var n=function(n){var s=i.cellItems[e][n];if(!s)return{value:void 0};var u=s.getChildByName("spine"),h=null==u?void 0:u.getComponent(sp.Skeleton),p=s.getChildByName("sprite");cc.Tween.stopAllByTarget(u),h.skeletonData=c.FortuneMouseRes.getItemSkeletionData(51),o=.15*(i.cellItems[e].length-1-n),u.opacity=255,u.scale=0,h.setCompleteListener(null),cc.tween(u).delay(o).call(function(){return h.setAnimation(0,"idle_respin",!0)}).set({scale:.3}).to(.15,{scale:1.6}).call(function(){0==n?r.uAudio.getInstance().playEffect(a.FortuneMouseDefine.soundNames.bon_wild_show1):1==n&&r.uAudio.getInstance().playEffect(a.FortuneMouseDefine.soundNames.bon_wild_show2),t.scheduleOnce(function(){r.uAudio.getInstance().playEffect(a.FortuneMouseDefine.soundNames.wild_hit),Math.random()<.5?r.uAudio.getInstance().playEffect(a.FortuneMouseDefine.soundNames.wild_tips1):r.uAudio.getInstance().playEffect(a.FortuneMouseDefine.soundNames.wild_tips2)},.2)}).to(.15,{scale:1.5}).start();var d=c.FortuneMouseRes.getItemIconById(51);return d?p?void(p.getComponent(cc.Sprite).spriteFrame=d):{value:void 0}:(l.tcLog.warn("setItemSPrite spriteframe not found:51"),{value:void 0})},i=this,s=0;s<this.cellItems[e].length;s++){var u=n(s);if("object"==typeof u)return u.value}},t.prototype.showAllLineNoScore=function(){var e=this;l.tcLog.info("\u6447\u5956\u7ed3\u675f \u663e\u793a\u6240\u6709\u4e2d\u5956\u7ebf \u4e0d\u5e26\u91d1\u989d",this.cellMasksNode.opacity),cc.systemEvent.emit(a.FortuneMouseDefine.events.showNodeCells),0==this.cellMasksNode.active&&this.setMaskActive(!0),this.showAllLineNums(!1),this.hideLines(),this.hideCells();var t=h.FortuneMouseTable.tabelInfo.hits;!t||t.length<=0||t.forEach(function(o){o.lineId&&e.showLines([o.lineId]),o.pos&&o.pos.forEach(function(o,n){e.scheduleOnce(function(){cc.systemEvent.emit(a.FortuneMouseDefine.events.showItemAnims,{cellId:n,index:o,hist:t});var i=e.cellItems[n][o],s=null==i?void 0:i.getChildByName("circleBg");s.active=!1;var r=i.getChildByName("sprite"),c=null==i?void 0:i.getChildByName("spine"),l=null==s?void 0:s.getComponent(cc.Animation),u=null==c?void 0:c.getComponent(sp.Skeleton);l.sample("yuanQuan"),u.setAnimation(0,"win",!1),s.active=!0,s.opacity=0,cc.tween(s).to(.4,{opacity:255}).start(),e.scheduleOnce(function(){l.play("yuanQuan")},.2),u.setCompleteListener(function(){u.setAnimation(0,"win_idle",!0)}),r.active=!1,c.active=!0;var p=h.FortuneMouseTable.tabelInfo.screen[n][o];c.scale=83==p?a.FortuneMouseDefine.Constant.FuSpineScale:51==p?a.FortuneMouseDefine.Constant.WildSpineScale:1},.1*n)})})},t.prototype.playMouseAnim=function(e,t){var o=this.cellItems[e][t],n=null==o?void 0:o.getChildByName("circleBg"),i=o.getChildByName("sprite"),s=null==o?void 0:o.getChildByName("spine"),r=null==s?void 0:s.getComponent(sp.Skeleton);null==n||n.getComponent(cc.Animation),r.setAnimation(0,"win",!1),r.setCompleteListener(function(){r.setAnimation(0,"win_idle",!0)}),n.active=!1,i.active=!1,s.active=!0},t.prototype.showLineAndScore=function(){this.unschedule(this.showOneLineAndScore),this.lineCount=0,h.FortuneMouseTable.tabelInfo.hits.length>0&&(this.showOneLineAndScore(),this.schedule(this.showOneLineAndScore.bind(this),3))},t.prototype.showLineAndScores=function(){l.tcLog.info("showLineAndScor... "),this.unschedule(this.showOneLineAndScore),this.setMaskActive(!0),this.lineCount=0,h.FortuneMouseTable.tabelInfo.hits.length>0&&(this.showOneLineAndScore(),this.schedule(this.showOneLineAndScore.bind(this),3))},t.prototype.setMaskActive=function(e,t,o){void 0===t&&(t=143),null==o&&(o=this.cellMasksNode),cc.Tween.stopAllByTarget(o),e?(o.active=!0,h.FortuneMouseTable.moveOpacityIn(o,void 0,t)):h.FortuneMouseTable.moveOpacityOut(o,function(){o.active=!1})},t.prototype.showOneLineAndScore=function(){cc.systemEvent.emit(a.FortuneMouseDefine.events.showNodeCells),this.showAllLineNums(!1),this.hideLines(),this.hideCells();var e=h.FortuneMouseTable.tabelInfo.hits;if(e&&!(e.length<=0)){if(r.uAudio.getInstance().playEffect(a.FortuneMouseDefine.soundNames.win_hit),this.lineCount<e.length){var t=e[this.lineCount];return this.showLines([t.lineId]),this.showItem(t,!0),this.lineCount++,void t.lineId}return this.lineCount==e.length?(this.showAllLineNoScore(),void(this.lineCount=0)):void 0}},t.prototype.showItem=function(e,t){var o=this;void 0===t&&(t=!0),this.cellItems.forEach(function(n,i){o.scheduleOnce(function(){n.forEach(function(n,s){var r=n.getChildByName("circleBg");r.active=!1;var c=n.getChildByName("sprite"),l=n.getChildByName("spine"),p=null==l?void 0:l.getComponent(sp.Skeleton),d=null==r?void 0:r.getComponent(cc.Animation),f=n.getChildByName("lab_coinbox"),m=n.getChildByName("lab_coinboxbg");if(m.active=!1,n.getChildByName("circleAni").active=!1,cc.Tween.stopAllByTarget(l),e.pos[i]==s){cc.systemEvent.emit(a.FortuneMouseDefine.events.showItemAnims,{cellId:i,index:s,hist:[e]}),r.active=!0,r.opacity=0,cc.tween(r).to(.4,{opacity:255}).start(),o.scheduleOnce(function(){d.play("yuanQuan")},.2),p.setAnimation(0,"win",!1),p.setCompleteListener(function(){p.setAnimation(0,"win_idle",!0)}),l.active=!0,c.active=!1;var g=h.FortuneMouseTable.tabelInfo.screen[i][s];l.scale=83==g?a.FortuneMouseDefine.Constant.FuSpineScale:51==g?a.FortuneMouseDefine.Constant.WildSpineScale:1,1==i&&(f.active=!0,f.getComponent(cc.Label).string=u.currency.format(e.win),m.active=!0)}else r.active=!1,f.active=!1,m.active=!1,t&&(c.active=!1)})},.1*i)})},t.prototype.showItemSkeletion=function(){},t.prototype.showItemTip=function(e,t,o){var n;if(!h.FortuneMouseTable.tabelInfo.bRolling){h.FortuneMouseTable.tabelInfo.screen;var i=h.FortuneMouseTable.tabelInfo.screen[e][t];if(0!=i){this.isItemTip||this.setMaskActive(!0,150,this.cellMasksNode_1),r.uAudio.getInstance().playEffect(a.FortuneMouseDefine.soundNames.showItemTip),this.itemTip.active=!0;var s=null===(n=this.itemTip)||void 0===n?void 0:n.getChildByName("node"),l=null==s?void 0:s.getChildByName("score").getComponent(cc.Label);this.isItemTip?this.itemTip.opacity=255:(this.itemTip.opacity=0,cc.tween(this.itemTip).to(.2,{opacity:255}).start()),this.isItemTip=!0;var u=i;l.string=h.FortuneMouseTable.itemScore[u]+"",this.itemSk.node.scale=83==i?a.FortuneMouseDefine.Constant.FuSpineScale:51==i?a.FortuneMouseDefine.Constant.WildSpineScale:1;var p=c.FortuneMouseRes.getItemSkeletionData(i);this.itemSk.skeletonData&&this.itemSk.skeletonData.name==(null==p?void 0:p.name)||(this.itemSk.skeletonData=p,this.itemSk.setAnimation(0,"win_idle",!0)),e<2?(this.itemTipBg.scaleX=1,s.x=Math.abs(s.x),this.itemSk.node.x=-Math.abs(this.itemSk.node.x)):(this.itemTipBg.scaleX=-1,s.x=-Math.abs(s.x),this.itemSk.node.x=Math.abs(this.itemSk.node.x));var d=o.convertToWorldSpaceAR(cc.Vec3.ZERO);d=this.itemTip.parent.convertToNodeSpaceAR(d),this.itemTip.position=cc.v3(d.x-this.itemSk.node.x,d.y)}}},t.prototype.hideItemTip=function(){this.itemTip.active=!1,this.setMaskActive(!1)},t.prototype.animation1=function(){},s([d],t)}(cc.Component));o.FortuneMouseAwardLayer=f,cc._RF.pop()},{"../../../../bundles-v2/update-v2/script/api/fortuneMouse-define":void 0,"../../../../bundles-v2/update-v2/script/api/fortuneMouse-res":void 0,"../../../../script/framework/audio/audio":void 0,"../../../../script/framework/log/log":void 0,"../../../../script/pkg/currency":void 0,"./fortuneMouse-table":"fortuneMouse-table"}],"fortuneMouse-cell-item":[function(e,t,o){"use strict";cc._RF.push(t,"3c93aw/QbNOMpP3CQMxIt/K","fortuneMouse-cell-item");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),s=this&&this.__decorate||function(e,t,o,n){var i,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(r=(s<3?i(r):s>3?i(t,o,r):i(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.FortuneMouseCellItem=void 0;var r,a=e("../../../../bundles-v2/update-v2/script/api/fortuneMouse-define"),c=e("../../../../script/framework/audio/audio"),l=e("../../../../script/framework/log/log"),u=e("./fortuneMouse-scroll-symbol"),h=e("./fortuneMouse-table"),p=e("./Game1810Scroll"),d=cc._decorator,f=d.ccclass;d.property,function(e){e[e.IDLE=0]="IDLE",e[e.STATE1=1]="STATE1",e[e.STATE2=2]="STATE2",e[e.STATE3=3]="STATE3",e[e.STATE4=4]="STATE4"}(r||(r={}));var m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cellId=0,t.isStop=!1,t.normalScrollSpeed=2800,t.normalScrollShowSpeed=.64*t.normalScrollSpeed,t.fastScrollSpeed=4500,t.oneRoolCostTime=.25,t}return i(t,e),t.prototype.onLoad=function(){this.scroll=this.getComponent(p.default),this.scroll.init(1),this.scroll.onUpdateSymbol=this.onUpdateSymbol.bind(this),this.scroll.onSymbolAppear=this.onSymbolAppear.bind(this),this.scroll.onSymbolRecycle=this.onSymbolRecycle.bind(this),this.scroll.onColScrollFinish=this.onColScrollFinish.bind(this)},t.prototype.onUpdateSymbol=function(e,t,o){var n,i=this;n=h.FortuneMouseTable.tabelInfo.SpecialMode&&h.FortuneMouseTable.tabelInfo.sprModeIdx<h.FortuneMouseTable.tabelInfo.sprModeData.length?h.FortuneMouseTable.tabelInfo.sprModeData[h.FortuneMouseTable.tabelInfo.sprModeIdx][this.cellId][2-t]:h.FortuneMouseTable.tabelInfo.screen[this.cellId][2-t],this.updateSymbol(o,n),o.off("click"),o.on("click",function(){i.onClickItem(t,o)},this)},t.prototype.updateSymbol=function(e,t,o){void 0===o&&(o=!1),e.getComponent(u.default).setData(t,o)},t.prototype.updateSymbolZIndex=function(){var e=100;this.scroll.traversalColSymbols(0,function(t){var o=t.getComponent(u.default).getId();t.zIndex=51==o?1+e:0,e--})},t.prototype.onSymbolAppear=function(e,t){if(this.state==r.STATE1||this.state==r.STATE2||this.state==r.STATE4)return this.updateRandomSymbol(t),void this.updateSymbolZIndex();if(this.state!=r.STATE3);else{if(this.scrollToResultIdx>=3)this.updateRandomSymbol(t);else{var o;o=h.FortuneMouseTable.tabelInfo.SpecialMode&&h.FortuneMouseTable.tabelInfo.sprModeIdx<h.FortuneMouseTable.tabelInfo.sprModeData.length?h.FortuneMouseTable.tabelInfo.sprModeData[h.FortuneMouseTable.tabelInfo.sprModeIdx][this.cellId][2-this.scrollToResultIdx]:h.FortuneMouseTable.tabelInfo.screen[this.cellId][2-this.scrollToResultIdx],this.updateSymbol(t,o),this.scrollToResultIdx++}this.updateSymbolZIndex()}},t.prototype.updateRandomSymbol=function(e){var t=h.FortuneMouseTable.getRandomSymbolId();this.updateSymbol(e,t,this.isBlur)},t.prototype.onSymbolRecycle=function(){},t.prototype.onColScrollFinish=function(){return this.state==r.STATE1?(this.state=r.STATE2,void this.scroll.scrollForever(0,this.quickMode?-this.fastScrollSpeed:-this.normalScrollSpeed)):this.state==r.STATE3?(this.state=r.STATE4,this.scroll.scroll(0,a.FortuneMouseDefine.Constant.state4Time,a.FortuneMouseDefine.Constant.state4Offset,cc.easeSineOut()),h.FortuneMouseTable.tabelInfo.SpecialMode?0==this.cellId?c.uAudio.getInstance().playEffect(a.FortuneMouseDefine.soundNames.bon_scroll_stop1):2==this.cellId&&c.uAudio.getInstance().playEffect(a.FortuneMouseDefine.soundNames.bon_scroll_stop2):c.uAudio.getInstance().playEffect(a.FortuneMouseDefine.soundNames.scroll_stop),void(2==this.cellId&&(c.uAudio.getInstance().stopEffect(a.FortuneMouseDefine.soundNames.reel_rotation),c.uAudio.getInstance().stopEffect(a.FortuneMouseDefine.soundNames.bon_reel_rotation)))):void(this.state!=r.STATE4||this.onRollEnd())},t.prototype.getOneRollCostTime=function(){return h.FortuneMouseTable.tabelInfo.SpecialMode&&h.FortuneMouseTable.tabelInfo.isGetData?.2:h.FortuneMouseTable.tabelInfo.qucikMode&&h.FortuneMouseTable.tabelInfo.isGetData?.05:h.FortuneMouseTable.tabelInfo.qucikMode?.2:this.oneRoolCostTime},t.prototype.updateSymbolsBlur=function(e){this.isBlur=e,this.scroll.traversalColSymbols(0,function(t){t.getComponent(u.default).setBlur(e)})},t.prototype.blurSymbols=function(){this.updateSymbolsBlur(!0)},t.prototype.startRoll=function(e){this.quickMode=e,this.isStop=!1,this.isStop||(this.isStop=!0,this.isBlur=!1,this.state=r.STATE1,this.scroll.scroll(0,a.FortuneMouseDefine.Constant.state1Time,a.FortuneMouseDefine.Constant.state1Offset),this.scheduleOnce(this.blurSymbols,.15))},t.prototype.updateToResult=function(){this.scroll.stopScroll(0),this.scroll.stopForeverScroll(0),this.isBlur=!1},t.prototype.scrollToResult=function(){this.updateSymbolsBlur(!1),this.state=r.STATE3,this.scrollToResultIdx=0;var e=this.scroll.lastSymbolUpperBoundOffset(0)+3*this.scroll.getSymbolPrefab().data.height+a.FortuneMouseDefine.Constant.state4Offset,t=e/this.normalScrollShowSpeed;this.scroll.scroll(0,t,-e,cc.easeSineOut())},t.prototype.skipScroll=function(){this.scroll.stopScroll(0),this.scroll.stopForeverScroll(0),this.unschedule(this.blurSymbols),this.isBlur=!1,this.onRollEnd()},t.prototype.onRollEnd=function(){this.state=r.IDLE,this.isStop=!1,this.updateColSymbols(),cc.systemEvent.emit(a.FortuneMouseDefine.events.MouseCellEndRoll,this.cellId)},t.prototype.init=function(e){return this.cellId=e,this.node.position=cc.Vec3.ZERO,this.state=r.IDLE,this.updateColSymbols(),this},t.prototype.updateColSymbols=function(){this.scroll.updateColSymbolsByCount(0,3),this.updateSymbolZIndex()},t.prototype.getItem=function(e){return this.scroll.getSymbol(0,e)},t.prototype.onClickItem=function(e,t){l.tcLog.info("onClickItem",this.cellId,e),cc.systemEvent.emit(a.FortuneMouseDefine.events.showItemTip,{cellId:this.cellId,itemIndex:e,symbol:t})},s([f],t)}(cc.Component);o.FortuneMouseCellItem=m,cc._RF.pop()},{"../../../../bundles-v2/update-v2/script/api/fortuneMouse-define":void 0,"../../../../script/framework/audio/audio":void 0,"../../../../script/framework/log/log":void 0,"./Game1810Scroll":"Game1810Scroll","./fortuneMouse-scroll-symbol":"fortuneMouse-scroll-symbol","./fortuneMouse-table":"fortuneMouse-table"}],"fortuneMouse-launch":[function(e,t,o){"use strict";cc._RF.push(t,"e7f06Ei5GpDha0WphfeHexW","fortuneMouse-launch"),Object.defineProperty(o,"__esModule",{value:!0}),o.heartbeatCron=void 0;var n=e("../../../../script/config/cmd"),i=e("../../../../script/cron/cron-v2"),s=e("./fortuneMouse-sender");o.heartbeatCron=new i.CronV2(4e3,function(){s.FortuneMouseSender.sendHeartBeat()}),window.gameLauncher||(window.gameLauncher={}),window.gameLauncher&&(window.gameLauncher[n.cmd.SERVER_TYPE_FORTUNE_MOUSE]={timerStart:function(){o.heartbeatCron.start()},timerStop:function(){o.heartbeatCron.stop()}}),cc._RF.pop()},{"../../../../script/config/cmd":void 0,"../../../../script/cron/cron-v2":void 0,"./fortuneMouse-sender":"fortuneMouse-sender"}],"fortuneMouse-logic":[function(e,t,o){"use strict";cc._RF.push(t,"e0999W+1+BOPaCdePopyDB/","fortuneMouse-logic"),Object.defineProperty(o,"__esModule",{value:!0}),o.FortuneMouseLogic=void 0;var n=e("./fortuneMouse-anim"),i=e("./fortuneMouse-sender"),s=e("./fortuneMouse-table"),r=e("./fortuneMouse-view"),a=e("./protocol/fortuneMouseProtocol.js"),c=e("../../../../script/framework/net/socket"),l=e("../../../../script/config/cmd"),u=e("../../../../script/event/event"),h=e("../../../../script/framework/audio/audio"),p=e("../../../../script/framework/log/log"),d=e("../../../../script/app/env"),f=e("../../gameCommonRes/PGGameRes/script/PgGameControlPanelLogic"),m=e("../../gameCommonRes/PGGameRes/script/PgEvent"),g=e("../../../../script/config/config"),v=e("../../gameCommon/script/round-tips "),y=e("../../gameCommon/script/spin-tips"),b=e("../../../../script/app/api"),_=e("../../../../bundles-v2/update-v2/script/api/api-config"),M=e("../../../../script/framework/net/http"),w=e("../../../../bundles-v2/update-v2/script/api/fortuneMouse-res"),S=e("../../../../bundles-v2/update-v2/script/api/fortuneMouse-define"),N=function(){function e(e){this.viewNode=e,this._totalWinRun={runNum:0},this._balanceRun={runNum:0},this._BetSizes=[500,5e3,5e4],this.maxRetryTimes=5,this.view=null==e?void 0:e.addComponent(r.FortuneMouseView),this.view&&(this.view.lateUpdate=this.update.bind(this),this.controlPanelLogic=new f.default(l.cmd.SERVER_TYPE_FORTUNE_MOUSE,this),this.handlerTableInfo(d.env.curGameInit.data),this.initEvent(),this.view.init(this),this.controlPanelLogic.setBtnSpineStatus(f.EBtnSpineStatus.ACTIVE_NORMAL),s.FortuneMouseTable.tabelInfo.qucikMode=!!this.bQuickMode(),v.RoundTips.init(e),y.SpinTips.init(e),i.FortuneMouseSender.reqCellMatrixConfig(),i.FortuneMouseSender.reqRoomInfo(),g.config.devTest&&(d.env.curGameData.balance=1e7,this.controlPanelLogic.setBonus(d.env.curGameData.balance)))}return e.prototype.sendLeaveGameReq=function(){},e.prototype.getBgMusic=function(){return S.FortuneMouseDefine.soundNames.bg_music},e.prototype.getClickBtnSound=function(){return S.FortuneMouseDefine.soundNames.click},e.prototype.getBetSizes=function(){return this._BetSizes},e.prototype.getControlPanelNode=function(){var e;return null===(e=this.view)||void 0===e?void 0:e.getControlPanelNode()},e.prototype.getPayTimes=function(){return 5},e.prototype.getPayTableNodeURL=function(){return"prefab/nodePayTable"},e.prototype.getRuleNodeURL=function(){return"prefab/nodeRule"},e.prototype.getHistoryNodeURL=function(){return"prefab/history/UIhistory"},e.prototype.getHistoryData=function(){throw new Error("Method not implemented.")},e.prototype.initEvent=function(){c.uNet.getInstance().bind(l.cmd.SERVER_TYPE_FORTUNE_MOUSE,this),cc.systemEvent.on(u.event.reconnectGame,this.reconnect,this),cc.systemEvent.on(u.event.existGame,this.backToLobby,this),cc.systemEvent.on(m.pgGameEvent.clickSpin,this.onBtnClickSpin,this),cc.systemEvent.on(m.pgGameEvent.startAutoSpin,this.onStartAutoSpin,this),cc.systemEvent.on(m.pgGameEvent.quikStopAutoSpin,this.onStopAutoSpin,this),cc.systemEvent.on(S.FortuneMouseDefine.events.allGameEnd,this.allGameEnd,this),cc.systemEvent.on(S.FortuneMouseDefine.events.runScors,this.onrunScors,this),cc.systemEvent.on(u.event.quicModeEvent,this.bQuickModeReq,this),cc.systemEvent.on(u.event.addBetEvent,this.onClickBtnBet,this),cc.systemEvent.on(u.event.subBetEvent,this.onClickBtnBet,this),cc.systemEvent.on(u.event.rebet,this.onRebet,this),cc.systemEvent.on(u.event.banlanceNoEnoughStopSpin,this.balanceNotEnoughStopSpin,this),window.addEventListener("HistoryEventFromHTML",this.onOpenHistory.bind(this))},e.prototype.backToLobby=function(){var e;c.uNet.getInstance().unbind(l.cmd.SERVER_TYPE_FORTUNE_MOUSE,this),cc.systemEvent.off(u.event.reconnectGame,this.reconnect,this),cc.systemEvent.off(u.event.existGame,this.backToLobby,this),cc.systemEvent.off(m.pgGameEvent.clickSpin,this.onBtnClickSpin,this),cc.systemEvent.off(m.pgGameEvent.startAutoSpin,this.onStartAutoSpin,this),cc.systemEvent.off(m.pgGameEvent.quikStopAutoSpin,this.onStopAutoSpin,this),cc.systemEvent.off(S.FortuneMouseDefine.events.allGameEnd,this.allGameEnd,this),cc.systemEvent.off(S.FortuneMouseDefine.events.runScors,this.onrunScors,this),cc.systemEvent.off(u.event.quicModeEvent,this.bQuickModeReq,this),cc.systemEvent.off(u.event.addBetEvent,this.onClickBtnBet,this),cc.systemEvent.off(u.event.subBetEvent,this.onClickBtnBet,this),cc.systemEvent.off(u.event.rebet,this.onRebet,this),g.gameHelper.stopAllEffects(),null===(e=this.view)||void 0===e||e.Idestroy(),this.clearAllCache()},e.prototype.onOpenHistory=function(){g.config.isHistoryFromHTML=!0,this.controlPanelLogic.onClickBtnHistory()},e.prototype.checkCanSpin=function(){var e,t;return s.FortuneMouseTable.tabelInfo.bRolling?(p.tcLog.warn("checkCanSpin  bRolling:"+s.FortuneMouseTable.tabelInfo.bRolling),null===(e=this.view)||void 0===e||e.skipScroll(),null===(t=this.controlPanelLogic)||void 0===t||t.setBtnSpineStatus(f.EBtnSpineStatus.UNACTIVE_RUN),!1):!s.FortuneMouseTable.tabelInfo.isAniming||(p.tcLog.warn("checkCanSpin  isAniming:"+s.FortuneMouseTable.tabelInfo.isAniming),!1)},e.prototype.onStartAutoSpin=function(){var e;null===(e=this.controlPanelLogic)||void 0===e||e.resetAutoData(),this.checkIsAutoStart()},e.prototype.onStopAutoSpin=function(){clearTimeout(this.timerId)},e.prototype.handlerTableInfo=function(e){var t,o,n,i,r,a,c,l,h,f,m,g,v,y=e;if(this.setTableScreen(y.screen),p.tcLog.info("FortuneMouse handlerTableInfo:",y.screen),this._BetSizes=y.betSizes,s.FortuneMouseTable.tabelInfo.isInit)0==s.FortuneMouseTable.tabelInfo.bRolling&&(d.env.curGameData.balance=null===(t=y.self)||void 0===t?void 0:t.balance,this.controlPanelLogic.setBonus(d.env.curGameData.balance),this.checkIsAutoStart());else{s.FortuneMouseTable.tabelInfo.isInit=!0,s.FortuneMouseTable.tabelInfo.bRolling=!1,d.env.curGameData.balance=null===(o=y.self)||void 0===o?void 0:o.balance,d.env.user.userId=null===(n=y.self)||void 0===n?void 0:n.userId,d.env.user.userIds=null===(i=e.self)||void 0===i?void 0:i.userId,s.FortuneMouseTable.tabelInfo.type=null===(r=y.desc)||void 0===r?void 0:r.gameType,s.FortuneMouseTable.tabelInfo.chips=y.chips,s.FortuneMouseTable.tabelInfo.winLevel=y.winLevel,s.FortuneMouseTable.tabelInfo.hits=y.hits,s.FortuneMouseTable.tabelInfo.totalWin=y.totalWin,null===(a=this.controlPanelLogic)||void 0===a||a.setBetOfList(y.betOfList),null===(c=this.controlPanelLogic)||void 0===c||c.init(),this.controlPanelLogic.setBonus(d.env.curGameData.balance),null===(l=this.controlPanelLogic)||void 0===l||l.setBetTimes(y.betTimes);var b=null===(h=this.controlPanelLogic)||void 0===h?void 0:h.initBetNum(y.betSize,y.betMul);d.env.curGameData.betIndex=b,null===(f=this.controlPanelLogic)||void 0===f||f.setCurBetIndex(b),null===(m=this.controlPanelLogic)||void 0===m||m.setBetNum(null===(g=this.controlPanelLogic)||void 0===g?void 0:g.getBetNum()),s.FortuneMouseTable.tabelInfo.bet=null===(v=this.controlPanelLogic)||void 0===v?void 0:v.getBetNum(),cc.systemEvent.emit(u.event.loadGameResOver)}},e.prototype.setTableScreen=function(e){e&&e.length>0?s.FortuneMouseTable.setScreen(e):s.FortuneMouseTable.setFirstScreen()},e.prototype.onBtnClickSpin=function(){var e,t,o,n,i,r;if(p.tcLog.info("onBtnClickSpi..."),this.onStopAutoSpin(),this.checkCanSpin())if(setTimeout(function(){h.uAudio.getInstance().playEffect(S.FortuneMouseDefine.soundNames.click1)},0),p.tcLog.info("checkCanSpin..."),null===(e=this.controlPanelLogic)||void 0===e||e.setWinCount(0),null===(t=this.controlPanelLogic)||void 0===t||t.setBtnSpineStatus(s.FortuneMouseTable.tabelInfo.qucikMode?f.EBtnSpineStatus.UNACTIVE_RUN:f.EBtnSpineStatus.ACTIVE_RUN),s.FortuneMouseTable.tabelInfo.isGetData=!1,s.FortuneMouseTable.tabelInfo.SpecialMode=!1,null===(o=this.view)||void 0===o||o.startRoll(),((null===(n=this.controlPanelLogic)||void 0===n?void 0:n.getBetNum())||0)>d.env.curGameData.balance)cc.systemEvent.emit(u.event.banlanceNoEnough);else{var a=(null===(i=this.controlPanelLogic)||void 0===i?void 0:i.getBetMultiple((null===(r=this.controlPanelLogic)||void 0===r?void 0:r.getBetNum())||0))||null,c={bet_size:0,bet_mul:0,token:_.apiConfig.env.token,game_id:_.apiConfig.env.gameId};null!=a&&(c.bet_mul=a.bet_mul,c.bet_size=a.bet_size),this.retryTimes=0,this.requestSpin(c)}},e.prototype.requestSpin=function(e){var t=this;b.api.mouseSpin(e).then(function(e){t.handlerSpin(e)}).catch(function(o){p.tcLog.error("request spin error",o);var n=o.code;n==M.tcHttp.Code.ErrorAuthentication||(n==M.tcHttp.Code.ErrorRequestMany?t.checkRetryTimes(e):n==M.tcHttp.Code.ErrorServer?t.checkRetryTimes(e):n==M.tcHttp.Code.ErrorNet?t.checkRetryTimes(e):n==M.tcHttp.Code.ErrorTimeout?t.checkRetryTimes(e):n==M.tcHttp.Code.ErrorAbort?t.checkRetryTimes(e):n==M.tcHttp.Code.ErrorTokenLose?cc.systemEvent.emit(u.event.betFail,e):t.checkRetryTimes(e))})},e.prototype.checkRetryTimes=function(e){var t=this;if(this.retryTimes>=this.maxRetryTimes)return this.retryTimes=0,p.tcLog.info("retry times >= "+this.maxRetryTimes),void cc.systemEvent.emit(u.event.betFail,e);this.retryTimes++,this.view.showRetryTip(this.retryTimes);var o=1e3*Math.pow(2,this.retryTimes);setTimeout(function(){t.requestSpin(e)},o),p.tcLog.info("retry "+this.retryTimes+", delay = "+o)},e.prototype.onRebet=function(e){this.retryTimes=0,this.requestSpin(e)},e.prototype.handlerSpin=function(e){var t;p.tcLog.info("data===>>>>",e.sprModeData);var o=a.slot_fortune_mouse.SpinResp.fromObject(e);p.tcLog.info("\u6447\u5956\u56de\u5305",o),this.controlPanelLogic.setBonus(o.balance-o.totalWin),o.balance?d.env.curGameData.balance=o.balance:p.tcLog.info("no have balance--- "+o.balance),s.FortuneMouseTable.tabelInfo.hits=JSON.parse(JSON.stringify(o.hits)),s.FortuneMouseTable.tabelInfo.totalWin=o.totalWin||0,s.FortuneMouseTable.tabelInfo.screenData=o.screen||[],this.setTableScreen(o.screen),s.FortuneMouseTable.tabelInfo.bet=o.bet,s.FortuneMouseTable.tabelInfo.SpecialMode=o.trigger||!1,s.FortuneMouseTable.tabelInfo.sprMode=e.sprModeData||[[]],s.FortuneMouseTable.tabelInfo.sprModeData=[];for(var n=function(e){var t=[[0,0,0],[0,0,0],[0,0,0]];s.FortuneMouseTable.tabelInfo.sprMode[e].forEach(function(e,o){var n=o%3,i=Math.floor(o/3);t[n][i]=e}),s.FortuneMouseTable.tabelInfo.sprModeData[e]=t},i=0;i<s.FortuneMouseTable.tabelInfo.sprMode.length;i++)n(i);var r=this.controlPanelLogic.getSpinNum();r>0&&(r--,this.controlPanelLogic.setSpinNumFun(r,o.totalWin),this.controlPanelLogic.showAutoSpin(),0==r&&this.controlPanelLogic.showBtnSpin()),null===(t=this.view)||void 0===t||t.hanlderSpin()},e.prototype.balanceNotEnoughStopSpin=function(){var e;s.FortuneMouseTable.tabelInfo.hits=[],s.FortuneMouseTable.tabelInfo.totalWin=0,s.FortuneMouseTable.tabelInfo.screenData=[83,81,82,83,81,82,83,81,82],this.setTableScreen(s.FortuneMouseTable.tabelInfo.screenData),s.FortuneMouseTable.tabelInfo.SpecialMode=!1,s.FortuneMouseTable.tabelInfo.sprMode=[],s.FortuneMouseTable.tabelInfo.sprModeData=[];var t=this.controlPanelLogic.getSpinNum();t>0&&(t--,this.controlPanelLogic.setSpinNumFun(t,s.FortuneMouseTable.tabelInfo.totalWin),this.controlPanelLogic.showAutoSpin(),0==t&&this.controlPanelLogic.showBtnSpin()),null===(e=this.view)||void 0===e||e.hanlderSpin(!0)},e.prototype.checkIsAutoStart=function(){p.tcLog.info("AutoStar..."),this.checkCanSpin()&&(p.tcLog.info("--------------getSpinNum",this.controlPanelLogic.getSpinNum()>0),this.controlPanelLogic.getSpinNum()>0&&this.checkBalance()&&(this.onBtnClickSpin(),this.controlPanelLogic.showAutoSpin()))},e.prototype.onrunScors=function(){var e=this;s.FortuneMouseTable.tabelInfo.totalWin>0&&(cc.Tween.stopAllByTarget(this._totalWinRun),cc.Tween.stopAllByTarget(this._balanceRun),this._totalWinRun={runNum:0},cc.tween(this._totalWinRun).to(1,{runNum:s.FortuneMouseTable.tabelInfo.totalWin},{easing:cc.easing.quadOut,progress:function(t,o,n,i){var s=t+(o-t)*i,r=Math.floor(801*Math.random())+100;1!=i&&(s+=r),e.controlPanelLogic.setWinCount(s)}}).start(),this._balanceRun={runNum:d.env.curGameData.balance-s.FortuneMouseTable.tabelInfo.totalWin},cc.tween(this._balanceRun).to(1,{runNum:d.env.curGameData.balance},{easing:cc.easing.quadOut,progress:function(t,o,n,i){var s=t+(o-t)*i,r=Math.floor(801*Math.random())+100;1!=i&&(s+=r),e.controlPanelLogic.setBonus(s)}}).start())},e.prototype.allGameEnd=function(){p.tcLog.info("allGameEn... "),this.allGameEndDelay()},e.prototype.allGameEndDelay=function(){var e=this;p.tcLog.info("allGameEndDelay... "),this.view.showLineAndScore(),s.FortuneMouseTable.tabelInfo.bRolling=!1,s.FortuneMouseTable.tabelInfo.isAniming=!1,this.controlPanelLogic.setBtnSpineStatus(f.EBtnSpineStatus.ACTIVE_NORMAL),0==this.controlPanelLogic.getSpinNum()&&this.controlPanelLogic.showBtnSpin();var t=1;s.FortuneMouseTable.tabelInfo.screenData.forEach(function(e){51==e&&(t=0)}),s.FortuneMouseTable.tabelInfo.hits.length>0&&(t=0),this.timerId=window.setTimeout(function(){e.checkIsAutoStart()},500*t)},e.prototype.handlerGetCellsMatrixConfig=function(e){var t=a.slot_fortune_mouse.GameConfigResp.decode(e),o=JSON.parse(t.config);if(o.PayLines)for(var n in o.PayLines)S.FortuneMouseDefine.PayLines.set(n,o.PayLines[n]);p.tcLog.info("handlerRoomConfig:",o)},e.prototype.bQuickModeReq=function(e){s.FortuneMouseTable.tabelInfo.qucikMode=e,v.RoundTips.status(e)},e.prototype.onClickBtnBet=function(e){y.SpinTips.status(e)},e.prototype.showBalance=function(){this.controlPanelLogic.setBonus(d.env.curGameData.balance),this.controlPanelLogic.setWinCount(s.FortuneMouseTable.tabelInfo.totalWin)},e.prototype.checkBalance=function(){var e,t=(null===(e=this.controlPanelLogic)||void 0===e?void 0:e.getBetNum())||0;return!(d.env.curGameData.balance<t&&(cc.systemEvent.emit(u.event.banlanceNoEnough),1))},e.prototype.bQuickMode=function(){var e;return null===(e=this.controlPanelLogic)||void 0===e?void 0:e.IsQuickModel()},e.prototype.panelLogic=function(){return this.controlPanelLogic},e.prototype.reconnect=function(){i.FortuneMouseSender.reqRoomInfo()},e.prototype.clearAllCache=function(){var e;w.FortuneMouseRes.clearCache(),null===n.FortuneMouseAnimAlert||void 0===n.FortuneMouseAnimAlert||n.FortuneMouseAnimAlert.clear(),null===(e=this.controlPanelLogic)||void 0===e||e.clear()},e.prototype.update=function(){},e.prototype.handler=function(e){if(e.type==l.cmd.SERVER_TYPE_FORTUNE_MOUSE)switch(e.cmdId){case a.slot_fortune_mouse.FortuneMouseCmd.CMD_GAME_GET_TABLE_STATUS_RESP:this.handlerTableInfo(e.body);break;case a.slot_fortune_mouse.FortuneMouseCmd.CMD_GAME_SPIN_RESP:break;case a.slot_fortune_mouse.FortuneMouseCmd.CMD_GAME_GET_CONFIG_RESP:this.handlerGetCellsMatrixConfig(e.body)}},e}();o.FortuneMouseLogic=N,cc._RF.pop()},{"../../../../bundles-v2/update-v2/script/api/api-config":void 0,"../../../../bundles-v2/update-v2/script/api/fortuneMouse-define":void 0,"../../../../bundles-v2/update-v2/script/api/fortuneMouse-res":void 0,"../../../../script/app/api":void 0,"../../../../script/app/env":void 0,"../../../../script/config/cmd":void 0,"../../../../script/config/config":void 0,"../../../../script/event/event":void 0,"../../../../script/framework/audio/audio":void 0,"../../../../script/framework/log/log":void 0,"../../../../script/framework/net/http":void 0,"../../../../script/framework/net/socket":void 0,"../../gameCommon/script/round-tips ":void 0,"../../gameCommon/script/spin-tips":void 0,"../../gameCommonRes/PGGameRes/script/PgEvent":void 0,"../../gameCommonRes/PGGameRes/script/PgGameControlPanelLogic":void 0,"./fortuneMouse-anim":"fortuneMouse-anim","./fortuneMouse-sender":"fortuneMouse-sender","./fortuneMouse-table":"fortuneMouse-table","./fortuneMouse-view":"fortuneMouse-view","./protocol/fortuneMouseProtocol.js":"fortuneMouseProtocol"}],"fortuneMouse-scroll-symbol":[function(e,t,o){"use strict";cc._RF.push(t,"c1ee4w6mU9JJIod7ze2ewZ1","fortuneMouse-scroll-symbol");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),s=this&&this.__decorate||function(e,t,o,n){var i,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(r=(s<3?i(r):s>3?i(t,o,r):i(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../../bundles-v2/update-v2/script/api/fortuneMouse-define"),a=e("../../../../bundles-v2/update-v2/script/api/fortuneMouse-res"),c=e("../../../../script/framework/log/log"),l=cc._decorator,u=l.ccclass,h=l.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spriteNode=null,t.spineNode=null,t}return i(t,e),t.prototype.getId=function(){return this.id},t.prototype.setData=function(e,t){this.id=e,this.isBlur=t,this.spriteNode.active=!1,this.spineNode.active=!1,this.spriteNode.scale=83==e?r.FortuneMouseDefine.Constant.FuSpineScale:51==e?r.FortuneMouseDefine.Constant.WildSpineScale:1,this.spriteNode.active=!0,this.updateIcon()},t.prototype.updateIcon=function(){var e;this.isBlur?(e=a.FortuneMouseRes.getItemIconById(10*this.id))||c.tcLog.warn("setItemSPrite spriteframe not found:"+10*this.id):(e=a.FortuneMouseRes.getItemIconById(this.id))||c.tcLog.warn("setItemSPrite spriteframe not found:"+this.id),e&&(this.spriteNode.getComponent(cc.Sprite).spriteFrame=e,this.spineNode.getComponent(sp.Skeleton).skeletonData=a.FortuneMouseRes.getItemSkeletionData(this.id))},t.prototype.setBlur=function(e){e!=this.isBlur&&(this.isBlur=e,this.updateIcon())},t.prototype.showSpine=function(){var e;if(this.spineNode.active=!0,this.spriteNode.active=!1,83==this.id){var t=null===(e=this.spineNode)||void 0===e?void 0:e.getComponent(sp.Skeleton);t.setAnimation(0,"spawn",!1),t.setCompleteListener(function(){t.setAnimation(0,"idle",!0)})}},t.prototype.showSprite=function(){this.spriteNode.active=!0,this.spineNode.active=!1},s([h(cc.Node)],t.prototype,"spriteNode",void 0),s([h(cc.Node)],t.prototype,"spineNode",void 0),s([u],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../../../../bundles-v2/update-v2/script/api/fortuneMouse-define":void 0,"../../../../bundles-v2/update-v2/script/api/fortuneMouse-res":void 0,"../../../../script/framework/log/log":void 0}],"fortuneMouse-sender":[function(e,t,o){"use strict";cc._RF.push(t,"ae526YZ5R5DOrl7D4ZJ2aVN","fortuneMouse-sender"),Object.defineProperty(o,"__esModule",{value:!0}),o.FortuneMouseSender=void 0;var n=e("../../../../script/config/cmd"),i=e("../../../../script/framework/log/log"),s=e("../../../../script/framework/net/msg"),r=e("../../../../script/framework/net/socket"),a=e("./protocol/fortuneMouseProtocol");(function(e){function t(e,t){var o=new s.Message(n.cmd.SERVER_TYPE_FORTUNE_MOUSE,e,t);r.uNet.getInstance().send(o)}e.reqRoomInfo=function(){t(a.slot_fortune_mouse.FortuneMouseCmd.CMD_GAME_GET_TABLE_STATUS_REQ),i.tcLog.info("send request room info")},e.reqCellMatrixConfig=function(){t(a.slot_fortune_mouse.FortuneMouseCmd.CMD_GAME_GET_CONFIG_REQ),i.tcLog.info("send request room config")},e.sendHeartBeat=function(){t(a.slot_fortune_mouse.FortuneMouseCmd.CMD_GAME_HEARTBEAT)}})(o.FortuneMouseSender||(o.FortuneMouseSender={})),cc._RF.pop()},{"../../../../script/config/cmd":void 0,"../../../../script/framework/log/log":void 0,"../../../../script/framework/net/msg":void 0,"../../../../script/framework/net/socket":void 0,"./protocol/fortuneMouseProtocol":"fortuneMouseProtocol"}],"fortuneMouse-show-msg":[function(e,t,o){"use strict";cc._RF.push(t,"7fcceHnjDRN140JuL//AefW","fortuneMouse-show-msg");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),s=this&&this.__decorate||function(e,t,o,n){var i,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(r=(s<3?i(r):s>3?i(t,o,r):i(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.FortuneMouseShowMsg=void 0;var r=e("../../../../bundles-v2/update-v2/script/api/fortuneMouse-define"),a=e("../../../../script/framework/audio/audio"),c=e("../../../../script/framework/log/log"),l=e("./fortuneMouse-table"),u=cc._decorator,h=u.ccclass,p=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.msgIndex=0,t._TripleRewardCount={runNum:0},t}return i(t,e),t.prototype.onLoad=function(){this.showNodeWinNor=cc.find("mainNode/moveNode/showNodeWinNor",this.node),this.NodeMask=cc.find("mainNode/moveNode/showNodeWinNor/mask",this.node),this.labelNorWinCount=cc.find("mainNode/moveNode/showNodeWinNor/winLayout/labelNorWinCount",this.node),this.showNodeWinSpr=cc.find("mainNode/moveNode/showNodeWinSpr",this.node),this.labelRunCount=cc.find("mainNode/moveNode/showNodeWinSpr/labelRunCount",this.node),this.labelSprWinCount=cc.find("mainNode/moveNode/showNodeWinSpr/winLayout/labelSprWinCount",this.node),this.Lightkuang1Sk=cc.find("mainNode/moveNode/showNodeWinNor/Lightkuang1",this.node),this.Lightkuang2Sk=cc.find("mainNode/moveNode/showNodeWinSpr/Lightkuang2",this.node)},t.prototype.reInitView=function(){this.showMsg()},t.prototype.showMsg=function(e){void 0===e&&(e=!0),c.tcLog.info("showMs...  "+e,this.NodeMask.active),this.NodeMask.active||(this.norNode(),this.NodeMask.active=!0,this.labelNorWinCount.parent.active=!1,this.showMsgLoop(e))},t.prototype.showMsgLoop=function(e){var t=this;void 0===e&&(e=!1);var o=this.NodeMask.getContentSize().width;this.hideAllMsgLab();var n=this.NodeMask.getChildByName(""+this.msgIndex);n.active=!0,e?n.width>o?n.setPosition(new cc.Vec3((n.width-o)/2+15,0,0)):n.setPosition(new cc.Vec3(0,0,0)):n.setPosition(new cc.Vec3((n.width-o)/2+15,0,0));var i=e?1:0;cc.tween(n).delay(i).to(15,{position:cc.v3(-((n.width+o)/2+10),0,0)}).call(function(){t.msgIndex<1?t.msgIndex++:t.msgIndex=0,t.showMsgLoop(!1)}).start()},t.prototype.sprModeMsg=function(){c.tcLog.info("sprModeMs...  "),this.norNode(),this.NodeMask.active=!0,this.labelNorWinCount.parent.active=!1,this.hideAllMsgLab(),this.NodeMask.getChildByName("2").active=!0},t.prototype.initShowRewardMsg=function(e,t){var o=e/t;if(o<=5){var n=l.FortuneMouseTable.format(e,!0);this.norNode(),this.NodeMask.active=!1,this.labelNorWinCount.parent.active=!0,this.labelNorWinCount.getComponent(cc.Label).string=n,cc.Tween.stopAllByTarget(this.labelNorWinCount.parent),l.FortuneMouseTable.moveOpacityIn(this.labelNorWinCount.parent)}else o<=19&&o>=6?(n=l.FortuneMouseTable.format(e,!0),this.norNode(),this.NodeMask.active=!1,this.labelRunCount.active=!1,this.labelSprWinCount.parent.active=!0,this.Lightkuang2Sk.active=!1,this.showNodeWinNor.scale=1,this.showNodeWinNor.active=!1,this.showNodeWinSpr.active=!0,this.labelSprWinCount.getComponent(cc.Label).string=n,cc.Tween.stopAllByTarget(this.labelNorWinCount.parent),l.FortuneMouseTable.moveOpacityIn(this.labelNorWinCount.parent)):(n=l.FortuneMouseTable.format(e,!0),this.norNode(),this.NodeMask.active=!1,this.labelNorWinCount.parent.active=!0,this.labelNorWinCount.getComponent(cc.Label).string=n,cc.Tween.stopAllByTarget(this.labelNorWinCount.parent),l.FortuneMouseTable.moveOpacityIn(this.labelNorWinCount.parent))},t.prototype.showNorRewardMsg=function(e){c.tcLog.info("showNorRewardMs... "+e+" "),a.uAudio.getInstance().playEffect(r.FortuneMouseDefine.soundNames.win);var t=l.FortuneMouseTable.format(e,!0);this.norNode(),this.NodeMask.active=!1,this.labelNorWinCount.parent.active=!0,this.labelNorWinCount.getComponent(cc.Label).string=t,cc.Tween.stopAllByTarget(this.labelNorWinCount.parent),l.FortuneMouseTable.moveOpacityIn(this.labelNorWinCount.parent),cc.tween(this.labelNorWinCount.parent).set({scale:.5}).to(.2,{scale:1.2}).to(.2,{scale:1}).start(),this.Lightkuang1Sk.getComponent(cc.Animation).play()},t.prototype.norNode=function(){var e=this;this.showNodeWinNor.active=!0,this.showNodeWinSpr.active&&cc.tween(this.showNodeWinSpr).set({opacity:255}).to(.3,{opacity:0}).call(function(){e.showNodeWinSpr.active=!1}).start(),this.showNodeWinNor.scale=1,this.labelNorWinCount.getComponent(cc.Label).string="0.00",cc.Tween.stopAllByTarget(this.showNodeWinNor)},t.prototype.TripleRewardMsg=function(e){var t=this;c.tcLog.info("TripleRewardMs...   "+e+" "),this.norNode(),this.labelRunCount.active=!0,this.labelSprWinCount.parent.active=!1,this.showNodeWinNor.scale=1,this.showNodeWinNor.active=!0,this.showNodeWinSpr.active=!0,this.NodeMask.active=!1,cc.tween(this.showNodeWinNor).set({scale:1}).to(.2,{scale:1.1}).start(),cc.tween(this.showNodeWinSpr).delay(.1).set({opacity:0}).to(.4,{opacity:255}).call(function(){t.showNodeWinNor.active=!1,t.showNodeWinSpr.active=!0,t.Lightkuang2Sk.active=!0,t.Lightkuang2Sk.getComponent(cc.Animation).play(),t.scheduleOnce(function(){},.2)}).start(),cc.Tween.stopAllByTarget(this._TripleRewardCount),a.uAudio.getInstance().playEffect(r.FortuneMouseDefine.soundNames.win_run),this._TripleRewardCount={runNum:0},cc.tween(this._TripleRewardCount).to(2,{runNum:e},{progress:function(e,o,n,i){var s=e+(o-e)*i,r=Math.floor(801*Math.random())+100;1!=i&&(s+=r),t.labelRunCount.getComponent(cc.Label).string=l.FortuneMouseTable.format(s,!0)}}).call(function(){c.tcLog.info("TripleRewardMs...  end  "+e+" "),t.labelRunCount.active=!1,t.labelSprWinCount.parent.active=!0,t.Lightkuang2Sk.active=!0,t.Lightkuang2Sk.getComponent(cc.Animation).play(),t.labelSprWinCount.getComponent(cc.Label).string=l.FortuneMouseTable.format(e,!0),cc.systemEvent.emit(r.FortuneMouseDefine.events.runScors),a.uAudio.getInstance().playEffect(r.FortuneMouseDefine.soundNames.win),t.scheduleOnce(function(){l.FortuneMouseTable.tabelInfo.SpecialMode||cc.systemEvent.emit(r.FortuneMouseDefine.events.allGameEnd)},1.5)}).start()},t.prototype.hideAllMsgLab=function(){for(var e=0;e<=2;e++){var t=this.NodeMask.getChildByName(""+e);cc.Tween.stopAllByTarget(t),t.active=!1}},s([h],t)}(cc.Component));o.FortuneMouseShowMsg=p,cc._RF.pop()},{"../../../../bundles-v2/update-v2/script/api/fortuneMouse-define":void 0,"../../../../script/framework/audio/audio":void 0,"../../../../script/framework/log/log":void 0,"./fortuneMouse-table":"fortuneMouse-table"}],"fortuneMouse-start":[function(e,t,o){"use strict";cc._RF.push(t,"8cf61IzQeZAgpd0VNz0l8vP","fortuneMouse-start");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),s=this&&this.__decorate||function(e,t,o,n){var i,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(r=(s<3?i(r):s>3?i(t,o,r):i(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../../script/framework/log/log"),a=e("./fortuneMouse-logic"),c=cc._decorator.ccclass,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isloaded=!1,t}return i(t,e),t.prototype.onLoad=function(){r.tcLog.info("start FortuneMouse Table"),this.node&&(this.isloaded||(this.isloaded=!0,new a.FortuneMouseLogic(this.node)))},s([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{"../../../../script/framework/log/log":void 0,"./fortuneMouse-logic":"fortuneMouse-logic"}],"fortuneMouse-table":[function(e,t,o){"use strict";cc._RF.push(t,"2c5c1xOzNVIXZiUrB5YstAr","fortuneMouse-table"),Object.defineProperty(o,"__esModule",{value:!0}),o.FortuneMouseTable=void 0;var n=e("../../../../script/pkg/currency");(function(e){e.andIds=[2,3,81,82,83],e.itemScore={51:300,83:100,82:50,81:30,3:15,2:5,1:3},e.firstScreen=[[82,81,81],[2,51,82],[3,82,81]],e.PayLines=new Map,e.tabelInfo={roomId:0,type:0,chips:[0],winLevel:[0],musicName:"",isQuickMode:!1,isAniming:!1,bRolling:!1,isInit:!1,isGetData:!1,hits:[],totalWin:0,screenData:[0],screen:[[0]],bet:0,SpecialMode:!1,sprMode:[[]],sprModeData:[[[0]]],sprModeIdx:0,qucikMode:!1},e.setFirstScreen=function(){e.tabelInfo.screen=e.firstScreen},e.setScreen=function(t){var o=[[0,0,0],[0,0,0],[0,0,0]];t.forEach(function(e,t){var n=t%3,i=Math.floor(t/3);o[n][i]=e}),e.tabelInfo.screen=o},e.format=function(e,t){return void 0===t&&(t=!0),n.currency.formats(10*e)},e.getRandomSymbolId=function(){var t=Math.floor(Math.random()*e.andIds.length);return e.andIds[t]},e.moveOpacityIn=function(e,t,o){void 0===o&&(o=255),e&&(e.active=!0,e.opacity=0,cc.tween(e).to(.2,{opacity:o}).call(function(){t&&t()}).start())},e.moveOpacityOut=function(e,t){e&&cc.tween(e).to(.2,{opacity:0}).set({active:!1}).call(function(){t&&t()}).start()}})(o.FortuneMouseTable||(o.FortuneMouseTable={})),cc._RF.pop()},{"../../../../script/pkg/currency":void 0}],"fortuneMouse-view":[function(e,t,o){"use strict";cc._RF.push(t,"b209fOZfA1CsKwFreTFFQ+O","fortuneMouse-view");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),s=this&&this.__decorate||function(e,t,o,n){var i,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(r=(s<3?i(r):s>3?i(t,o,r):i(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,s){function r(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,a)}c((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var o,n,i,s,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(e){return function(t){return c([e,t])}}function c(s){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,n=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){r.label=s[1];break}if(6===s[0]&&r.label<i[1]){r.label=i[1],i=s;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(s);break}i[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(a){s=[6,a],n=0}finally{o=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.FortuneMouseView=void 0;var c=e("./fortuneMouse-cell-item"),l=e("./fortuneMouse-table"),u=e("./fortuneMouse-award-layer"),h=e("../../../../script/framework/log/log"),p=e("../../../../script/framework/audio/audio"),d=(e("../../../../script/event/event"),e("../../../../script/config/config")),f=e("../../../../script/framework/storage/storage"),m=e("./fortuneMouse-show-msg"),g=e("./fortuneMouse-anim"),v=e("./RetryTipDisplay"),y=e("../../../../bundles-v2/update-v2/script/api/fortuneMouse-res"),b=e("../../../../bundles-v2/update-v2/script/api/fortuneMouse-define"),_=e("../../gameCommonRes/PGGameRes/script/PgGameControlPanelLogic"),M=e("../../../../script/app/env"),w=e("./fortuneMouse-scroll-symbol"),S=cc._decorator,N=S.ccclass,I=(S.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nodeCells=[],t.curAniName="",t.normalCount=0,t.wildPos=[[cc.v2(-227,438),cc.v2(-235,211),cc.v2(-215,-16)],[cc.v2(0,411),cc.v2(0,194),cc.v2(0,-38)],[cc.v2(235,419),cc.v2(227,209),cc.v2(247,-18)]],t.wildPosAngle=[[80,70,60],[90,90,90],[100,110,120]],t.scrollToResultTimerList=new Array(3),t.allCellisEnd=!1,t.cellId_1_over=0,t.cellId_2_over=0,t.cellId_0_over=0,t.sendYawnId=0,t.idelCout=0,t.aniStatus=0,t}return i(t,e),t.prototype.onLoad=function(){this.initNode();for(var e=[this.lieLights_1,this.lieLights_2,this.lieLights_3,this.lieLight_2,this.beiGuangLeftNode,this.beiGuangRightNode],t=function(t){var o=e[t];o.getComponent(cc.Animation).on(cc.Animation.EventType.FINISHED,function(){o.active=!1})},o=0;o<e.length;o++)t(o)},t.prototype.initNode=function(){var e,t,o=this;h.tcLog.info("----- initNode -----"),this.nodeBody=cc.find("mainNode/moveNode/body",this.node),this.nodeAnimLayer=cc.find("mainNode/moveNode/anim_layer",this.node),this.NodeSuo=cc.find("mainNode/moveNode",this.node),this.NodeSprBg=cc.find("mainNode/moveNode/sprBg",this.node),this.NodeNorBg=cc.find("mainNode/moveNode/norBg",this.node),this.lieLight_1=cc.find("mainNode/moveNode/lieLight_1",this.node),this.lieLight_2=cc.find("mainNode/moveNode/lieLight_2",this.node),this.lieLight_3=cc.find("mainNode/moveNode/lieLight_3",this.node),this.lieLights_1=cc.find("mainNode/moveNode/lieLights_1",this.node),this.lieLights_2=cc.find("mainNode/moveNode/lieLights_2",this.node),this.lieLights_3=cc.find("mainNode/moveNode/lieLights_3",this.node),this.cellMasksNode=cc.find("mainNode/moveNode/cellMasks",this.node),this.beiGuangLeftNode=cc.find("beiGuang-l",this.nodeAnimLayer),this.beiGuangRightNode=cc.find("beiGuang-r",this.nodeAnimLayer),this.jianHua_1=cc.find("jianHua_1",this.nodeAnimLayer),this.jianHua_2=cc.find("jianHua_2",this.nodeAnimLayer),this.jianHua_3=cc.find("jianHua_3",this.nodeAnimLayer),this.NodeHua_l=cc.find("mainNode/hua_l",this.node),this.Nodehua_r=cc.find("mainNode/hua_r",this.node),this.NodeShu_l=cc.find("mainNode/shu_l",this.node),this.NodeShu_r=cc.find("mainNode/shu_r",this.node),this.NodeYuanbao_l=cc.find("mainNode/yuanbao_l",this.node),this.NodeYuanbao_r=cc.find("mainNode/yuanbao_r",this.node),this.NodeWz5=cc.find("mainNode/wz5",this.node),this.NodeAni=cc.find("mainNode/ani",this.node),this.NodeAniSk=this.NodeAni.getComponent(sp.Skeleton),this.NodeAniTop=cc.find("mainNode/aniTop",this.node),this.NodeAniTopSk=this.NodeAni.getComponent(sp.Skeleton),this.aniOldPost=this.NodeAni.getPosition(),this.NodewildLiZiCon=cc.find("mainNode/wildLiZiCon",this.node),this.NodeXiaoGuang=cc.find("mainNode/xiaoGuang",this.node),this.NodeWildLiZi=cc.find("mainNode/wildLiZi",this.node),this.xiaoguangCon=cc.find("mainNode/xiaoguangCon",this.node),this.NodewildLiZiCon.removeAllChildren(),this.NodeHua_lOldPost=this.NodeHua_l.getPosition(),this.Nodehua_rOldPost=this.Nodehua_r.getPosition(),this.NodeShu_lOldPost=this.NodeShu_l.getPosition(),this.NodeShu_rOldPost=this.NodeShu_r.getPosition(),this.NodeYuanbao_lOldPost=this.NodeYuanbao_l.getPosition(),this.NodeYuanbao_rOldPost=this.NodeYuanbao_r.getPosition(),null===(e=this.nodeBody)||void 0===e||e.children.forEach(function(e,t){e.removeAllChildren(),o.nodeCells[t]=e}),this.showMsgComp=this.addComponent(m.FortuneMouseShowMsg),this.awardLayer=null===(t=this.nodeAnimLayer)||void 0===t?void 0:t.addComponent(u.FortuneMouseAwardLayer),this.awardLayer.setCellMasksNode(this.cellMasksNode),this.respinMask=cc.find("mainNode/moveNode/respinMask",this.node),this.respinParticle=cc.find("mainNode/moveNode/respinParticle",this.node).getComponent(cc.ParticleSystem),this.retryTipDisplay=cc.find("bottom/RetryTip",this.node).getComponent(v.default),this.scrollParticleList=[];for(var n=1;n<=3;n++)this.scrollParticleList.push(cc.find("mainNode/moveNode/ItemParticle"+n,this.node).getComponent(cc.ParticleSystem));"off"===f.tcStorage.readAny(f.tcStorage.Keys.SoundSwitch)?(p.uAudio.getInstance().setEffectVolume(0),p.uAudio.getInstance().setMusicVolume(0)):(p.uAudio.getInstance().setEffectVolume(1),p.uAudio.getInstance().setMusicVolume(1),f.tcStorage.save(f.tcStorage.Keys.SoundSwitch,"on")),this.initEvent()},t.prototype.init=function(e){this.gameLogic=e,this.initCellsItem(),this.reInitView(!0),this.playSkeletion("idle",!0),d.config.devTest&&this.startShowGameView();var t=localStorage.getItem(M.env.user.userIds);this.fxWildLeveNumber=t?parseInt(t,10):0,this.playWildLevel(!1)},t.prototype.coordinateTransformation=function(e){return 0==e?2:1==e?1:2==e?0:-1},t.prototype.initEvent=function(){window.addEventListener("customEventFromHTML",this.startShowGameView.bind(this)),cc.systemEvent.on(b.FortuneMouseDefine.events.MouseCellEndRoll,this.onCellEndRoll,this),cc.systemEvent.on(b.FortuneMouseDefine.events.closeAnimAlert,this.oncloseAnimAlert,this),cc.systemEvent.on(b.FortuneMouseDefine.events.showItemTip,this.onshowItemTip,this),cc.systemEvent.on(b.FortuneMouseDefine.events.showItemAnim,this.onShowTtemAnim,this),cc.systemEvent.on(b.FortuneMouseDefine.events.showItemAnims,this.onShowTtemAnims,this),cc.systemEvent.on(b.FortuneMouseDefine.events.showNodeCells,this.showNodeCells,this)},t.prototype.removeEvent=function(){cc.systemEvent.off(b.FortuneMouseDefine.events.MouseCellEndRoll,this.onCellEndRoll,this),cc.systemEvent.off(b.FortuneMouseDefine.events.closeAnimAlert,this.oncloseAnimAlert,this),cc.systemEvent.off(b.FortuneMouseDefine.events.showItemTip,this.onshowItemTip,this),cc.systemEvent.off(b.FortuneMouseDefine.events.showItemAnim,this.onShowTtemAnim,this),cc.systemEvent.off(b.FortuneMouseDefine.events.showItemAnims,this.onShowTtemAnims,this),cc.systemEvent.off(b.FortuneMouseDefine.events.showNodeCells,this.showNodeCells,this)},t.prototype.initCellsItem=function(){var e=this;h.tcLog.info("initCellsIte...",l.FortuneMouseTable.tabelInfo.screen),this.nodeCells.forEach(function(t,o){for(var n=0;n<1;n++){var i=cc.instantiate(y.FortuneMouseRes.getCellItem());i.setParent(t);var s=i.addComponent(c.FortuneMouseCellItem);null==s||s.init(o,n)}e.awardLayer.setData(o,l.FortuneMouseTable.tabelInfo.screen[o],e.getSymbolList(o))})},t.prototype.getSymbolList=function(e){for(var t=[],o=this.nodeCells[e].children[0].getComponent(c.FortuneMouseCellItem),n=0;n<b.FortuneMouseDefine.Constant.ROW;n++)t.push(o.getItem(b.FortuneMouseDefine.Constant.ROW-1-n));return t},t.prototype.initHist=function(){h.tcLog.info("initHist... "),l.FortuneMouseTable.tabelInfo.hits.length>0?this.awardLayer.showLineAndScores():this.initPlayAllWild()},t.prototype.Idestroy=function(){this.unscheduleAllCallbacks(),this.node.destroy()},t.prototype.reInitNodeCells=function(){var e=this;this.nodeCells.forEach(function(t){return r(e,void 0,void 0,function(){return a(this,function(){return t.children.forEach(function(e){e.active=!0}),[2]})})})},t.prototype.showNodeCells=function(){this.nodeCells.forEach(function(e){for(var t=e.children[0].getComponent(c.FortuneMouseCellItem),o=0;o<=2;o++)t.getItem(o).opacity=255})},t.prototype.onShowTtemAnims=function(e){var t=e.cellId,o=this.coordinateTransformation(e.index);e.hist,this.nodeCells.forEach(function(e,n){t==n&&(e.children[0].getComponent(c.FortuneMouseCellItem).getItem(o).opacity=0)})},t.prototype.onShowTtemAnim=function(){},t.prototype.onSprStartRoll=function(){var e=this;this.lieLights_1.active=!0,this.lieLights_2.active=!0,this.lieLights_3.active=!0,this.lieLights_1.getComponent(cc.Animation).play(),this.lieLights_2.getComponent(cc.Animation).play(),this.lieLights_3.getComponent(cc.Animation).play(),p.uAudio.getInstance().playEffect(b.FortuneMouseDefine.soundNames.bon_reel_rotation,void 0,!1),this.cellId_0_over=0,this.cellId_2_over=0,this.isSkipScroll=!1,this.playSkeletion("top_excite_turnL",!1,function(){e.playSkeletion("top_excite_lookL",!0)}),l.FortuneMouseTable.tabelInfo.sprModeIdx++,this.nodeCells[0].children.forEach(function(e){e.getComponent(c.FortuneMouseCellItem).startRoll(!1)}),this.scheduleOnce(function(){e.nodeCells[2].children.forEach(function(e){e.getComponent(c.FortuneMouseCellItem).startRoll(!1)}),e.scheduleOnce(e.sprModeScrollToResult,1)},b.FortuneMouseDefine.Constant.colStartDelayTime),this.playScrollPaticle()},t.prototype.playSprModeScrollToResultAudio=function(){var e=Math.floor(1+11*Math.random());p.uAudio.getInstance().playEffect("bon_tips"+e)},t.prototype.sprModeScrollToResult=function(){this.nodeCells[0].children[0].getComponent(c.FortuneMouseCellItem).scrollToResult(),this.playSprModeScrollToResultAudio()},t.prototype.reInitView=function(e){void 0===e&&(e=!1),this.unscheduleAllCallbacks(),this.showMsgComp.reInitView(),this.awardLayer.reInitView(),this.reInitNodeCells(),this.NodeSprBg.active=!1,this.NodeNorBg.active=!0,this.NodeWz5.active=!1,this.NodeYuanbao_l.active=!1,this.NodeYuanbao_r.active=!1,this.NodeAniTop.active=!1,this.beiGuangLeftNode.active=!1,this.beiGuangRightNode.active=!1,this.jianHua_1.active=!1,this.jianHua_2.active=!1,this.jianHua_3.active=!1,this.NodewildLiZiCon.active=!1,this.NodeWildLiZi.active=!1,this.allCellisEnd=!1},t.prototype.playScrollPaticle=function(){this.scrollParticleList.forEach(function(e){return e.resetSystem()})},t.prototype.startRoll=function(){var e=this;if(this.showNodeCells(),this.reInitView(l.FortuneMouseTable.tabelInfo.hits.length>0),clearInterval(this.sendYawnId),clearTimeout(this.sendYawnId),this.cellId_0_over=0,this.cellId_1_over=0,this.cellId_2_over=0,this.NodeAni.setPosition(this.aniOldPost),l.FortuneMouseTable.tabelInfo.bRolling=!0,l.FortuneMouseTable.tabelInfo.isAniming=!0,this.isSkipScroll=!1,this.isTrySprMode=!1,p.uAudio.getInstance().stopAllEffect(),p.uAudio.getInstance().playEffect(b.FortuneMouseDefine.soundNames.reel_rotation,void 0,!0),this.lieLights_1.active=!0,this.lieLights_2.active=!0,this.lieLights_3.active=!0,this.lieLights_1.getComponent(cc.Animation).play(),this.lieLights_2.getComponent(cc.Animation).play(),this.lieLights_3.getComponent(cc.Animation).play(),this.quickMode=l.FortuneMouseTable.tabelInfo.qucikMode,this.quickMode)this.nodeCells.forEach(function(t){return r(e,void 0,void 0,function(){var e=this;return a(this,function(){return t.children.forEach(function(t){var o=t.getComponent(c.FortuneMouseCellItem);null==o||o.startRoll(e.quickMode)}),[2]})})}),this.schedule(this.checkIsGetData,0,cc.macro.REPEAT_FOREVER,b.FortuneMouseDefine.Constant.state1Time+.2);else{for(var t=function(t){var n=o.nodeCells[t],i=t;null==n||n.children.forEach(function(t){var o=t.getComponent(c.FortuneMouseCellItem);e.scheduleOnce(function(){null==o||o.startRoll(e.quickMode)},b.FortuneMouseDefine.Constant.colStartDelayTime*i)})},o=this,n=0;n<this.nodeCells.length;++n)t(n);this.schedule(this.checkIsGetData,0,cc.macro.REPEAT_FOREVER,b.FortuneMouseDefine.Constant.colStartDelayTime*(this.nodeCells.length-1)+.3)}this.playScrollPaticle()},t.prototype.scrollCellItemToResult=function(e,t){var o=this.scrollToResultTimerList[t];o&&(this.scrollToResultTimerList[t]=null,this.unschedule(o)),null==e||e.scrollToResult()},t.prototype.showResultImmediately=function(){for(var e=0;e<this.scrollToResultTimerList.length;e++){var t=this.scrollToResultTimerList[e];t&&(this.unschedule(t),this.scrollToResultTimerList[e]=null)}var o;0==this.cellId_0_over&&this.nodeCells[0].children[0].getComponent(c.FortuneMouseCellItem).skipScroll(),l.FortuneMouseTable.tabelInfo.SpecialMode||0!=this.cellId_1_over||this.nodeCells[1].children[0].getComponent(c.FortuneMouseCellItem).skipScroll(),0==this.cellId_2_over&&this.nodeCells[2].children[0].getComponent(c.FortuneMouseCellItem).skipScroll(),o=l.FortuneMouseTable.tabelInfo.SpecialMode?b.FortuneMouseDefine.soundNames.bon_scroll_stop2:b.FortuneMouseDefine.soundNames.scroll_stop,p.uAudio.getInstance().playEffect(o),p.uAudio.getInstance().stopEffect(b.FortuneMouseDefine.soundNames.reel_rotation),p.uAudio.getInstance().stopEffect(b.FortuneMouseDefine.soundNames.bon_reel_rotation)},t.prototype.normalScrollToResult=function(){var e=this;this.nodeCells.forEach(function(t,o){return r(e,void 0,void 0,function(){var e=this;return a(this,function(){return t.children.forEach(function(t){var n=t.getComponent(c.FortuneMouseCellItem),i=e.scrollCellItemToResult.bind(e,n,o);e.scrollToResultTimerList[o]=i,e.scheduleOnce(i,b.FortuneMouseDefine.Constant.colStopDelayTime*o)}),[2]})})})},t.prototype.scrollToResult=function(){l.FortuneMouseTable.tabelInfo.SpecialMode?this.sprModeScrollToResult():this.quickMode?this.showResultImmediately():this.normalScrollToResult()},t.prototype.checkIsSkipScroll=function(){this.isSkipScroll&&(this.unschedule(this.checkIsSkipScroll),this.showResultImmediately())},t.prototype.checkIsGetData=function(){l.FortuneMouseTable.tabelInfo.isGetData&&(this.unschedule(this.checkIsGetData),this.isSkipScroll?this.showResultImmediately():(this.scrollToResult(),this.schedule(this.checkIsSkipScroll,0,cc.macro.REPEAT_FOREVER)))},t.prototype.skipScroll=function(){this.isSkipScroll=!0},t.prototype.hanlderSpin=function(e){if(void 0===e&&(e=!1),h.tcLog.info("\u56de\u5305",l.FortuneMouseTable.tabelInfo.SpecialMode),l.FortuneMouseTable.tabelInfo.isGetData=!0,l.FortuneMouseTable.tabelInfo.SpecialMode)this.trySprMode();else{this.normalCount++;var t=30+Math.floor(3*Math.random());this.normalCount>t&&!e&&(this.normalCount=this.normalCount-t+Math.floor(4*Math.random()),this.trySprMode())}},t.prototype.onCellEndRoll=function(e){var t=this;h.tcLog.info("onOnCellEndRol... "+e),0==e&&(this.cellId_0_over++,(!l.FortuneMouseTable.tabelInfo.SpecialMode||l.FortuneMouseTable.tabelInfo.sprModeIdx>=l.FortuneMouseTable.tabelInfo.sprModeData.length)&&(this.awardLayer.setData(e,l.FortuneMouseTable.tabelInfo.screen[e],this.getSymbolList(e)),this.playWild(e,l.FortuneMouseTable.tabelInfo.screen[e])),l.FortuneMouseTable.tabelInfo.SpecialMode&&(this.playSkeletion("top_excite_turnR",!1,function(){t.playSkeletion("top_excite_lookR",!0)}),this.isSkipScroll||this.scheduleOnce(function(){t.nodeCells[2].children[0].getComponent(c.FortuneMouseCellItem).scrollToResult(),t.playSprModeScrollToResultAudio()},1))),1==e&&(this.cellId_1_over++,l.FortuneMouseTable.tabelInfo.SpecialMode||(this.awardLayer.setData(e,l.FortuneMouseTable.tabelInfo.screen[e],this.getSymbolList(e)),this.playWild(e,l.FortuneMouseTable.tabelInfo.screen[e]))),2==e&&(this.cellId_2_over++,(!l.FortuneMouseTable.tabelInfo.SpecialMode||l.FortuneMouseTable.tabelInfo.sprModeIdx>=l.FortuneMouseTable.tabelInfo.sprModeData.length)&&(this.awardLayer.setData(e,l.FortuneMouseTable.tabelInfo.screen[e],this.getSymbolList(e)),this.playWild(e,l.FortuneMouseTable.tabelInfo.screen[e]))),1==this.cellId_0_over&&1==this.cellId_1_over&&1==this.cellId_2_over&&(this.unschedule(this.checkIsSkipScroll),this.gameLogic.controlPanelLogic.setBtnSpineStatus(l.FortuneMouseTable.tabelInfo.hits.length>0?_.EBtnSpineStatus.UNACTIVE_NORMAL:_.EBtnSpineStatus.ACTIVE_STOP),l.FortuneMouseTable.tabelInfo.SpecialMode&&l.FortuneMouseTable.tabelInfo.sprModeIdx<l.FortuneMouseTable.tabelInfo.sprModeData.length?this.scheduleOnce(this.onSprStartRoll,.2):this.isTrySprMode||this.allCellEnd())},t.prototype.allCellEnd=function(){this.allCellisEnd||(h.tcLog.info("allCellEn... "),this.allCellisEnd=!0,l.FortuneMouseTable.tabelInfo.SpecialMode?this.showAllLineNoScore():this.playAllWild())},t.prototype.playWild=function(e){var t=this;l.FortuneMouseTable.tabelInfo.screen[e].forEach(function(o,n){83==o&&(h.tcLog.info("nodeCell===>>>>>",t.nodeCells),t.nodeCells.forEach(function(o,i){var s;e==i&&(null===(s=o.children[0].getComponent(c.FortuneMouseCellItem).getItem(t.coordinateTransformation(n)))||void 0===s||s.getComponent(w.default).showSpine())}))})},t.prototype.initPlayAllWild=function(){var e=this;l.FortuneMouseTable.tabelInfo.screen.forEach(function(t,o){t.forEach(function(t,n){51!=t&&83!=t||(e.awardLayer.playWildOne(o,n),e.nodeCells.forEach(function(t,i){o==i&&(t.children[0].getComponent(c.FortuneMouseCellItem).getItem(e.coordinateTransformation(n)).opacity=0)}))})})},t.prototype.playAllWild=function(){var e=this;this.NodewildLiZiCon.active=!0,this.NodewildLiZiCon.removeAllChildren(),this.xiaoguangCon.active=!0,this.xiaoguangCon.removeAllChildren();var t=l.FortuneMouseTable.tabelInfo.screen,o=0,n=!1;t.forEach(function(t,i){t.forEach(function(t,s){if(51==t){e.fxWildLeveNumber=e.fxWildLeveNumber+1,localStorage.setItem(M.env.user.userIds,e.fxWildLeveNumber.toString()),n=!0,h.tcLog.info("---playAllWil..-  screen  cellindex:"+i+"  index "+s+" ");var r=cc.v2(e.nodeBody.x-259+259*i,e.nodeBody.y+220-220*s);e.scheduleOnce(function(){e.playWildOne(r,i,s)},0*o),e.scheduleOnce(function(){},0*o+1),o++}})}),n&&p.uAudio.getInstance().playEffect(b.FortuneMouseDefine.soundNames.wild_show1),0!=o?(this.scheduleOnce(function(){Math.random()<.5?p.uAudio.getInstance().playEffect(b.FortuneMouseDefine.soundNames.wild_tips3):p.uAudio.getInstance().playEffect(b.FortuneMouseDefine.soundNames.wild_tips4)},.4),this.scheduleOnce(function(){e.playWildLevel(!0),e.playSkeletion("wild",!1,function(){e.showAllLineNoScore(),e.playSkeletion("idle",!0)})},.4)):this.showAllLineNoScore()},t.prototype.playWildLevel=function(e){if(this.fxWildLeveNumber>=12&&this.fxWildLeveNumber<24){if(this.NodeAniSk.setAnimation(2,"fx_level1",!0),!e)return;this.NodeAniSk.setAnimation(1,"fx_wild_level1",!1)}else if(this.fxWildLeveNumber>=24&&this.fxWildLeveNumber<36){if(this.NodeAniSk.setAnimation(2,"fx_level2",!0),!e)return;this.NodeAniSk.setAnimation(1,"fx_wild_level2",!1)}else if(this.fxWildLeveNumber>=36){if(this.NodeAniSk.setAnimation(2,"fx_level3",!0),!e)return;this.NodeAniSk.setAnimation(1,"fx_wild_level3",!1)}else{if(!e)return;this.NodeAniSk.setAnimation(1,"fx_wild",!1)}},t.prototype.playWildOne=function(e,t,o){var n=this,i=cc.instantiate(this.NodeXiaoGuang);i.parent=this.xiaoguangCon,i.setPosition(this.wildPos[t][o]),i.rotation=this.wildPosAngle[t][o],i.active=!0,i.getComponent(cc.Animation).play();var s=.2;l.FortuneMouseTable.tabelInfo.qucikMode&&(s=0),cc.tween(i).call(function(){p.uAudio.getInstance().playEffect(b.FortuneMouseDefine.soundNames.wild_show),n.nodeCells.forEach(function(e,i){i==t&&(e.children[0].getComponent(c.FortuneMouseCellItem).getItem(n.coordinateTransformation(o)).opacity=0)}),n.awardLayer.playWildOne(t,o)}).to(.2+s,{position:cc.v3(this.aniOldPost)}).call(function(){p.uAudio.getInstance().stopEffect(b.FortuneMouseDefine.soundNames.wild_hit),null==i||i.destroy()}).start()},t.prototype.showAllLineNoScore=function(){var e=this;if(l.FortuneMouseTable.tabelInfo.SpecialMode&&(p.uAudio.getInstance().playEffect(b.FortuneMouseDefine.soundNames.bon_tips4),this.playSkeletion("top_winoverlay",!1,function(){e.playSkeletion("top_idle3",!0)})),0!=l.FortuneMouseTable.tabelInfo.totalWin){var t=l.FortuneMouseTable.tabelInfo.totalWin/l.FortuneMouseTable.tabelInfo.bet;t<=2?Math.random()<.5?p.uAudio.getInstance().playEffect(b.FortuneMouseDefine.soundNames.win_tips1):p.uAudio.getInstance().playEffect(b.FortuneMouseDefine.soundNames.win_tips2):t<=4&&p.uAudio.getInstance().playEffect(b.FortuneMouseDefine.soundNames.win_tips3),this.awardLayer.showAllLineNoScore(),this.scheduleOnce(function(){e.showReward()},0)}else cc.systemEvent.emit(b.FortuneMouseDefine.events.allGameEnd)},t.prototype.showReward=function(){var e=this,t=l.FortuneMouseTable.tabelInfo.totalWin/l.FortuneMouseTable.tabelInfo.bet;return t<=5?(l.FortuneMouseTable.tabelInfo.SpecialMode||this.playSkeletion("small_win",!1,function(){e.playSkeletion("idle",!0)}),cc.systemEvent.emit(b.FortuneMouseDefine.events.runScors),this.showMsgComp.showNorRewardMsg(l.FortuneMouseTable.tabelInfo.totalWin),void this.scheduleOnce(function(){l.FortuneMouseTable.tabelInfo.SpecialMode?e.sprModeOutDelays():cc.systemEvent.emit(b.FortuneMouseDefine.events.allGameEnd)},1.5)):t<=19?(this.showMsgComp.TripleRewardMsg(l.FortuneMouseTable.tabelInfo.totalWin),void(l.FortuneMouseTable.tabelInfo.SpecialMode?this.sprModeOutDelays():(p.uAudio.getInstance().playEffect(b.FortuneMouseDefine.soundNames.win_tips2),this.playSkeletion("medium_win",!1,function(){e.playSkeletion("idle",!0)})))):void this.bigAnimAlert()},t.prototype.bigAnimAlert=function(){return r(this,void 0,void 0,function(){var e;return a(this,function(t){switch(t.label){case 0:return[4,g.FortuneMouseAnimAlert.init()];case 1:return null==(e=t.sent())||e.show(),[2]}})})},t.prototype.oncloseAnimAlert=function(){l.FortuneMouseTable.tabelInfo.SpecialMode?this.sprModeOut():(cc.systemEvent.emit(b.FortuneMouseDefine.events.runScors),this.showMsgComp.showNorRewardMsg(l.FortuneMouseTable.tabelInfo.totalWin),this.scheduleOnce(function(){cc.systemEvent.emit(b.FortuneMouseDefine.events.allGameEnd)},1.5))},t.prototype.showLineAndScore=function(){h.tcLog.info("showLineAndScor... "),l.FortuneMouseTable.tabelInfo.hits.length>0&&this.awardLayer.showLineAndScore(),this.loopYawn()},t.prototype.playYawn=function(){var e=this;if(this.NodeAni.getPosition()==this.aniOldPost&&!l.FortuneMouseTable.tabelInfo.SpecialMode){var t="bon_tips"+(1+Math.floor(11*Math.random()));p.uAudio.getInstance().playEffect(b.FortuneMouseDefine.soundNames[t]),Math.random()>.5?this.playSkeletion("idle2",!1,function(){e.playSkeletion("idle",!0)}):this.playSkeletion("idle4",!1,function(){e.playSkeletion("idle",!0)})}},t.prototype.loopYawn=function(){var e=this;clearInterval(this.sendYawnId),clearTimeout(this.sendYawnId),this.sendYawnId=window.setTimeout(function(){e.playYawn(),e.sendYawnId=window.setInterval(function(){e.playYawn()},5e3)},1e4)},t.prototype.sprModeOut=function(){var e=this;this.scheduleOnce(function(){e.sprModeOutDelay()},1)},t.prototype.sprModeOutDelays=function(){var e=this;p.uAudio.getInstance().playEffect(b.FortuneMouseDefine.soundNames.top_exit),this.playSkeletion("top_exit",!1,function(){e.changeMusic(b.FortuneMouseDefine.soundNames.bg_music),cc.Tween.stopAllByTarget(e.NodeSuo),cc.tween(e.NodeSuo).to(1,{scale:1,position:cc.v3(0,0,0)}).call(function(){cc.tween(e.NodeWz5).to(.2,{opacity:0}).set({active:!1}).start(),cc.tween(e.NodeHua_l).to(.4,{position:cc.v3(e.NodeHua_lOldPost)}).start(),cc.tween(e.Nodehua_r).to(.4,{position:cc.v3(e.Nodehua_rOldPost)}).start(),cc.tween(e.NodeShu_l).to(.4,{position:cc.v3(e.NodeShu_lOldPost)}).start(),cc.tween(e.NodeShu_r).to(.4,{position:cc.v3(e.NodeShu_rOldPost)}).start(),cc.tween(e.NodeYuanbao_l).to(.4,{position:cc.v3(e.NodeYuanbao_lOldPost)}).start(),cc.tween(e.NodeYuanbao_r).to(.4,{position:cc.v3(e.NodeYuanbao_rOldPost)}).start(),p.uAudio.getInstance().playEffect(b.FortuneMouseDefine.soundNames.bon_tips10),e.NodeAni.setPosition(cc.v3(e.aniOldPost)),e.playSkeletion("enter",!1,function(){e.playSkeletion("idle",!0),cc.systemEvent.emit(b.FortuneMouseDefine.events.allGameEnd)})}).start()})},t.prototype.sprModeOutDelay=function(){var e=this;cc.systemEvent.emit(b.FortuneMouseDefine.events.runScors),this.showMsgComp.showNorRewardMsg(l.FortuneMouseTable.tabelInfo.totalWin),p.uAudio.getInstance().playEffect(b.FortuneMouseDefine.soundNames.top_exit),this.playSkeletion("top_exit",!1,function(){cc.Tween.stopAllByTarget(e.NodeSuo),cc.tween(e.NodeSuo).to(1,{scale:1,position:cc.v3(0,0,0)}).call(function(){cc.tween(e.NodeWz5).to(.2,{opacity:0}).set({active:!1}).start(),cc.tween(e.NodeHua_l).to(.4,{position:cc.v3(e.NodeHua_lOldPost)}).start(),cc.tween(e.Nodehua_r).to(.4,{position:cc.v3(e.Nodehua_rOldPost)}).start(),cc.tween(e.NodeShu_l).to(.4,{position:cc.v3(e.NodeShu_lOldPost)}).start(),cc.tween(e.NodeShu_r).to(.4,{position:cc.v3(e.NodeShu_rOldPost)}).start(),cc.tween(e.NodeYuanbao_l).to(.4,{position:cc.v3(e.NodeYuanbao_lOldPost)}).start(),cc.tween(e.NodeYuanbao_r).to(.4,{position:cc.v3(e.NodeYuanbao_rOldPost)}).start(),e.NodeAni.setPosition(cc.v3(e.aniOldPost)),p.uAudio.getInstance().playEffect(b.FortuneMouseDefine.soundNames.bon_tips10),e.playSkeletion("enter",!1,function(){e.playSkeletion("idle",!0),cc.systemEvent.emit(b.FortuneMouseDefine.events.allGameEnd)})}).start()})},t.prototype.playTrySprModeRoleAudio=function(){var e=b.FortuneMouseDefine.soundNames,t=[e.wish_tips1,e.wish_tips2,e.wish_tips3,e.wish_tips4,e.wish_tips5,e.wish_tips6],o=Math.floor(Math.random()*t.length);p.uAudio.getInstance().playEffect(t[o])},t.prototype.trySprMode=function(){var e=this;h.tcLog.info("+++++ trySprMode  "+this.NodeSuo.y),this.isTrySprMode=!0,this.unschedule(this.checkIsGetData),this.NodeAniSk.setAnimation(1,"zoom_idle",!0),this.playSkeletion("fx_zoom_start",!1,function(){e.playSkeletion("fx_zoom_idle",!0)}),p.uAudio.getInstance().playEffect(b.FortuneMouseDefine.soundNames.wish,void 0,!1),this.playTrySprModeRoleAudio(),this.normalCount=0,cc.tween(this.NodeHua_l).to(1.2,{position:cc.v3(-541,792,0)}).start(),cc.tween(this.Nodehua_r).to(1.2,{position:cc.v3(555,814,0)}).start(),cc.tween(this.NodeShu_l).to(1.2,{position:cc.v3(-362,-412,0)}).start(),cc.tween(this.NodeShu_r).to(1.2,{position:cc.v3(352,-430,0)}).start(),cc.tween(this.NodeYuanbao_l).set({active:!0}).to(1.2,{position:cc.v3(-240,-358,0)}).start(),cc.tween(this.NodeYuanbao_r).set({active:!0}).to(1.2,{position:cc.v3(255,-377,0)}).start(),cc.Tween.stopAllByTarget(this.NodeSuo);var t=l.FortuneMouseTable.tabelInfo.SpecialMode?.85:.95,o=l.FortuneMouseTable.tabelInfo.SpecialMode?0:.3,n=l.FortuneMouseTable.tabelInfo.SpecialMode?-115:-50;cc.tween(this.NodeSuo).to(.9,{scale:t,position:cc.v3(0,n,0)}).delay(o).call(function(){l.FortuneMouseTable.tabelInfo.isGetData&&l.FortuneMouseTable.tabelInfo.SpecialMode?(e.changeMusic(b.FortuneMouseDefine.soundNames.bon_muisc),e.isTrySprMode=!1,e.sprMode(),e.NodeAniSk.clearTrack(2),e.fxWildLeveNumber=0,localStorage.setItem(M.env.user.userIds,"0")):(e.checkIsGetData(),e.NodeAniSk.setAnimation(1,"idle",!0),cc.tween(e.NodeSuo).call(function(){h.tcLog.info("+++++ back start  "+e.NodeSuo.y),cc.Tween.stopAllByTarget(e.NodeHua_l),cc.Tween.stopAllByTarget(e.Nodehua_r),cc.Tween.stopAllByTarget(e.NodeShu_l),cc.Tween.stopAllByTarget(e.NodeShu_r),cc.Tween.stopAllByTarget(e.NodeYuanbao_l),cc.Tween.stopAllByTarget(e.NodeYuanbao_r),cc.tween(e.NodeHua_l).to(1.5,{position:cc.v3(e.NodeHua_lOldPost)}).start(),cc.tween(e.Nodehua_r).to(1.5,{position:cc.v3(e.Nodehua_rOldPost)}).start(),cc.tween(e.NodeShu_l).to(1.5,{position:cc.v3(e.NodeShu_lOldPost)}).start(),cc.tween(e.NodeShu_r).to(1.5,{position:cc.v3(e.NodeShu_rOldPost)}).start(),cc.tween(e.NodeYuanbao_l).to(1.5,{position:cc.v3(e.NodeYuanbao_lOldPost)}).start(),cc.tween(e.NodeYuanbao_r).to(1.5,{position:cc.v3(e.NodeYuanbao_rOldPost)}).start()}).to(.8,{scale:1,position:cc.v3(0,0,0)}).call(function(){e.NodeSuo.setPosition(cc.v3(0,0,0)),h.tcLog.info("----back over  "+e.NodeSuo.y),p.uAudio.getInstance().stopEffect(b.FortuneMouseDefine.soundNames.bon_reel_rotation),h.tcLog.info("\u5c1d\u8bd5\u7279\u6b8a\u6a21\u5f0f===>>>>>  \u505c\u6b62\u64ad\u653e\u97f3\u6548"),e.playSkeletion("fx_wild",!1,function(){e.isTrySprMode=!1,e.playSkeletion("idle",!0),1==e.cellId_0_over&&1==e.cellId_1_over&&1==e.cellId_2_over&&e.allCellEnd()})}).start())}).start()},t.prototype.sprMode=function(){var e=this;this.showMsgComp.sprModeMsg(),p.uAudio.getInstance().playEffect(b.FortuneMouseDefine.soundNames.bon_wish_tips),this.NodeAniSk.clearTrack(1),this.playSkeletion("exit",!1,function(){p.uAudio.getInstance().stopEffect(b.FortuneMouseDefine.soundNames.reel_rotation),p.uAudio.getInstance().playEffect(b.FortuneMouseDefine.soundNames.bon_reel_rotation),e.NodeAni.setPosition(e.NodeAniTop.getPosition()),e.NodeAni.active=!0,e.playSkeletion("top_enter",!1,function(){e.playSkeletion("top_idle",!0),e.sheMiddleCell(),cc.tween(e.respinMask).to(.15,{opacity:0}).call(function(){return e.respinMask.active=!1}).start(),e.playSkeletion("top_excite_start",!1,function(){e.playSkeletion("top_excite_lookL",!0)}),l.FortuneMouseTable.tabelInfo.sprModeIdx=0,e.scheduleOnce(e.checkIsGetData,.5)}),e.scheduleOnce(function(){e.NodeNorBg.active=!1,e.NodeSprBg.active=!0},.3)}),this.scheduleOnce(function(){e.respinMask.active=!0,e.respinMask.opacity=0,cc.tween(e.respinMask).to(.15,{opacity:150}).start(),e.awardLayer.setSprMove(1),e.respinParticle.resetSystem(),e.lieLight_2.active=!0,e.lieLight_2.getComponent(cc.Animation).play(),e.NodeWz5.active=!0,e.NodeWz5.scale=.5,e.NodeWz5.opacity=255,cc.tween(e.NodeWz5).to(.067,{scale:1.05}).to(.068,{scale:.8}).to(.065,{scale:.85}).start(),e.scheduleOnce(function(){e.beiGuangLeftNode.active=!0,e.beiGuangRightNode.active=!0;var t=e.beiGuangLeftNode.getComponent(cc.Animation),o=e.beiGuangRightNode.getComponent(cc.Animation);t.sample(t.defaultClip.name),o.sample(o.defaultClip.name),t.play(),o.play()},.1)},1.05)},t.prototype.sheMiddleCell=function(){var e;null===(e=this.nodeCells[1])||void 0===e||e.children.forEach(function(e){e.getComponent(c.FortuneMouseCellItem).skipScroll()})},t.prototype.changeLook=function(){},t.prototype.lateUpdate=function(){},t.prototype.playSkeletion=function(e,t,o){var n=this;void 0===t&&(t=!1),h.tcLog.info("~~ play Skeletion",e),this.NodeAniSk&&(this.curAniName=e,this.aniStatus=0,this.idelCout=0,this.NodeAniSk.setAnimation(0,e,t),this.NodeAniSk.setCompleteListener(function(e){if(0==e.trackIndex&&(n.aniStatus=1,o&&o(),"idle"==n.curAniName))if(n.idelCout>=15){n.idelCout=0;var t=Math.floor(3*Math.random());0==t?n.playSkeletion("idle2",!1,function(){n.playSkeletion("idle",!0)}):1==t?n.playSkeletion("idle3",!1,function(){n.playSkeletion("idle",!0)}):n.playSkeletion("idle4",!1,function(){n.playSkeletion("idle",!0)})}else n.idelCout++}))},t.prototype.onshowItemTip=function(e){var t;null===(t=this.awardLayer)||void 0===t||t.showItemTip(e.cellId,this.coordinateTransformation(e.itemIndex),e.symbol)},t.prototype.changeMusic=function(e){h.tcLog.info("change music: "+e),l.FortuneMouseTable.tabelInfo.musicName!=e&&(p.uAudio.getInstance().playMusic(e),l.FortuneMouseTable.tabelInfo.musicName=e)},t.prototype.startShowGameView=function(){this.changeMusic(b.FortuneMouseDefine.soundNames.bg_music),0==l.FortuneMouseTable.tabelInfo.totalWin||this.showMsgComp.initShowRewardMsg(l.FortuneMouseTable.tabelInfo.totalWin,l.FortuneMouseTable.tabelInfo.bet),this.loopYawn(),this.initHist()},t.prototype.getControlPanelNode=function(){return cc.find("bottom/gameControlPanel",this.node)},t.prototype.showRetryTip=function(e){this.retryTipDisplay.show(e)},s([N],t)}(cc.Component));o.FortuneMouseView=I,cc._RF.pop()},{"../../../../bundles-v2/update-v2/script/api/fortuneMouse-define":void 0,"../../../../bundles-v2/update-v2/script/api/fortuneMouse-res":void 0,"../../../../script/app/env":void 0,"../../../../script/config/config":void 0,"../../../../script/event/event":void 0,"../../../../script/framework/audio/audio":void 0,"../../../../script/framework/log/log":void 0,"../../../../script/framework/storage/storage":void 0,"../../gameCommonRes/PGGameRes/script/PgGameControlPanelLogic":void 0,"./RetryTipDisplay":"RetryTipDisplay","./fortuneMouse-anim":"fortuneMouse-anim","./fortuneMouse-award-layer":"fortuneMouse-award-layer","./fortuneMouse-cell-item":"fortuneMouse-cell-item","./fortuneMouse-scroll-symbol":"fortuneMouse-scroll-symbol","./fortuneMouse-show-msg":"fortuneMouse-show-msg","./fortuneMouse-table":"fortuneMouse-table"}],fortuneMouseProtocol:[function(e,t){"use strict";cc._RF.push(t,"51ac6T1OtpNnaBxKzgKl/iz","fortuneMouseProtocol");var o,n,i,s=protobuf,r=s.Reader,a=s.Writer,c=s.util,l=s.roots.default||(s.roots.default={});l.slot_fortune_mouse=((i={}).FortuneMouseCmd=(o={},(n=Object.create(o))[o[0]="CMD_INVALID"]=0,n[o[1]="CMD_GAME_ENTER_REQ"]=1,n[o[2]="CMD_GAME_ENTER_RESP"]=2,n[o[3]="CMD_GAME_GET_TABLE_STATUS_REQ"]=3,n[o[4]="CMD_GAME_GET_TABLE_STATUS_RESP"]=4,n[o[7]="CMD_GAME_SPIN_REQ"]=7,n[o[8]="CMD_GAME_SPIN_RESP"]=8,n[o[9]="CMD_GAME_LEAVE_REQ"]=9,n[o[10]="CMD_GAME_LEAVE_RESP"]=10,n[o[11]="CMD_GAME_SYNC_BALANCE_NOTICE"]=11,n[o[12]="CMD_GAME_ERROR_NOTICE"]=12,n[o[13]="CMD_GAME_GET_CONFIG_REQ"]=13,n[o[14]="CMD_GAME_GET_CONFIG_RESP"]=14,n[o[15]="CMD_GAME_HEARTBEAT"]=15,n),i.User=function(){function e(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.userId=0,e.prototype.balance=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.nickname="",e.prototype.avatar="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.userId&&Object.hasOwnProperty.call(e,"userId")&&t.uint32(8).uint32(e.userId),null!=e.balance&&Object.hasOwnProperty.call(e,"balance")&&t.uint32(16).int64(e.balance),null!=e.nickname&&Object.hasOwnProperty.call(e,"nickname")&&t.uint32(26).string(e.nickname),null!=e.avatar&&Object.hasOwnProperty.call(e,"avatar")&&t.uint32(34).string(e.avatar),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var o=void 0===t?e.len:e.pos+t,n=new l.slot_fortune_mouse.User;e.pos<o;){var i=e.uint32();switch(i>>>3){case 1:n.userId=e.uint32();break;case 2:n.balance=e.int64();break;case 3:n.nickname=e.string();break;case 4:n.avatar=e.string();break;default:e.skipType(7&i)}}return n},e.decodeDelimited=function(e){return e instanceof r||(e=new r(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.userId&&e.hasOwnProperty("userId")&&!c.isInteger(e.userId)?"userId: integer expected":null!=e.balance&&e.hasOwnProperty("balance")&&!(c.isInteger(e.balance)||e.balance&&c.isInteger(e.balance.low)&&c.isInteger(e.balance.high))?"balance: integer|Long expected":null!=e.nickname&&e.hasOwnProperty("nickname")&&!c.isString(e.nickname)?"nickname: string expected":null!=e.avatar&&e.hasOwnProperty("avatar")&&!c.isString(e.avatar)?"avatar: string expected":null},e.fromObject=function(e){if(e instanceof l.slot_fortune_mouse.User)return e;var t=new l.slot_fortune_mouse.User;return null!=e.userId&&(t.userId=e.userId>>>0),null!=e.balance&&(c.Long?(t.balance=c.Long.fromValue(e.balance)).unsigned=!1:"string"==typeof e.balance?t.balance=parseInt(e.balance,10):"number"==typeof e.balance?t.balance=e.balance:"object"==typeof e.balance&&(t.balance=new c.LongBits(e.balance.low>>>0,e.balance.high>>>0).toNumber())),null!=e.nickname&&(t.nickname=String(e.nickname)),null!=e.avatar&&(t.avatar=String(e.avatar)),t},e.toObject=function(e,t){t||(t={});var o={};if(t.defaults){if(o.userId=0,c.Long){var n=new c.Long(0,0,!1);o.balance=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else o.balance=t.longs===String?"0":0;o.nickname="",o.avatar=""}return null!=e.userId&&e.hasOwnProperty("userId")&&(o.userId=e.userId),null!=e.balance&&e.hasOwnProperty("balance")&&("number"==typeof e.balance?o.balance=t.longs===String?String(e.balance):e.balance:o.balance=t.longs===String?c.Long.prototype.toString.call(e.balance):t.longs===Number?new c.LongBits(e.balance.low>>>0,e.balance.high>>>0).toNumber():e.balance),null!=e.nickname&&e.hasOwnProperty("nickname")&&(o.nickname=e.nickname),null!=e.avatar&&e.hasOwnProperty("avatar")&&(o.avatar=e.avatar),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/slot_fortune_mouse.User"},e}(),i.FortuneMouseSlotLevelDesc=function(){function e(e){if(this.chips=[],e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.roomId=0,e.prototype.gameType=0,e.prototype.chips=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.roomId&&Object.hasOwnProperty.call(e,"roomId")&&t.uint32(8).uint32(e.roomId),null!=e.gameType&&Object.hasOwnProperty.call(e,"gameType")&&t.uint32(16).uint32(e.gameType),null!=e.chips&&e.chips.length){t.uint32(26).fork();for(var o=0;o<e.chips.length;++o)t.uint32(e.chips[o]);t.ldelim()}return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var o=void 0===t?e.len:e.pos+t,n=new l.slot_fortune_mouse.FortuneMouseSlotLevelDesc;e.pos<o;){var i=e.uint32();switch(i>>>3){case 1:n.roomId=e.uint32();break;case 2:n.gameType=e.uint32();break;case 3:if(n.chips&&n.chips.length||(n.chips=[]),2==(7&i))for(var s=e.uint32()+e.pos;e.pos<s;)n.chips.push(e.uint32());else n.chips.push(e.uint32());break;default:e.skipType(7&i)}}return n},e.decodeDelimited=function(e){return e instanceof r||(e=new r(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.roomId&&e.hasOwnProperty("roomId")&&!c.isInteger(e.roomId))return"roomId: integer expected";if(null!=e.gameType&&e.hasOwnProperty("gameType")&&!c.isInteger(e.gameType))return"gameType: integer expected";if(null!=e.chips&&e.hasOwnProperty("chips")){if(!Array.isArray(e.chips))return"chips: array expected";for(var t=0;t<e.chips.length;++t)if(!c.isInteger(e.chips[t]))return"chips: integer[] expected"}return null},e.fromObject=function(e){if(e instanceof l.slot_fortune_mouse.FortuneMouseSlotLevelDesc)return e;var t=new l.slot_fortune_mouse.FortuneMouseSlotLevelDesc;if(null!=e.roomId&&(t.roomId=e.roomId>>>0),null!=e.gameType&&(t.gameType=e.gameType>>>0),e.chips){if(!Array.isArray(e.chips))throw TypeError(".slot_fortune_mouse.FortuneMouseSlotLevelDesc.chips: array expected");t.chips=[];for(var o=0;o<e.chips.length;++o)t.chips[o]=e.chips[o]>>>0}return t},e.toObject=function(e,t){t||(t={});var o={};if((t.arrays||t.defaults)&&(o.chips=[]),t.defaults&&(o.roomId=0,o.gameType=0),null!=e.roomId&&e.hasOwnProperty("roomId")&&(o.roomId=e.roomId),null!=e.gameType&&e.hasOwnProperty("gameType")&&(o.gameType=e.gameType),e.chips&&e.chips.length){o.chips=[];for(var n=0;n<e.chips.length;++n)o.chips[n]=e.chips[n]}return o},e.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/slot_fortune_mouse.FortuneMouseSlotLevelDesc"},e}(),i.Hit=function(){function e(e){if(this.pos=[],e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.lineId=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.win=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.pos=c.emptyArray,e.prototype.symbol=0,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.lineId&&Object.hasOwnProperty.call(e,"lineId")&&t.uint32(8).int64(e.lineId),null!=e.win&&Object.hasOwnProperty.call(e,"win")&&t.uint32(16).int64(e.win),null!=e.pos&&e.pos.length){t.uint32(26).fork();for(var o=0;o<e.pos.length;++o)t.uint32(e.pos[o]);t.ldelim()}return null!=e.symbol&&Object.hasOwnProperty.call(e,"symbol")&&t.uint32(32).uint32(e.symbol),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var o=void 0===t?e.len:e.pos+t,n=new l.slot_fortune_mouse.Hit;e.pos<o;){var i=e.uint32();switch(i>>>3){case 1:n.lineId=e.int64();break;case 2:n.win=e.int64();break;case 3:if(n.pos&&n.pos.length||(n.pos=[]),2==(7&i))for(var s=e.uint32()+e.pos;e.pos<s;)n.pos.push(e.uint32());else n.pos.push(e.uint32());break;case 4:n.symbol=e.uint32();break;default:e.skipType(7&i)}}return n},e.decodeDelimited=function(e){return e instanceof r||(e=new r(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.lineId&&e.hasOwnProperty("lineId")&&!(c.isInteger(e.lineId)||e.lineId&&c.isInteger(e.lineId.low)&&c.isInteger(e.lineId.high)))return"lineId: integer|Long expected";if(null!=e.win&&e.hasOwnProperty("win")&&!(c.isInteger(e.win)||e.win&&c.isInteger(e.win.low)&&c.isInteger(e.win.high)))return"win: integer|Long expected";if(null!=e.pos&&e.hasOwnProperty("pos")){if(!Array.isArray(e.pos))return"pos: array expected";for(var t=0;t<e.pos.length;++t)if(!c.isInteger(e.pos[t]))return"pos: integer[] expected"}return null!=e.symbol&&e.hasOwnProperty("symbol")&&!c.isInteger(e.symbol)?"symbol: integer expected":null},e.fromObject=function(e){if(e instanceof l.slot_fortune_mouse.Hit)return e;var t=new l.slot_fortune_mouse.Hit;if(null!=e.lineId&&(c.Long?(t.lineId=c.Long.fromValue(e.lineId)).unsigned=!1:"string"==typeof e.lineId?t.lineId=parseInt(e.lineId,10):"number"==typeof e.lineId?t.lineId=e.lineId:"object"==typeof e.lineId&&(t.lineId=new c.LongBits(e.lineId.low>>>0,e.lineId.high>>>0).toNumber())),null!=e.win&&(c.Long?(t.win=c.Long.fromValue(e.win)).unsigned=!1:"string"==typeof e.win?t.win=parseInt(e.win,10):"number"==typeof e.win?t.win=e.win:"object"==typeof e.win&&(t.win=new c.LongBits(e.win.low>>>0,e.win.high>>>0).toNumber())),e.pos){if(!Array.isArray(e.pos))throw TypeError(".slot_fortune_mouse.Hit.pos: array expected");t.pos=[];for(var o=0;o<e.pos.length;++o)t.pos[o]=e.pos[o]>>>0}return null!=e.symbol&&(t.symbol=e.symbol>>>0),t},e.toObject=function(e,t){t||(t={});var o={};if((t.arrays||t.defaults)&&(o.pos=[]),t.defaults){if(c.Long){var n=new c.Long(0,0,!1);o.lineId=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else o.lineId=t.longs===String?"0":0;c.Long?(n=new c.Long(0,0,!1),o.win=t.longs===String?n.toString():t.longs===Number?n.toNumber():n):o.win=t.longs===String?"0":0,o.symbol=0}if(null!=e.lineId&&e.hasOwnProperty("lineId")&&("number"==typeof e.lineId?o.lineId=t.longs===String?String(e.lineId):e.lineId:o.lineId=t.longs===String?c.Long.prototype.toString.call(e.lineId):t.longs===Number?new c.LongBits(e.lineId.low>>>0,e.lineId.high>>>0).toNumber():e.lineId),null!=e.win&&e.hasOwnProperty("win")&&("number"==typeof e.win?o.win=t.longs===String?String(e.win):e.win:o.win=t.longs===String?c.Long.prototype.toString.call(e.win):t.longs===Number?new c.LongBits(e.win.low>>>0,e.win.high>>>0).toNumber():e.win),e.pos&&e.pos.length){o.pos=[];for(var i=0;i<e.pos.length;++i)o.pos[i]=e.pos[i]}return null!=e.symbol&&e.hasOwnProperty("symbol")&&(o.symbol=e.symbol),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/slot_fortune_mouse.Hit"},e}(),i.GameGetTableInfoResp=function(){function e(e){if(this.screen=[],this.hits=[],this.winLevel=[],e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.desc=null,e.prototype.roundId="",e.prototype.self=null,e.prototype.screen=c.emptyArray,e.prototype.hits=c.emptyArray,e.prototype.winLevel=c.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.desc&&Object.hasOwnProperty.call(e,"desc")&&l.slot_fortune_mouse.FortuneMouseSlotLevelDesc.encode(e.desc,t.uint32(10).fork()).ldelim(),null!=e.roundId&&Object.hasOwnProperty.call(e,"roundId")&&t.uint32(18).string(e.roundId),null!=e.self&&Object.hasOwnProperty.call(e,"self")&&l.slot_fortune_mouse.User.encode(e.self,t.uint32(26).fork()).ldelim(),null!=e.screen&&e.screen.length){t.uint32(34).fork();for(var o=0;o<e.screen.length;++o)t.uint32(e.screen[o]);t.ldelim()}if(null!=e.hits&&e.hits.length)for(o=0;o<e.hits.length;++o)l.slot_fortune_mouse.Hit.encode(e.hits[o],t.uint32(58).fork()).ldelim();if(null!=e.winLevel&&e.winLevel.length){for(t.uint32(74).fork(),o=0;o<e.winLevel.length;++o)t.int64(e.winLevel[o]);t.ldelim()}return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var o=void 0===t?e.len:e.pos+t,n=new l.slot_fortune_mouse.GameGetTableInfoResp;e.pos<o;){var i=e.uint32();switch(i>>>3){case 1:n.desc=l.slot_fortune_mouse.FortuneMouseSlotLevelDesc.decode(e,e.uint32());break;case 2:n.roundId=e.string();break;case 3:n.self=l.slot_fortune_mouse.User.decode(e,e.uint32());break;case 4:if(n.screen&&n.screen.length||(n.screen=[]),2==(7&i))for(var s=e.uint32()+e.pos;e.pos<s;)n.screen.push(e.uint32());else n.screen.push(e.uint32());break;case 7:n.hits&&n.hits.length||(n.hits=[]),n.hits.push(l.slot_fortune_mouse.Hit.decode(e,e.uint32()));break;case 9:if(n.winLevel&&n.winLevel.length||(n.winLevel=[]),2==(7&i))for(s=e.uint32()+e.pos;e.pos<s;)n.winLevel.push(e.int64());else n.winLevel.push(e.int64());break;default:e.skipType(7&i)}}return n},e.decodeDelimited=function(e){return e instanceof r||(e=new r(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.desc&&e.hasOwnProperty("desc")&&(o=l.slot_fortune_mouse.FortuneMouseSlotLevelDesc.verify(e.desc)))return"desc."+o;if(null!=e.roundId&&e.hasOwnProperty("roundId")&&!c.isString(e.roundId))return"roundId: string expected";if(null!=e.self&&e.hasOwnProperty("self")&&(o=l.slot_fortune_mouse.User.verify(e.self)))return"self."+o;if(null!=e.screen&&e.hasOwnProperty("screen")){if(!Array.isArray(e.screen))return"screen: array expected";for(var t=0;t<e.screen.length;++t)if(!c.isInteger(e.screen[t]))return"screen: integer[] expected"}if(null!=e.hits&&e.hasOwnProperty("hits")){if(!Array.isArray(e.hits))return"hits: array expected";for(t=0;t<e.hits.length;++t){var o;if(o=l.slot_fortune_mouse.Hit.verify(e.hits[t]))return"hits."+o}}if(null!=e.winLevel&&e.hasOwnProperty("winLevel")){if(!Array.isArray(e.winLevel))return"winLevel: array expected";for(t=0;t<e.winLevel.length;++t)if(!(c.isInteger(e.winLevel[t])||e.winLevel[t]&&c.isInteger(e.winLevel[t].low)&&c.isInteger(e.winLevel[t].high)))return"winLevel: integer|Long[] expected"}return null},e.fromObject=function(e){if(e instanceof l.slot_fortune_mouse.GameGetTableInfoResp)return e;var t=new l.slot_fortune_mouse.GameGetTableInfoResp;if(null!=e.desc){if("object"!=typeof e.desc)throw TypeError(".slot_fortune_mouse.GameGetTableInfoResp.desc: object expected");t.desc=l.slot_fortune_mouse.FortuneMouseSlotLevelDesc.fromObject(e.desc)}if(null!=e.roundId&&(t.roundId=String(e.roundId)),null!=e.self){if("object"!=typeof e.self)throw TypeError(".slot_fortune_mouse.GameGetTableInfoResp.self: object expected");t.self=l.slot_fortune_mouse.User.fromObject(e.self)}if(e.screen){if(!Array.isArray(e.screen))throw TypeError(".slot_fortune_mouse.GameGetTableInfoResp.screen: array expected");t.screen=[];for(var o=0;o<e.screen.length;++o)t.screen[o]=e.screen[o]>>>0}if(e.hits){if(!Array.isArray(e.hits))throw TypeError(".slot_fortune_mouse.GameGetTableInfoResp.hits: array expected");for(t.hits=[],o=0;o<e.hits.length;++o){if("object"!=typeof e.hits[o])throw TypeError(".slot_fortune_mouse.GameGetTableInfoResp.hits: object expected");t.hits[o]=l.slot_fortune_mouse.Hit.fromObject(e.hits[o])}}if(e.winLevel){if(!Array.isArray(e.winLevel))throw TypeError(".slot_fortune_mouse.GameGetTableInfoResp.winLevel: array expected");for(t.winLevel=[],o=0;o<e.winLevel.length;++o)c.Long?(t.winLevel[o]=c.Long.fromValue(e.winLevel[o])).unsigned=!1:"string"==typeof e.winLevel[o]?t.winLevel[o]=parseInt(e.winLevel[o],10):"number"==typeof e.winLevel[o]?t.winLevel[o]=e.winLevel[o]:"object"==typeof e.winLevel[o]&&(t.winLevel[o]=new c.LongBits(e.winLevel[o].low>>>0,e.winLevel[o].high>>>0).toNumber())}return t},e.toObject=function(e,t){t||(t={});var o={};if((t.arrays||t.defaults)&&(o.screen=[],o.hits=[],o.winLevel=[]),t.defaults&&(o.desc=null,o.roundId="",o.self=null),null!=e.desc&&e.hasOwnProperty("desc")&&(o.desc=l.slot_fortune_mouse.FortuneMouseSlotLevelDesc.toObject(e.desc,t)),null!=e.roundId&&e.hasOwnProperty("roundId")&&(o.roundId=e.roundId),null!=e.self&&e.hasOwnProperty("self")&&(o.self=l.slot_fortune_mouse.User.toObject(e.self,t)),e.screen&&e.screen.length){o.screen=[];for(var n=0;n<e.screen.length;++n)o.screen[n]=e.screen[n]}if(e.hits&&e.hits.length)for(o.hits=[],n=0;n<e.hits.length;++n)o.hits[n]=l.slot_fortune_mouse.Hit.toObject(e.hits[n],t);if(e.winLevel&&e.winLevel.length)for(o.winLevel=[],n=0;n<e.winLevel.length;++n)"number"==typeof e.winLevel[n]?o.winLevel[n]=t.longs===String?String(e.winLevel[n]):e.winLevel[n]:o.winLevel[n]=t.longs===String?c.Long.prototype.toString.call(e.winLevel[n]):t.longs===Number?new c.LongBits(e.winLevel[n].low>>>0,e.winLevel[n].high>>>0).toNumber():e.winLevel[n];return o},e.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/slot_fortune_mouse.GameGetTableInfoResp"},e}(),i.SpinResp=function(){function e(e){if(this.hits=[],this.screen=[],e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.hits=c.emptyArray,e.prototype.screen=c.emptyArray,e.prototype.trigger=!1,e.prototype.bet=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.balance=c.Long?c.Long.fromBits(0,0,!1):0,e.prototype.totalWin=c.Long?c.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.hits&&e.hits.length)for(var o=0;o<e.hits.length;++o)l.slot_fortune_mouse.Hit.encode(e.hits[o],t.uint32(10).fork()).ldelim();if(null!=e.screen&&e.screen.length){for(t.uint32(18).fork(),o=0;o<e.screen.length;++o)t.uint32(e.screen[o]);t.ldelim()}return null!=e.trigger&&Object.hasOwnProperty.call(e,"trigger")&&t.uint32(24).bool(e.trigger),null!=e.bet&&Object.hasOwnProperty.call(e,"bet")&&t.uint32(48).int64(e.bet),null!=e.balance&&Object.hasOwnProperty.call(e,"balance")&&t.uint32(56).int64(e.balance),null!=e.totalWin&&Object.hasOwnProperty.call(e,"totalWin")&&t.uint32(64).int64(e.totalWin),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var o=void 0===t?e.len:e.pos+t,n=new l.slot_fortune_mouse.SpinResp;e.pos<o;){var i=e.uint32();switch(i>>>3){case 1:n.hits&&n.hits.length||(n.hits=[]),n.hits.push(l.slot_fortune_mouse.Hit.decode(e,e.uint32()));break;case 2:if(n.screen&&n.screen.length||(n.screen=[]),2==(7&i))for(var s=e.uint32()+e.pos;e.pos<s;)n.screen.push(e.uint32());else n.screen.push(e.uint32());break;case 3:n.trigger=e.bool();break;case 6:n.bet=e.int64();break;case 7:n.balance=e.int64();break;case 8:n.totalWin=e.int64();break;default:e.skipType(7&i)}}return n},e.decodeDelimited=function(e){return e instanceof r||(e=new r(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.hits&&e.hasOwnProperty("hits")){if(!Array.isArray(e.hits))return"hits: array expected";for(var t=0;t<e.hits.length;++t){var o=l.slot_fortune_mouse.Hit.verify(e.hits[t]);if(o)return"hits."+o}}if(null!=e.screen&&e.hasOwnProperty("screen")){if(!Array.isArray(e.screen))return"screen: array expected";for(t=0;t<e.screen.length;++t)if(!c.isInteger(e.screen[t]))return"screen: integer[] expected"}return null!=e.trigger&&e.hasOwnProperty("trigger")&&"boolean"!=typeof e.trigger?"trigger: boolean expected":null!=e.bet&&e.hasOwnProperty("bet")&&!(c.isInteger(e.bet)||e.bet&&c.isInteger(e.bet.low)&&c.isInteger(e.bet.high))?"bet: integer|Long expected":null!=e.balance&&e.hasOwnProperty("balance")&&!(c.isInteger(e.balance)||e.balance&&c.isInteger(e.balance.low)&&c.isInteger(e.balance.high))?"balance: integer|Long expected":null!=e.totalWin&&e.hasOwnProperty("totalWin")&&!(c.isInteger(e.totalWin)||e.totalWin&&c.isInteger(e.totalWin.low)&&c.isInteger(e.totalWin.high))?"totalWin: integer|Long expected":null},e.fromObject=function(e){if(e instanceof l.slot_fortune_mouse.SpinResp)return e;var t=new l.slot_fortune_mouse.SpinResp;if(e.hits){if(!Array.isArray(e.hits))throw TypeError(".slot_fortune_mouse.SpinResp.hits: array expected");t.hits=[];for(var o=0;o<e.hits.length;++o){if("object"!=typeof e.hits[o])throw TypeError(".slot_fortune_mouse.SpinResp.hits: object expected");t.hits[o]=l.slot_fortune_mouse.Hit.fromObject(e.hits[o])}}if(e.screen){if(!Array.isArray(e.screen))throw TypeError(".slot_fortune_mouse.SpinResp.screen: array expected");for(t.screen=[],o=0;o<e.screen.length;++o)t.screen[o]=e.screen[o]>>>0}return null!=e.trigger&&(t.trigger=Boolean(e.trigger)),null!=e.bet&&(c.Long?(t.bet=c.Long.fromValue(e.bet)).unsigned=!1:"string"==typeof e.bet?t.bet=parseInt(e.bet,10):"number"==typeof e.bet?t.bet=e.bet:"object"==typeof e.bet&&(t.bet=new c.LongBits(e.bet.low>>>0,e.bet.high>>>0).toNumber())),null!=e.balance&&(c.Long?(t.balance=c.Long.fromValue(e.balance)).unsigned=!1:"string"==typeof e.balance?t.balance=parseInt(e.balance,10):"number"==typeof e.balance?t.balance=e.balance:"object"==typeof e.balance&&(t.balance=new c.LongBits(e.balance.low>>>0,e.balance.high>>>0).toNumber())),null!=e.totalWin&&(c.Long?(t.totalWin=c.Long.fromValue(e.totalWin)).unsigned=!1:"string"==typeof e.totalWin?t.totalWin=parseInt(e.totalWin,10):"number"==typeof e.totalWin?t.totalWin=e.totalWin:"object"==typeof e.totalWin&&(t.totalWin=new c.LongBits(e.totalWin.low>>>0,e.totalWin.high>>>0).toNumber())),t},e.toObject=function(e,t){t||(t={});var o={};if((t.arrays||t.defaults)&&(o.hits=[],o.screen=[]),t.defaults){if(o.trigger=!1,c.Long){var n=new c.Long(0,0,!1);o.bet=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else o.bet=t.longs===String?"0":0;c.Long?(n=new c.Long(0,0,!1),o.balance=t.longs===String?n.toString():t.longs===Number?n.toNumber():n):o.balance=t.longs===String?"0":0,c.Long?(n=new c.Long(0,0,!1),o.totalWin=t.longs===String?n.toString():t.longs===Number?n.toNumber():n):o.totalWin=t.longs===String?"0":0}if(e.hits&&e.hits.length){o.hits=[];for(var i=0;i<e.hits.length;++i)o.hits[i]=l.slot_fortune_mouse.Hit.toObject(e.hits[i],t)}if(e.screen&&e.screen.length)for(o.screen=[],i=0;i<e.screen.length;++i)o.screen[i]=e.screen[i];return null!=e.trigger&&e.hasOwnProperty("trigger")&&(o.trigger=e.trigger),null!=e.bet&&e.hasOwnProperty("bet")&&("number"==typeof e.bet?o.bet=t.longs===String?String(e.bet):e.bet:o.bet=t.longs===String?c.Long.prototype.toString.call(e.bet):t.longs===Number?new c.LongBits(e.bet.low>>>0,e.bet.high>>>0).toNumber():e.bet),null!=e.balance&&e.hasOwnProperty("balance")&&("number"==typeof e.balance?o.balance=t.longs===String?String(e.balance):e.balance:o.balance=t.longs===String?c.Long.prototype.toString.call(e.balance):t.longs===Number?new c.LongBits(e.balance.low>>>0,e.balance.high>>>0).toNumber():e.balance),null!=e.totalWin&&e.hasOwnProperty("totalWin")&&("number"==typeof e.totalWin?o.totalWin=t.longs===String?String(e.totalWin):e.totalWin:o.totalWin=t.longs===String?c.Long.prototype.toString.call(e.totalWin):t.longs===Number?new c.LongBits(e.totalWin.low>>>0,e.totalWin.high>>>0).toNumber():e.totalWin),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/slot_fortune_mouse.SpinResp"},e}(),i.GameGetTableEmptyResp=function(){function e(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var o=void 0===t?e.len:e.pos+t,n=new l.slot_fortune_mouse.GameGetTableEmptyResp;e.pos<o;){var i=e.uint32();e.skipType(7&i)}return n},e.decodeDelimited=function(e){return e instanceof r||(e=new r(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null},e.fromObject=function(e){return e instanceof l.slot_fortune_mouse.GameGetTableEmptyResp?e:new l.slot_fortune_mouse.GameGetTableEmptyResp},e.toObject=function(){return{}},e.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/slot_fortune_mouse.GameGetTableEmptyResp"},e}(),i.GameEnterReq=function(){function e(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var o=void 0===t?e.len:e.pos+t,n=new l.slot_fortune_mouse.GameEnterReq;e.pos<o;){var i=e.uint32();e.skipType(7&i)}return n},e.decodeDelimited=function(e){return e instanceof r||(e=new r(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null},e.fromObject=function(e){return e instanceof l.slot_fortune_mouse.GameEnterReq?e:new l.slot_fortune_mouse.GameEnterReq},e.toObject=function(){return{}},e.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/slot_fortune_mouse.GameEnterReq"},e}(),i.GameEnterResp=function(){function e(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var o=void 0===t?e.len:e.pos+t,n=new l.slot_fortune_mouse.GameEnterResp;e.pos<o;){var i=e.uint32();e.skipType(7&i)}return n},e.decodeDelimited=function(e){return e instanceof r||(e=new r(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null},e.fromObject=function(e){return e instanceof l.slot_fortune_mouse.GameEnterResp?e:new l.slot_fortune_mouse.GameEnterResp},e.toObject=function(){return{}},e.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/slot_fortune_mouse.GameEnterResp"},e}(),i.GameSpinReq=function(){function e(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.amount=c.Long?c.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.amount&&Object.hasOwnProperty.call(e,"amount")&&t.uint32(8).int64(e.amount),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var o=void 0===t?e.len:e.pos+t,n=new l.slot_fortune_mouse.GameSpinReq;e.pos<o;){var i=e.uint32();switch(i>>>3){case 1:n.amount=e.int64();break;default:e.skipType(7&i)}}return n},e.decodeDelimited=function(e){return e instanceof r||(e=new r(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.amount&&e.hasOwnProperty("amount")&&!(c.isInteger(e.amount)||e.amount&&c.isInteger(e.amount.low)&&c.isInteger(e.amount.high))?"amount: integer|Long expected":null},e.fromObject=function(e){if(e instanceof l.slot_fortune_mouse.GameSpinReq)return e;var t=new l.slot_fortune_mouse.GameSpinReq;return null!=e.amount&&(c.Long?(t.amount=c.Long.fromValue(e.amount)).unsigned=!1:"string"==typeof e.amount?t.amount=parseInt(e.amount,10):"number"==typeof e.amount?t.amount=e.amount:"object"==typeof e.amount&&(t.amount=new c.LongBits(e.amount.low>>>0,e.amount.high>>>0).toNumber())),t},e.toObject=function(e,t){t||(t={});var o={};if(t.defaults)if(c.Long){var n=new c.Long(0,0,!1);o.amount=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else o.amount=t.longs===String?"0":0;return null!=e.amount&&e.hasOwnProperty("amount")&&("number"==typeof e.amount?o.amount=t.longs===String?String(e.amount):e.amount:o.amount=t.longs===String?c.Long.prototype.toString.call(e.amount):t.longs===Number?new c.LongBits(e.amount.low>>>0,e.amount.high>>>0).toNumber():e.amount),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/slot_fortune_mouse.GameSpinReq"},e}(),i.GameGetConfigReq=function(){function e(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var o=void 0===t?e.len:e.pos+t,n=new l.slot_fortune_mouse.GameGetConfigReq;e.pos<o;){var i=e.uint32();e.skipType(7&i)}return n},e.decodeDelimited=function(e){return e instanceof r||(e=new r(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null},e.fromObject=function(e){return e instanceof l.slot_fortune_mouse.GameGetConfigReq?e:new l.slot_fortune_mouse.GameGetConfigReq},e.toObject=function(){return{}},e.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/slot_fortune_mouse.GameGetConfigReq"},e}(),i.GameConfigResp=function(){function e(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.config="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.config&&Object.hasOwnProperty.call(e,"config")&&t.uint32(10).string(e.config),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var o=void 0===t?e.len:e.pos+t,n=new l.slot_fortune_mouse.GameConfigResp;e.pos<o;){var i=e.uint32();switch(i>>>3){case 1:n.config=e.string();break;default:e.skipType(7&i)}}return n},e.decodeDelimited=function(e){return e instanceof r||(e=new r(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.config&&e.hasOwnProperty("config")&&!c.isString(e.config)?"config: string expected":null},e.fromObject=function(e){if(e instanceof l.slot_fortune_mouse.GameConfigResp)return e;var t=new l.slot_fortune_mouse.GameConfigResp;return null!=e.config&&(t.config=String(e.config)),t},e.toObject=function(e,t){t||(t={});var o={};return t.defaults&&(o.config=""),null!=e.config&&e.hasOwnProperty("config")&&(o.config=e.config),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/slot_fortune_mouse.GameConfigResp"},e}(),i.HeartbeatReq=function(){function e(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var o=void 0===t?e.len:e.pos+t,n=new l.slot_fortune_mouse.HeartbeatReq;e.pos<o;){var i=e.uint32();e.skipType(7&i)}return n},e.decodeDelimited=function(e){return e instanceof r||(e=new r(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null},e.fromObject=function(e){return e instanceof l.slot_fortune_mouse.HeartbeatReq?e:new l.slot_fortune_mouse.HeartbeatReq},e.toObject=function(){return{}},e.prototype.toJSON=function(){return this.constructor.toObject(this,s.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/slot_fortune_mouse.HeartbeatReq"},e}(),i),t.exports=l,cc._RF.pop()},{}]},{},["FortuneMouse-data","Game1810Scroll","RetryTipDisplay","RuleView","fortuneMouse-anim","fortuneMouse-award-layer","fortuneMouse-cell-item","fortuneMouse-launch","fortuneMouse-logic","fortuneMouse-scroll-symbol","fortuneMouse-sender","fortuneMouse-show-msg","fortuneMouse-start","fortuneMouse-table","fortuneMouse-view","fortuneMouseProtocol"]);