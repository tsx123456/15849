window.__require=function t(e,n,o){function i(c,s){if(!n[c]){if(!e[c]){var a=c.split("/");if(a=a[a.length-1],!e[a]){var l="function"==typeof __require&&__require;if(!s&&l)return l(a,!0);if(r)return r(a,!0);throw new Error("Cannot find module '"+c+"'")}c=a}var u=n[c]={exports:{}};e[c][0].call(u.exports,function(t){return i(e[c][1][t]||t)},u,u.exports,t,e,n,o)}return n[c].exports}for(var r="function"==typeof __require&&__require,c=0;c<o.length;c++)i(o[c]);return i}({AThemeColor:[function(t,e,n){"use strict";cc._RF.push(e,"acff4CMoehMf67nllQvUf9g","AThemeColor");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0}),n.AThemeColor=void 0;var c=t("./UIhistory"),s=cc._decorator,a=s.ccclass,l=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onLoad=function(){this.node.color=c.UIhistory.themeColor},r([a],e)}(cc.Component));n.AThemeColor=l,cc._RF.pop()},{"./UIhistory":"UIhistory"}],AdaptScreen:[function(t,e,n){"use strict";cc._RF.push(e,"9589d1fC/NP5Lpkog6c8I3m","AdaptScreen");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0}),n.log=n.AdaptScreen=void 0;var c=t("../../../../../script/framework/log/log"),s=t("../../../../../script/pkg/adapter-v2"),a=cc._decorator,l=a.ccclass,u=a.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.maxWidth=!0,e.maxHeight=!0,e}return i(e,t),e.prototype.onLoad=function(){c.tcLog.log("changeSize:",s.AdapterV2.getInstance().rootCanvasWidth,s.AdapterV2.getInstance().rootCanvasHeight);var t=new cc.Size(0,0);if(t.width=s.AdapterV2.getInstance().rootCanvasWidth,t.height=s.AdapterV2.getInstance().rootCanvasHeight,this.maxHeight)if(t.height>1875){var e=.5*(t.height-1875);this.node.setPosition(0,e<38?e:38),t.height=1875}else this.node.setPosition(0,0);this.maxWidth&&t.width>810&&(t.width=810),this.node.setContentSize(t.width,t.height)},r([u(cc.Boolean)],e.prototype,"maxWidth",void 0),r([u(cc.Boolean)],e.prototype,"maxHeight",void 0),r([l],e)}(cc.Component);n.AdaptScreen=h,n.log=function(){throw new Error("Function not implemented.")},cc._RF.pop()},{"../../../../../script/framework/log/log":void 0,"../../../../../script/pkg/adapter-v2":void 0}],BaseView:[function(t,e,n){"use strict";cc._RF.push(e,"5bdc3pd5G9M34rSV3+gMnis","BaseView");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0}),n.BaseView=void 0;var c=t("./CocosUtil"),s=cc._decorator,a=s.ccclass,l=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.m_ui={},e.l_ui={},e}return i(e,t),e.prototype.onLoad=function(){c.default.traverseNodes(this.node,this.m_ui),c.default.traverseLabels(this.node,this.l_ui)},r([a],e)}(cc.Component));n.BaseView=l,cc._RF.pop()},{"./CocosUtil":"CocosUtil"}],BlockComp:[function(t,e,n){"use strict";cc._RF.push(e,"bdaaflcExlNW7BQ/eMNsGaU","BlockComp");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0}),n.BlockComp=void 0;var c=cc._decorator,s=c.ccclass,a=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.closeWhenClick=!0,e}return i(e,t),e.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_END,this.doBlock,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.doBlock,this),this.node.on(cc.Node.EventType.MOUSE_DOWN,this.doBlock,this),this.node.on(cc.Node.EventType.MOUSE_MOVE,this.doBlock,this),this.node.on(cc.Node.EventType.MOUSE_UP,this.doBlock,this),this.node.on(cc.Node.EventType.MOUSE_ENTER,this.doBlock,this),this.node.on(cc.Node.EventType.MOUSE_LEAVE,this.doBlock,this),this.node.on(cc.Node.EventType.MOUSE_WHEEL,this.doBlock,this)},e.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.off(cc.Node.EventType.TOUCH_END,this.doBlock,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this.doBlock,this),this.node.off(cc.Node.EventType.MOUSE_DOWN,this.doBlock,this),this.node.off(cc.Node.EventType.MOUSE_MOVE,this.doBlock,this),this.node.off(cc.Node.EventType.MOUSE_UP,this.doBlock,this),this.node.off(cc.Node.EventType.MOUSE_ENTER,this.doBlock,this),this.node.off(cc.Node.EventType.MOUSE_LEAVE,this.doBlock,this),this.node.off(cc.Node.EventType.MOUSE_WHEEL,this.doBlock,this)},e.prototype.onTouchStart=function(t){t.propagationStopped=!0,this.closeWhenClick&&this.node.destroy()},e.prototype.doBlock=function(t){t.propagationStopped=!0},r([s],e)}(cc.Component));n.BlockComp=a,cc._RF.pop()},{}],CHandler:[function(t,e,n){"use strict";cc._RF.push(e,"83f5crfkXREMpmCWyMtOuMT","CHandler"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];this._autoClean=!1,this._neverFirst=!1,this._fn=e,this._thisObj=t,this._args=n}return t.prototype.neverFirst=function(){return this._neverFirst=!0,this},t.prototype.invoke=function(){var t;return t=this._args&&this._args.length>0?this._fn.apply(this._thisObj,this._args):this._fn.call(this._thisObj),this._autoClean&&this.clear(),t},t.prototype.invodeWithFirst=function(t){return this._neverFirst?this.invoke():(e=this._args&&this._args.length>0?this._fn.apply(this._thisObj,[t].concat(this._args)):this._fn.call(this._thisObj,t),this._autoClean&&this.clear(),e);var e},t.prototype.invokeWithExtra=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t=this._args&&this._args.length>0?e?this._fn.apply(this._thisObj,this._args.concat(e)):this._fn.apply(this._thisObj,this._args):e?this._fn.apply(this._thisObj,e):this._fn.call(this._thisObj),this._autoClean&&this.clear(),t},t.prototype.clear=function(){this._fn=null,this._thisObj=null,this._args&&(this._args.length=0),this._args=null},t.prototype.setAutoClean=function(t){this._autoClean=t},t.prototype.getTarget=function(){return this._thisObj},t}();n.default=o,cc._RF.pop()},{}],CocosUtil:[function(t,e,n){"use strict";cc._RF.push(e,"e0741XBFQxLVrvc/Q+d8b63","CocosUtil");var o=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../../../../../script/framework/log/log"),r=t("./BlockComp"),c=t("./Globals"),s=cc._decorator,a=s.ccclass,l=(s.property,function(){function t(){}var e;return e=t,t.initComponent=function(t,e){return t.getComponent(e)?t.getComponent(e):t.addComponent(e)},t.wait=function(t){return new Promise(function(e){setTimeout(function(){e(null)},1e3*t)})},t.traverseNodes=function(t,n){if(t&&t.children)for(var o=t.children,i=0;i<o.length;i++)n[o[i].name]=o[i],e.traverseNodes(o[i],n)},t.traverseLabels=function(t,e){if(t){var n=t.getComponentsInChildren(cc.Label);for(var o in n)e[n[o].node.name]=n[o]}},t.findNode=function(t,n){if(!t)return null;if(t.name==n)return t;for(var o=t.children,i=o.length-1;i>=0;i--){var r=e.findNode(o[i],n);if(r)return r}return null},t.setModal=function(t,n){t.getComponent(cc.BlockInputEvents)||(e.initComponent(t,r.BlockComp).closeWhenClick=n)},t.mark_click=function(){this.tmr_click=0},t.addClickEvent=function(t,e,n,o,r,s){if(void 0===r&&(r=1.02),void 0===s&&(s=!1),c.isNil(t))console.warn("fail addClickEvent as target is nil");else{var a=0,l=t.getComponent(cc.Button);l?l.transition==cc.Button.Transition.SCALE&&(l.zoomScale=r,l.duration=.06):((l=t.addComponent(cc.Button)).transition=cc.Button.Transition.SCALE,l.duration=.06,l.zoomScale=r);var u=function(){!s&&a>0?i.tcLog.log("\u9891\u7e41\u70b9\u51fb",a):(setTimeout(function(){a=0},300),l.interactable&&(null!=o?e.call(n,o):e.call(n)))};t.off(cc.Node.EventType.TOUCH_END,u,n),t.on(cc.Node.EventType.TOUCH_END,u,n)}},t.delClickEvent=function(t,e,n){t.off(cc.Node.EventType.TOUCH_END,e,n)},t.convertSpaceAR=function(t,e,n,o){void 0===n&&(n=0),void 0===o&&(o=0);var i=t.convertToWorldSpaceAR(cc.v3(n,o));return e.convertToNodeSpaceAR(i)},t.tmr_click=0,e=o([a],t)}());n.default=l,cc._RF.pop()},{"../../../../../script/framework/log/log":void 0,"./BlockComp":"BlockComp","./Globals":"Globals"}],CommonUtil:[function(t,e,n){"use strict";cc._RF.push(e,"7b307TDxzhNebGvm8J7Aqx1","CommonUtil"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./Globals");ArrayBuffer.transfer||(ArrayBuffer.transfer=function(t,e){t=Object(t);var n=new ArrayBuffer(e);if(!(t instanceof ArrayBuffer&&n instanceof ArrayBuffer))throw new TypeError("ArrayBuffer.transfer, error: Source and destination must be ArrayBuffer instances");if(!(n.byteLength>=t.byteLength))throw new RangeError("ArrayBuffer.transfer, error: destination has not enough space");return new Uint8Array(n).set(new Uint8Array(t),0),n});var i=function(){function t(){}return t.safeDelete=function(t){return null==t?null:t.delInstance?(t.delInstance(),null):t.do_dtor?(t.do_dtor(),null):t.node?(t.node.destroy(),null):(t.destroy(),null)},t.getClsName=function(t){return t&&t.constructor?t.constructor.name:""},t.getUUID=function(){for(var t=[],e=0;e<36;e++)t[e]="0123456789abcdef".substr(Math.floor(16*Math.random()),1);return t[14]="4",t[19]="0123456789abcdef".substr(3&t[19]|8,1),t[8]=t[13]=t[18]=t[23]="-",t.join("")},t.num00=function(t){return t<10?"0"+t:t.toString()},t.simpleCopy=function(t,e,n){if(null!=e&&null!=t)for(var o in e)e.hasOwnProperty(o)&&(n&&n[o]||(t[o]=e[o]))},t.deepClone=function(t){if(null==t||typeof{}!=typeof t||typeof[]!=typeof t)return t;var e,n=!1;t.length?(e=[],n=!0):(e={},n=!1);for(var o=0,i=Object.keys(t);o<i.length;o++){var r=i[o];if(null==t[r])n?e.push(null):e[r]=null;else{var c="object"==typeof t[r]?this.deepClone(t[r]):t[r];n?e.push(c):e[r]=c}}return e},t.isEqual=function(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(this.isArray(t))return this.isSameArray(e,t);for(var n in t)if(!this.isEqual(t[n],e[n]))return!1;return!1},t.addArray=function(t,e){var n=[];if(t)for(var o in t)n.push(t[o]);if(e)for(var o in e)n.push(e[o]);return n},t.appendArray=function(t,e){if(e)for(var n in e)t.push(e[n])},t.minusArray=function(t,e){if(t&&!(t.length<=0)&&e&&!(e.length<=0))for(var n=0;n<e.length;n++){var o=t.indexOf(e[n]);o>=0&&t.splice(o,1)}},t.addArrayItem=function(t,e,n){if(n&&0!=n)if(n>0)for(var o=0;o<n;o++)t.push(e);else for(var i=t.length;i>=0&&!(t[i]==e&&(t.splice(i,1),++n>=0));i--);},t.isSameArray=function(t,e){if(typeof t!=typeof e)return!1;if(t.length!=e.length)return!1;for(var n in t)if(e.indexOf(t[n])<0)return!1;for(var n in e)if(t.indexOf(e[n])<0)return!1;return!0},t.cloneArray=function(t){var e=[];if(o.isNil(t))return e;for(var n in t)e.push(t[n]);return e},t.isArray=function(t){return!o.isNil(t.length)},t.Uint8Arr2NumArr=function(t){var e=[];if(t)for(var n in t)e.push(t[n]);return e},t.NumArr2Uint8Arr=function(t){if(o.isNil(t)||t.length<=0)return null;for(var e=new ArrayBuffer(t.length),n=new DataView(e),i=0;i<t.length;i++)n.setUint8(i,t[i]);return new Uint8Array(n.buffer)},t}();n.default=i,cc._RF.pop()},{"./Globals":"Globals"}],CompDissItem:[function(t,e,n){"use strict";cc._RF.push(e,"debe4DnFshGn6yUxP3Pq8Hr","CompDissItem");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0}),n.CompDissItem=void 0;var c=t("../script/PgEvent"),s=t("./CocosUtil"),a=cc._decorator,l=a.ccclass,u=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.init=function(t){this.parent=t},e.prototype.start=function(){s.default.addClickEvent(this.node,function(){cc.systemEvent.emit(c.pgGameEvent.ui_show_hisdetail_tip,this.parent,this._info)},this,null,1.01)},e.prototype.setData=function(t){this._info=t},r([l],e)}(cc.Component));n.CompDissItem=u,cc._RF.pop()},{"../script/PgEvent":"PgEvent","./CocosUtil":"CocosUtil"}],CompHisPage:[function(t,e,n){"use strict";cc._RF.push(e,"27f7dxz/oZPJIXRqbiUzYX7","CompHisPage");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},c=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function c(t){try{a(o.next(t))}catch(e){r(e)}}function s(t){try{a(o.throw(t))}catch(e){r(e)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(c,s)}a((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return a([t,e])}}function a(r){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,o=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(s){r=[6,s],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.CompHisPage=void 0;var a=t("../../../../../script/config/cmd"),l=t("../../../../../script/config/config"),u=t("../../../../../script/framework/i18n/i18n"),h=t("../../../../../script/framework/log/log"),d=t("../../../../../script/framework/res/res"),p=t("../../../../../script/pkg/currency"),f=t("./BaseView"),g=t("./CocosUtil"),y=t("./CompDissItem"),v=t("./HisLineAward"),b=t("./UIhistory"),_=cc._decorator,m=_.ccclass,S=_.property,w=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sprites=[],e.select=[[0,1,2],[0,4,3],[0,4,5],[3,4,2],[3,4,5],[3,7,5],[3,7,8],[6,7,5],[6,7,8],[6,10,8]],e.itemSpire={0:0,1:1,2:2,3:3,51:4,81:5,82:6,83:7},e}return i(e,t),e.prototype.onLoad=function(){g.default.traverseNodes(this.node,this.m_ui),this.m_ui.lb_jyno.color=b.UIhistory.themeColor,this.m_ui.lb_tz.color=b.UIhistory.themeColor,this.m_ui.lb_yl.color=b.UIhistory.themeColor,this.m_ui.lb_ye.color=b.UIhistory.themeColor,this.m_ui.lb_tz.getComponent(cc.Label).string=u.tcI18n.i18nLabel("History.HistoryMainPagePayout")+"("+p.currency.getSymbol()+")",this.m_ui.lb_yl.getComponent(cc.Label).string=u.tcI18n.i18nLabel("History.HistoryRecordTotalWin")+"("+p.currency.getSymbol()+")",this.m_ui.lb_ye.getComponent(cc.Label).string=u.tcI18n.i18nLabel("History.HistoryRecordBalance")+"("+p.currency.getSymbol()+")"},e.prototype.setData=function(t,e,n,o){var i=this;this._data=t;var r={};if(g.default.traverseNodes(this.node,this.m_ui),g.default.traverseLabels(this.node,r),this.m_ui.tip.active=!1,r.lb_order_no.string=t.round_no.substring(0,9)+"\n"+t.round_no.substring(9),null!=t.leftTimes&&t.leftTimes>-1&&t.leftTimes<7?r.lb_bet_num.string=p.currency.formatNoSymbol(0):r.lb_bet_num.string=p.currency.formatNoSymbol(t.bet),r.lb_profit_num.string=p.currency.formatNoSymbol(t.player_win_lose),r.lb_balance_num.string=p.currency.formatNoSymbol(t.balance),r.lb_betvalue.string=u.tcI18n.i18nLabel("History.HistoryBetSize")+" "+p.currency.formatWithSymbol(t.bet_size),r.lb_betrate.string=u.tcI18n.i18nLabel("History.HistoryBetLevel")+" "+(t.bet_multiple||"0"),this.ndIsAward.active=!0,this.m_ui.BgFortune.active=!1,this.m_ui.BgNor.active=!0,console.info("======>>>>>isFree",e),console.info("-------\x3e>>>>>",t),t.trigger&&(this.m_ui.tip.active=0==o,this.m_ui.BgFortune.active=!0,this.m_ui.BgNor.active=!1),t.hits&&t.hits.length>0)for(var c=0;c<9;c++)this.itemSetHide(c);else for(c=0;c<9;c++)this.itemSetShow(c);if(t.screen.forEach(function(t,e){i.itemSetData(t,e)}),(!t.hits||0==t.hits.length)&&t.prize-t.bet>0){for(c=0;c<9;c++)this.itemSetHide(c);var s=cc.instantiate(this.prfAwardLine);this.ndAwardLineParent.addChild(s),(a={}).win=t.prize,s.getComponent(v.HisLineAward).setData(a,0),t.screen.forEach(function(t,e){9==t.id&&i.itemSetShow(e)}),this.ndIsAward.active=!1}if(t.hits&&0!=t.hits.length)for(this.ndIsAward.active=!1,c=0;c<t.hits.length;c++){var a=t.hits[c];s=cc.instantiate(this.prfAwardLine),this.ndAwardLineParent.addChild(s),s.getComponent(y.CompDissItem).init(this.m_ui.kong);var l={dataArr:t,item:s,itemData:a};s.getComponent(y.CompDissItem).setData(l),s.getComponent(v.HisLineAward).setData(a,c);for(var d=[],f=0;f<3;f++){var b=this.select[a.lineId-1][f];d.push(b);var _=this.ndElementParent.getChildByName("UIHisItem_"+b),m=_.getChildByName("icon"),S=_.getChildByName("awardbg"),w=_.getChildByName("lab");m.color=cc.color(255,255,255,255),w.color=cc.color(255,255,255,255),S.active=!1}h.tcLog.log("tmp:",d)}},e.prototype.itemSetHide=function(t){return c(this,void 0,void 0,function(){var e,n,o,i;return s(this,function(){return e=this.ndElementParent.getChildByName("UIHisItem_"+t),n=e.getChildByName("icon"),o=e.getChildByName("awardbg"),i=e.getChildByName("lab"),n.color=cc.color(255,255,255,255),i.color=cc.color(255,255,255,255),o.active=!1,[2]})})},e.prototype.itemSetShow=function(t){return c(this,void 0,void 0,function(){var e,n,o,i;return s(this,function(){return e=this.ndElementParent.getChildByName("UIHisItem_"+t),n=e.getChildByName("icon"),o=e.getChildByName("awardbg"),i=e.getChildByName("lab"),n.color=cc.color(255,255,255,255),i.color=cc.color(255,255,255,255),o.active=!1,9==this._data.screen[t].id&&(n.getComponent(cc.Sprite).spriteFrame=this.sprites[9]),[2]})})},e.prototype.itemSetData=function(t,e){return c(this,void 0,void 0,function(){var n,o,i,r,c,u,f,g;return s(this,function(s){switch(s.label){case 0:return n=this.ndElementParent.getChildByName("UIHisItem_"+e),o=n.getChildByName("icon"),i=n.getChildByName("lab"),r=this.itemSpire[t.id],51==t.id&&(o.scale=1.15,o.y=10),h.tcLog.info("itemSetData===>>>>>>",o.getContentSize()),o.getComponent(cc.Sprite).spriteFrame=this.sprites[r],9!=t.id?[3,2]:(i.active=!0,c=t.multi,u="font1",(f=c/10)>=10&&f<50?u="font3":f>=50&&(u="font4"),[4,d.tcRes.load(l.gameHelper.getBundleName(a.cmd.SERVER_TYPE_FORTUNE_RABBIT),cc.Font,"artwork/font/"+u)]);case 1:return g=s.sent(),i.getComponent(cc.Label).font=g,i.getComponent(cc.Label).string=p.currency.formatNoSymbol(p.currency.accMul(t.multi,this._data.bet_size*this._data.bet_multiple)),[3,3];case 2:i.active=!1,i.getComponent(cc.Label).string="",s.label=3;case 3:return 9!=e&&11!=e||(n.active=!1),[2]}})})},r([S(cc.Node)],e.prototype,"ndElementParent",void 0),r([S(cc.Node)],e.prototype,"ndIsAward",void 0),r([S(cc.Prefab)],e.prototype,"prfAwardLine",void 0),r([S(cc.SpriteFrame)],e.prototype,"sprites",void 0),r([S(cc.Node)],e.prototype,"ndAwardLineParent",void 0),r([m],e)}(f.BaseView);n.CompHisPage=w,cc._RF.pop()},{"../../../../../script/config/cmd":void 0,"../../../../../script/config/config":void 0,"../../../../../script/framework/i18n/i18n":void 0,"../../../../../script/framework/log/log":void 0,"../../../../../script/framework/res/res":void 0,"../../../../../script/pkg/currency":void 0,"./BaseView":"BaseView","./CocosUtil":"CocosUtil","./CompDissItem":"CompDissItem","./HisLineAward":"HisLineAward","./UIhistory":"UIhistory"}],DateEx:[function(t,e,n){"use strict";cc._RF.push(e,"41ad3TGmUBKBICkI5+0I+pt","DateEx"),Object.defineProperty(n,"__esModule",{value:!0}),n.DateEx=void 0;var o=function(){function t(){}return t.getMonthDay=function(t,e){return new Date(t,e,0).getDate()},t.getMonthsAgo=function(t,e,n){var o=e+1-n,i=t;return o<=0&&(i-=1,o+=12),{year:i,month:o-=1}},t.getZeroTimestamp=function(t,e,n){return new Date(t,e,n).getTime()},t.getZeroTimestampSecond=function(t,e,n){return this.getZeroTimestamp(t,e,n)/1e3},t.getTodayZero=function(){var t=new Date;return this.getZeroTimestamp(t.getFullYear(),t.getMonth(),t.getDate())},t}();n.DateEx=o,cc._RF.pop()},{}],DateUtil:[function(t,e,n){"use strict";cc._RF.push(e,"584bdPZZXJITIvHXsH25b8y","DateUtil"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./CommonUtil"),i=t("./Globals"),r=t("./StringUtil"),c=function(){function t(){}return t.getSysTime=function(){return(new Date).getTime()},t.getGMTString=function(){var t=new Date,e=(t.getTime(),t.getTimezoneOffset());return"(GMT"+(e<0?"+":"-")+("00"+Math.abs(Math.floor(e/60))).slice(-2)+":"+("00"+Math.abs(e%60)).slice(-2)+")"},t.second2hms=function(t){var e=t,n=0,i=0;return e>60&&(n=Math.floor(e/60),e%=60,n>60&&(i=Math.floor(n/60),n%=60)),i>0?r.default.formatStr("%s:%s:%s",o.default.num00(i),o.default.num00(n),o.default.num00(e)):n>0?r.default.formatStr("%s:%s",o.default.num00(n),o.default.num00(e)):r.default.formatStr("00:%s",o.default.num00(e))},t.formatTime=function(t,e){if(void 0===e&&(e=1),i.isNil(t))return"";var n=new Date(1e3*parseInt(t)),r=n.getFullYear(),c=o.default.num00(n.getMonth()+1),s=o.default.num00(n.getDate()),a=o.default.num00(n.getHours()),l=o.default.num00(n.getMinutes()),u=o.default.num00(n.getSeconds());return e>1?r+"-"+c+"-"+s+"\n"+a+":"+l+":"+u:r+"-"+c+"-"+s+" "+a+":"+l+":"+u},t.formatTime1=function(t,e){if(void 0===e&&(e=1),i.isNil(t))return"";var n=new Date(1e3*parseInt(t)),r=(n.getFullYear(),o.default.num00(n.getMonth()+1)),c=o.default.num00(n.getDate());return o.default.num00(n.getHours())+":"+o.default.num00(n.getMinutes())+":"+o.default.num00(n.getSeconds())+"\n"+r+"/"+c},t.formatTime2=function(t){if(i.isNil(t))return"";var e=new Date(1e3*parseInt(t)),n=e.getFullYear(),r=o.default.num00(e.getMonth()+1),c=o.default.num00(e.getDate()),s=o.default.num00(e.getHours()),a=o.default.num00(e.getMinutes());return o.default.num00(e.getSeconds()),n+"/"+r+"/"+c+" "+s+":"+a},t.formatDay=function(t,e){var n=new Date(t);return n.getFullYear()+e+(n.getMonth()+1)+e+n.getDate()},t.getMonthDays=function(t,e){return new Date(t,e,0).getDate()},t.getTimestamp=function(t,e,n,i,r,c){var s=t+"-"+o.default.num00(e)+"-"+o.default.num00(n)+" "+i+":"+r+":"+c;return new Date(s).getTime()},t.getZeroTimestamp=function(t,e,n){return new Date(t,e,n).getTime()},t.getTodayZeroTimestamp=function(){var t=new Date;return this.getZeroTimestamp(t.getFullYear(),t.getMonth(),t.getDate())},t}();n.default=c,cc._RF.pop()},{"./CommonUtil":"CommonUtil","./Globals":"Globals","./StringUtil":"StringUtil"}],Globals:[function(t,e,n){"use strict";cc._RF.push(e,"a5f20TlK1hPVJUG2UHyS5ry","Globals"),Object.defineProperty(n,"__esModule",{value:!0}),n.isEmpty=n.isNil=n.GlobalData=void 0;var o=function(){function t(){}return t.isInBackgroud=!1,t.timeOfEnterBackground=0,t}();n.GlobalData=o,n.isNil=function(t){return null==t},n.isEmpty=function(t){return null==t||0===t||""===t},cc._RF.pop()},{}],HisLineAward:[function(t,e,n){"use strict";cc._RF.push(e,"f9d4bTu9sdKsp2m4fsmdFsY","HisLineAward");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0}),n.HisLineAward=void 0;var c=t("../../../../../script/framework/i18n/i18n"),s=t("../../../../../script/pkg/currency"),a=cc._decorator,l=a.ccclass,u=a.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lineImages=[],e}return i(e,t),e.prototype.setData=function(t){null!=t.lineId?(this.lb_idx.string="0"+t.lineId,this.icon_fuhao.spriteFrame=this.lineImages[t.lineId-1],this.lb_x10.string=s.currency.getSymbol()+" "+s.currency.formatWithSymbol(10*t.win)):(this.lb_idx.string=c.tcI18n.i18nLabel("history_line_award"),this.lb_x10.string=s.currency.getSymbol()+" "+s.currency.formatWithSymbol(t.win)),this.icon_fuhao.node.active=null!=t.lineId,this.dot.active=null!=t.lineId},r([u(cc.Label)],e.prototype,"lb_idx",void 0),r([u(cc.Sprite)],e.prototype,"icon_fuhao",void 0),r([u(cc.Label)],e.prototype,"lb_x10",void 0),r([u(cc.Node)],e.prototype,"dot",void 0),r([u(cc.SpriteFrame)],e.prototype,"lineImages",void 0),r([l],e)}(cc.Component);n.HisLineAward=h,cc._RF.pop()},{"../../../../../script/framework/i18n/i18n":void 0,"../../../../../script/pkg/currency":void 0}],MoneyUtils:[function(t,e,n){"use strict";cc._RF.push(e,"59734FxoaBJNp3rxrNkiFcy","MoneyUtils"),Object.defineProperty(n,"__esModule",{value:!0}),n.MoneyUtil=void 0;var o=function(){function t(){}return t.Format=function(t){var e=t.toFixed(2).toString().split(".");return e[0]=e[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),e.join(".")},t.RunScoreAction=function(e,n,o,i,r,c){var s=this,a={value:o},l=cc.tween(a).to(n,{value:i},{progress:function(n,o,i,r){var c=1-Math.cos(r*Math.PI*.5),a=t.lerp(n,o,c);return e.string=s.Format(a),a},onComplete:function(){e.string=s.Format(i)},easing:r});return null!=c&&l.call(function(){c(e)}),l},t.lerp=function(t,e,n){return t+(e-t)*n},t}();n.MoneyUtil=o,cc._RF.pop()},{}],MoneyUtil:[function(t,e,n){"use strict";cc._RF.push(e,"d39f6qMB2ZGLarWxSflNf4+","MoneyUtil"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){}return t.currencySymbol=function(){return"\uffe5"},t.rmbYuan=function(e){return e/t.BeseGold},t.rmbServer=function(e){return Math.floor(e*t.BeseGold)},t.rmbStr=function(t){var e=this.rmbYuan(t);return this.formatGold(e)},t.formatGold=function(t,e){void 0===e&&(e=2);var n=t<0,o=(t=Math.abs(t)).toString(),i=o.indexOf("."),r=o.substring(0,i),c=o.substring(i+1);if(i<0&&(r=o,c=""),r.length>3){for(var s="",a=0,l=r.length-1;l>=0;l--)s=r[l]+s,++a%3==0&&0!=l&&(s=","+s);r=s}return 0==c.length?c="00":1==c.length?c+="0":c=c.substring(0,2),n?"-"+r+"."+c:r+"."+c},t.formatGoldEx=function(t,e){if(void 0===e&&(e=2),t===Math.ceil(t))return t+".00";var n=t.toString(),o=n.indexOf(".");if(o<0)return n+".00";var i=n.length-1-o;return 1==i?n+"0":2==i?n:n.substring(0,o+e+1)},t.BeseGold=1e4,t}();n.default=o,cc._RF.pop()},{}],NodeEx:[function(t,e,n){"use strict";cc._RF.push(e,"4ab36Jsa/1J8ZB761S/+MCk","NodeEx");var o=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0}),n.NodeEx=void 0;var i=cc._decorator,r=i.ccclass,c=(i.property,function(){function t(){}return t.addClick=function(t,e){t.on(cc.Node.EventType.TOUCH_START,function(){t._pressed=!0},t),t.on(cc.Node.EventType.TOUCH_END,function(n){var o=t._pressed;if(t._pressed=!1,o){var i=n.touch.getStartLocation(),r=n.touch.getLocation();Math.abs(r.x-i.x)+Math.abs(r.y-i.y)<10&&e&&e(n)}},t),t.on(cc.Node.EventType.TOUCH_CANCEL,function(){t._pressed=!1},t)},t.getWorldPosition=function(t,e){var n=t;return e?n.convertToWorldSpaceAR(e):n.convertToWorldSpaceAR(cc.Vec3.ZERO)},t.getLocalPosition=function(t,e){return t.convertToNodeSpaceAR(e)},t.getSize=function(t){return t.getContentSize().clone()},t.setSize=function(t,e,n){var o=t;null!=e?null!=n?o.setContentSize(e,n):o.width=e:o.height=n},t.getAnchorPoint=function(t){return t.getContentSize().clone()},t.setPosition=function(t,e,n){var o=t.position;t.position=null!=e?null!=n?new cc.Vec3(e,n,o.z):new cc.Vec3(e,o.y,o.z):new cc.Vec3(o.x,n,o.z)},t.setOpacity=function(t,e){var n=t,o=n.color;n.color=new cc.Color(o.r,o.g,o.b,e)},t.recursionColor=function(t,e){var n=this;if(0!=t.children.length){var o=null;t.children.forEach(function(t){if(null!=(o=t)){if(o.__default_color)return o.color=e,void n.recursionColor(t,e);if(!o.__first_change){var i=o.color.equals(cc.Color.WHITE);if(o.__default_color=i,i||(o.__original_color=o.color.clone()),o.__first_change=!0,o.__default_color)return o.color=e,void n.recursionColor(t,e)}var r=o.__original_color,c=e.r/255*r.r,s=e.g/255*r.g,a=e.b/255*r.b,l=e.a/255*r.a;o.color=new cc.Color(c,s,a,l)}n.recursionColor(t,e)})}},t.setColor=function(t,e){t&&(t.color=e)},o([r],t)}());n.NodeEx=c,cc._RF.pop()},{}],PgAutorotation:[function(t,e,n){"use strict";cc._RF.push(e,"1d96dHsu2pB/oJMa3Gf9Hqf","PgAutorotation");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var c=t("../../../../../script/framework/audio/audio"),s=t("../../../../../script/framework/log/log"),a=t("../../../../../script/pkg/currency"),l=t("./PgEvent"),u=cc._decorator,h=u.ccclass,d=(u.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.clickNums=[10,30,50,80,1e3],e.labColor={select:cc.color(255,200,36,255),unselect:cc.color(255,255,255,255)},e.showType=!1,e.spinNum=0,e.slider1Mum=0,e.slider2Mum=0,e.slider3Mum=0,e}return i(e,t),e.prototype.onLoad=function(){var t,e=this;this.body=cc.find("body/autorotation",this.node),this.autorotationBg=cc.find("body/autorotationBg",this.node),this.layoutAutoRotaion=cc.find("body/autorotation",this.node).getComponent(cc.Layout),this.btnClose=cc.find("body/autorotation/top/btnClose",this.node),this.maskBtnStart=cc.find("body/autorotation/down/maskBtnStart",this.node),this.maskBtnStart.active=!0,this.labelBonus=cc.find("body/autorotation/down/nodeBonus/label",this.node).getComponent(cc.Label),this.labelBet=cc.find("body/autorotation/down/nodeBet/label",this.node).getComponent(cc.Label),this.labelWin=cc.find("body/autorotation/down/nodeWin/label",this.node).getComponent(cc.Label),this.clickBtns=cc.find("body/autorotation/mid/one/buttons",this.node),this.startBtn=cc.find("body/autorotation/down/startBtn",this.node),this.startMask=cc.find("mask",this.node),this.showType=!1,this.moveUp(),this.btnClose.on("click",function(){window.changeTrophiesIconShow&&window.changeTrophiesIconShow(!0),c.uAudio.getInstance().playEffect(e.btnClickSound||c.AudioClipName.CLICKBTN),cc.tween(e.body).set({position:cc.v3(0,0,0)}).to(.3,{position:cc.v3(0,-631,0)}).start(),cc.tween(e.autorotationBg).set({position:cc.v3(0,-0,0)}).to(.3,{position:cc.v3(0,-631,0)}).start(),cc.tween(e.startMask).set({opacity:128}).to(.5,{opacity:0}).call(function(){e.node.destroy()}).start()}),this.startMask.on("click",function(){window.changeTrophiesIconShow&&window.changeTrophiesIconShow(!0),cc.tween(e.body).set({position:cc.v3(0,0,0)}).to(.3,{position:cc.v3(0,-631,0)}).start(),cc.tween(e.autorotationBg).set({position:cc.v3(0,-0,0)}).to(.3,{position:cc.v3(0,-631,0)}).start(),cc.tween(e.startMask).set({opacity:128}).to(.5,{opacity:0}).call(function(){e.node.destroy()}).start()}),null===(t=this.clickBtns)||void 0===t||t.children.forEach(function(t,n){t.on("click",function(){c.uAudio.getInstance().playEffect(e.btnClickSound||c.AudioClipName.CLICKBTN),console.log(n),e.spinNum=e.clickNums[n],e.maskBtnStart.active=!1,e.onSetColor(n)},e)}),this.startBtn.on("click",function(){c.uAudio.getInstance().playEffect(e.btnClickSound||c.AudioClipName.CLICKBTN),e.callBack&&e.callBack(e.spinNum),e.sliderMumChangeCallback&&e.sliderMumChangeCallback({slider1Mum:e.slider1Mum,slider2Mum:e.slider2Mum,slider3Mum:e.slider3Mum}),cc.systemEvent.emit(l.pgGameEvent.startAutoSpin),e.moveDown()})},e.prototype.show=function(t,e,n,o,i){var r=this;window.changeTrophiesIconShow&&window.changeTrophiesIconShow(!1),this.node.active=!0,cc.tween(this.body).set({position:cc.v3(0,-631,0)}).to(.3,{position:cc.v3(0,0,0)}).start(),cc.tween(this.autorotationBg).set({position:cc.v3(0,-631,0)}).to(.3,{position:cc.v3(0,0,0)}).start(),this.scheduleOnce(function(){cc.tween(r.autorotationBg).set({opacity:255}).to(.6,{opacity:0}).start()},.4),cc.tween(this.startMask).set({opacity:0}).to(.5,{opacity:128}).start(),this.init(t,e,n,o,i)},e.prototype.init=function(t,e,n,o,i){s.tcLog.info("autoRotation",t,e,n),this.labelBonus&&(this.labelBonus.string=""+a.currency.getSymbol()+a.currency.format(t)),this.labelBet&&(this.labelBet.string=""+a.currency.getSymbol()+a.currency.format(e)),this.labelWin&&(this.labelWin.string=""+a.currency.getSymbol()+a.currency.format(n)),this.BetCount=e,this.callBack=o,this.btnClickSound=i},e.prototype.setSliderCallback=function(t){this.sliderMumChangeCallback=t},e.prototype.slider1Fun=function(t){t&&(this.maskBtnStart.active=!1,this.slider1Deal(t))},e.prototype.slider1Deal=function(t){var e=t.node.getComponent(cc.Slider).progress*t.node.width,n=this.BetCount*this.spinNum/1e4/2;this.slider1Mum=n,this.slider1Mum+=e/750*n},e.prototype.slider2Fun=function(t){this.maskBtnStart.active=!1,t.node.getComponent(cc.Slider).progress,t.node.width},e.prototype.slider3Fun=function(t){this.maskBtnStart.active=!1,t.node.getComponent(cc.Slider).progress,t.node.width},e.prototype.onSetColor=function(t){var e,n,o=this;null===(n=null===(e=this.clickBtns)||void 0===e?void 0:e.children)||void 0===n||n.forEach(function(e,n){e.getChildByName("num").color=n==t?o.labColor.select:o.labColor.unselect})},e.prototype.moveUp=function(){},e.prototype.moveDown=function(){window.changeTrophiesIconShow&&window.changeTrophiesIconShow(!0),this.node.destroy()},r([h],e)}(cc.Component));n.default=d,cc._RF.pop()},{"../../../../../script/framework/audio/audio":void 0,"../../../../../script/framework/log/log":void 0,"../../../../../script/pkg/currency":void 0,"./PgEvent":"PgEvent"}],PgEvent:[function(t,e,n){"use strict";cc._RF.push(e,"a8d76c+/odOSIi22ueqvyjf","PgEvent"),Object.defineProperty(n,"__esModule",{value:!0}),n.pgGameEvent=void 0,function(t){t.updateBonus="pgGameEvent_updateBonus",t.updateCurBet="pgGameEvent_updateCurBet",t.updateCurWinCount="pgGameEvent_updateCurWinCount",t.goback="pgGameEvent_goback",t.clickSpin="pgGameEvent_clickSpin",t.subBet="pgGameEvent_subBet",t.addBet="pgGameEvent_addBet",t.quikStopAutoSpin="pgGameEvent_quikStopAutoSpin",t.betPanel="pgGameEvent_betPanel",t.startAutoSpin="pgGameEvent_startAutoSpin",t.openBetPanel="pgGameEvent_openBetPanel",t.ref_record_filter="ref_record_filter",t.ui_req_loading_complete="ui_req_loading_complete",t.open_history_view="open_history_view",t.close_history_view="close_history_view",t.close_history="close_history",t.ui_show_hisdetail_tip="ui_show_hisdetail_tip",t.ui_close_hisdetail_tip="ui_close_hisdetail_tip",t.open_history_detail="open_history_detail",t.close_history_detail="close_history_detail",t.open_his_selectdate_view="open_his_selectdate_view",t.close_his_selectdate_view="close_his_selectdate_view",t.open_his_dateSelect_view="open_his_dateSelect_view",t.close_his_dateSelect_view="close_his_dateSelect_view"}(n.pgGameEvent||(n.pgGameEvent={})),cc._RF.pop()},{}],PgGameControlPanelLogic:[function(t,e,n){"use strict";cc._RF.push(e,"8afa93kI/ZBVKq9KpQSipbo","PgGameControlPanelLogic");var o=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},i=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function c(t){try{a(o.next(t))}catch(e){r(e)}}function s(t){try{a(o.throw(t))}catch(e){r(e)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(c,s)}a((o=o.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var n,o,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return a([t,e])}}function a(r){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,o=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(s){r=[6,s],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.EBtnSpineStatus=void 0;var c=t("./PgEvent"),s=t("./PgAutorotation"),a=t("./pgGameBetSettingView"),l=t("./PgGameControlPanelView"),u=t("./PgGameRuleView"),h=t("./PgGameWalletView"),d=t("../../../../../script/app/env"),p=t("../../../../../script/framework/log/log"),f=t("../../../../../script/framework/audio/audio"),g=t("../../../../../script/config/config"),y=t("../../../../../script/framework/res/res"),v=t("../../../../../script/framework/i18n/i18n"),b=t("../../../../../script/descriptor/descriptor"),_=t("../../../../../script/pkg/currency"),m=t("../../../../../script/event/event"),S=t("./PgGameHistoryView"),w=cc._decorator;w.ccclass,w.property,function(t){t[t.ACTIVE_NORMAL=0]="ACTIVE_NORMAL",t[t.ACTIVE_RUN=1]="ACTIVE_RUN",t[t.UNACTIVE_NORMAL=2]="UNACTIVE_NORMAL",t[t.UNACTIVE_RUN=3]="UNACTIVE_RUN",t[t.ACTIVE_STOP=4]="ACTIVE_STOP"}(n.EBtnSpineStatus||(n.EBtnSpineStatus={}));var B=function(){function t(t,e){this.autoSpinNum=0,this.curWin=0,this.bQuickModel=!1,this.curGameId=0,this.betTimes=[1,2,3,4,5,6,7,8,9,10],this.betTotals=[],this.curBetIndex=d.env.curGameData.betIndex,this.betTotalsForQuickBtn=[],this.betOfList=[],this.betMultiple=[],this.stopAudioSpinCondition={slider1Mum:0,slider2Mum:0,slider3Mum:0},this.autoModeWinAll=0,this.autoModeWinOnce=0,this.curGameId=t,this.gameLogic=e,this.init(),this.show()}return t.prototype.init=function(){this.initBetData()},t.prototype.setCurBetIndex=function(t){this.curBetIndex=t},t.prototype.setBetTimes=function(t){this.betTimes=t},t.prototype.setBetOfList=function(t){this.betOfList=t},t.prototype.show=function(){var t,e;return i(this,void 0,void 0,function(){return r(this,function(){if(this.viewNode=null===(t=this.gameLogic)||void 0===t?void 0:t.getControlPanelNode(),!this.viewNode)return p.tcLog.error("PgGameControlPanelLogic.show,viewNode = null"),[2];try{this.view=this.viewNode.addComponent(l.default),p.tcLog.info("show===>>>>>"),null===(e=this.view)||void 0===e||e.updateBtnQuickModeStatus(this.bQuickModel,!0),this.setBonus(d.env.curGameData.balance),this.setBetNum(this.getBetNum()),this.setWinCount(0),this.bindClickEvent()}catch(n){p.tcLog.error("PgGameControlPanelLogic.show error:"+n)}return[2]})})},t.prototype.bindClickEvent=function(){var t,e,n,o,i,r,c,s,a,l,u,h,d,p,f;null===(t=this.view)||void 0===t||t.bindClickBtnBonus(this.onClickBtnBonus.bind(this)),null===(e=this.view)||void 0===e||e.bindClickBtnWin(this.onClickBtnWin.bind(this)),null===(n=this.view)||void 0===n||n.bindClickBtnBet(this.onClickBtnBet.bind(this)),null===(o=this.view)||void 0===o||o.bindClickBtnSound(this.onClickBtnSound.bind(this)),null===(i=this.view)||void 0===i||i.bindClickBtnPaytable(this.onClickBtnPaytable.bind(this)),null===(r=this.view)||void 0===r||r.bindClickBtnRule(this.onClickBtnRule.bind(this)),null===(c=this.view)||void 0===c||c.bindClickBtnHistory(this.onClickBtnHistory.bind(this)),null===(s=this.view)||void 0===s||s.bindClickBtnQickMode(this.onClickBtnQickMode.bind(this)),null===(a=this.view)||void 0===a||a.bindClickBtnSubBet(this.onClickBtnSubBet.bind(this)),null===(l=this.view)||void 0===l||l.bindClickBtnAddBet(this.onClickBtnAddBet.bind(this)),null===(u=this.view)||void 0===u||u.bindClickBtnStartAutoMode(this.onClickBtnStartAutoMode.bind(this)),null===(h=this.view)||void 0===h||h.bindClickBtnSpin(this.onClickBtnSpin.bind(this)),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown.bind(this),this),null===(d=this.view)||void 0===d||d.bindClickBtnStopAutoMode(this.onClickBtnStopAutoMode.bind(this)),null===(p=this.view)||void 0===p||p.bindClickBtnOpenSetting(this.onClickBtnOpenSetting.bind(this)),null===(f=this.view)||void 0===f||f.bindClickBtnCloseSetting(this.onClickBtnCloseSetting.bind(this))},t.prototype.onClickBtnBonus=function(){var t;return i(this,void 0,void 0,function(){var e,n,o;return r(this,function(i){switch(i.label){case 0:if(f.uAudio.getInstance().playEffect(this.gameLogic.getClickBtnSound()),this.payWalletView)return[3,4];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,y.tcRes.load("PGGameRes",cc.Prefab,"prefab/pgGameWallet")];case 2:return e=i.sent(),(n=cc.instantiate(e)).setParent(g.config.uiNode.dialog),this.payWalletView=n.addComponent(h.default),[3,4];case 3:return o=i.sent(),p.tcLog.error("PgGameControlPanellogic show pgGameWallet error,"+o),[3,4];case 4:return null===(t=this.payWalletView)||void 0===t||t.show(),[2]}})})},t.prototype.onClickBtnWin=function(){f.uAudio.getInstance().playEffect(this.gameLogic.getClickBtnSound()),this.onClickBtnHistory()},t.prototype.onClickBtnBet=function(){var t,e,n;return i(this,void 0,void 0,function(){var o,i,c,s=this;return r(this,function(r){switch(r.label){case 0:if(f.uAudio.getInstance().playEffect(this.gameLogic.getClickBtnSound()),this.betSettingView)return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,y.tcRes.load("PGGameRes",cc.Prefab,"prefab/pgGameBetSetting")];case 2:return o=r.sent(),(i=cc.instantiate(o)).setParent(g.config.uiNode.dialog),this.betSettingView=i.addComponent(a.default),this.betSettingView.init(this.gameLogic.getBetSizes(),this.betTimes,this.betTotals,null===(t=this.gameLogic)||void 0===t?void 0:t.getPayTimes(),null===(e=this.gameLogic)||void 0===e?void 0:e.getClickBtnSound()),this.betSettingView.setBetCallback(function(t){s.curBetIndex=t,s.setBetNum(s.getBetNum()),p.tcLog.info("PgGameControlPaneLogic bet:",s.curBetIndex)}),[3,4];case 3:return c=r.sent(),p.tcLog.error("PgGameControlPanellogic show pgGameWallet error,"+c),[3,4];case 4:return null===(n=this.betSettingView)||void 0===n||n.show(this.getBetNum(),this.curWin),[2]}})})},t.prototype.onClickBtnStartAutoMode=function(){var t;return i(this,void 0,void 0,function(){var e,n,o,i,c=this;return r(this,function(r){switch(r.label){case 0:f.uAudio.getInstance().playEffect(this.gameLogic.getClickBtnSound()),r.label=1;case 1:return r.trys.push([1,3,,9]),[4,y.tcRes.load("PGGameRes",cc.Prefab,"prefab/pgGameAutorotation")];case 2:return n=r.sent(),(o=cc.instantiate(n)).setParent(g.config.uiNode.dialog),this.PgAutorotationView=o.addComponent(s.default),this.PgAutorotationView.setSliderCallback(function(t){c.stopAudioSpinCondition=t}),null===(t=this.PgAutorotationView)||void 0===t||t.show(d.env.curGameData.balance,this.getBetNum(),this.curWin,this.setSpinNumFun.bind(this),this.gameLogic.getClickBtnSound()),[3,9];case 3:if(e=r.sent(),p.tcLog.error("PgGameControlPanellogic show pgGameWallet error,"+e),f.uAudio.getInstance().playEffect(this.gameLogic.getClickBtnSound()),this.PgAutorotationView)return[3,8];r.label=4;case 4:return r.trys.push([4,6,,7]),[4,y.tcRes.load("PGGameRes",cc.Prefab,"prefab/pgGameAutorotation")];case 5:return n=r.sent(),(o=cc.instantiate(n)).setParent(g.config.uiNode.dialog),this.PgAutorotationView=o.addComponent(s.default),this.PgAutorotationView.init(d.env.curGameData.balance,this.getBetNum(),this.curWin,this.setSpinNumFun.bind(this),this.gameLogic.getClickBtnSound()),this.PgAutorotationView.setSliderCallback(function(t){c.stopAudioSpinCondition=t}),[3,7];case 6:return i=r.sent(),p.tcLog.error("PgGameControlPanellogic show pgGameWallet error,"+i),[3,7];case 7:return[3,8];case 8:return[3,9];case 9:return[2]}})})},t.prototype.onClickBtnSound=function(){var t,e;f.uAudio.getInstance().playEffect(this.gameLogic.getClickBtnSound());var n=g.gameHelper.changeSoundStatus(null===(t=this.gameLogic)||void 0===t?void 0:t.getBgMusic());null===(e=this.view)||void 0===e||e.onClickBtnSound(n)},t.prototype.onClickBtnPaytable=function(){var t,e,n,o;return i(this,void 0,void 0,function(){var i,c,s;return r(this,function(r){switch(r.label){case 0:if(f.uAudio.getInstance().playEffect(this.gameLogic.getClickBtnSound()),this.payTableView)return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,y.tcRes.load("PGGameRes",cc.Prefab,"prefab/pgGameRuleView")];case 2:return i=r.sent(),(c=cc.instantiate(i)).setParent(g.config.uiNode.dialog),this.payTableView=c.addComponent(u.default),(null===(t=this.gameLogic)||void 0===t?void 0:t.getPayTableNodeURL)?(this.payTableView.addContent(this.curGameId,v.tcI18n.i18nLabel("SlotRulesShared.PaytableTitle"),null===(e=this.gameLogic)||void 0===e?void 0:e.getPayTableNodeURL(),null===(n=this.gameLogic)||void 0===n?void 0:n.getClickBtnSound()),[3,4]):(p.tcLog.error("PgGameContorlPanelLogic Does not implement interface PgGameLogicHandler"),[2]);case 3:return s=r.sent(),p.tcLog.error("PgGameControlPanellogic show pgGameWallet error,"+s),[3,4];case 4:return null===(o=this.payTableView)||void 0===o||o.show(),[2]}})})},t.prototype.onClickBtnRule=function(){var t,e,n,o;return i(this,void 0,void 0,function(){var i,c,s;return r(this,function(r){switch(r.label){case 0:if(f.uAudio.getInstance().playEffect(this.gameLogic.getClickBtnSound()),this.ruleView)return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,y.tcRes.load("PGGameRes",cc.Prefab,"prefab/pgGameRuleView")];case 2:return i=r.sent(),(c=cc.instantiate(i)).setParent(g.config.uiNode.dialog),this.ruleView=c.addComponent(u.default),(null===(t=this.gameLogic)||void 0===t?void 0:t.getRuleNodeURL)?(this.ruleView.addContent(this.curGameId,v.tcI18n.i18nLabel("GameRule.RulesTitle"),null===(e=this.gameLogic)||void 0===e?void 0:e.getRuleNodeURL(),null===(n=this.gameLogic)||void 0===n?void 0:n.getClickBtnSound()),[3,4]):(p.tcLog.error("PgGameContorlPanelLogic Does not implement interface PgGameLogicHandler"),[2]);case 3:return s=r.sent(),p.tcLog.error("PgGameControlPanellogic show pgGameWallet error,"+s),[3,4];case 4:return null===(o=this.ruleView)||void 0===o||o.show(),[2]}})})},t.prototype.onClickBtnHistory=function(){var t,e,n,o;return i(this,void 0,void 0,function(){var i,c,s;return r(this,function(r){switch(r.label){case 0:if(f.uAudio.getInstance().playEffect(this.gameLogic.getClickBtnSound()),this.historyView)return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,y.tcRes.load("PGGameRes",cc.Prefab,"prefab/history/UIhistory")];case 2:return i=r.sent(),(c=cc.instantiate(i)).setParent(g.config.uiNode.dialog),this.historyView=c.addComponent(S.default),(null===(t=this.gameLogic)||void 0===t?void 0:t.getHistoryNodeURL)?(this.historyView.addContent(this.curGameId,v.tcI18n.i18nLabel("v2_pgGame_bottom_history"),null===(e=this.gameLogic)||void 0===e?void 0:e.getHistoryNodeURL(),null===(n=this.gameLogic)||void 0===n?void 0:n.getClickBtnSound()),[3,4]):(p.tcLog.error("PgGameContorlPanelLogic Does not implement interface PgGameLogicHandler"),[2]);case 3:return s=r.sent(),p.tcLog.error("PgGameControlPanellogic show onClickBtnHistory error,"+s),[3,4];case 4:return null===(o=this.historyView)||void 0===o||o.show(!1),[2]}})})},t.prototype.onClickBtnQickMode=function(){var t;f.uAudio.getInstance().playEffect(this.gameLogic.getClickBtnSound()),this.bQuickModel=!this.bQuickModel,null===(t=this.view)||void 0===t||t.updateBtnQuickModeStatus(this.bQuickModel,!1)},t.prototype.onClickBtnSubBet=function(){var t,e;if(p.tcLog.info("-------------------------onClickBtn"),f.uAudio.getInstance().playEffect(this.gameLogic.getClickBtnSound()),0==this.curBetIndex)return cc.systemEvent.emit(m.event.subBetEvent,v.tcI18n.i18nLabel("SettingMenu.SmallestBet")),void(null===(t=this.view)||void 0===t||t.updateCurBet(this.getBetNum(),!0,!1,!0));for(var n=this.betTotals[this.curBetIndex],o=this.betTotalsForQuickBtn.length-1;o>=0;--o)if(this.betTotalsForQuickBtn[o]<n){n=this.betTotalsForQuickBtn[o];break}this.curBetIndex=this.betTotals.indexOf(n);var i=n==this.betTotalsForQuickBtn[0],r=n==this.betTotalsForQuickBtn[this.betTotalsForQuickBtn.length-1];null===(e=this.view)||void 0===e||e.updateCurBet(this.getBetNum(),i,r,!0)},t.prototype.onClickBtnAddBet=function(){var t,e;f.uAudio.getInstance().playEffect(this.gameLogic.getClickBtnSound());var n=this.betTotals[this.curBetIndex];if(n>=this.betTotalsForQuickBtn[this.betTotalsForQuickBtn.length-1])return cc.systemEvent.emit(m.event.addBetEvent,v.tcI18n.i18nLabel("SettingMenu.BiggestBet")),void(null===(t=this.view)||void 0===t||t.updateCurBet(this.getBetNum(),!1,!0,!0));for(var o=0;o<this.betTotalsForQuickBtn.length;++o)if(this.betTotalsForQuickBtn[o]>n){n=this.betTotalsForQuickBtn[o];break}this.curBetIndex=this.betTotals.indexOf(n);var i=n==this.betTotalsForQuickBtn[0],r=n==this.betTotalsForQuickBtn[this.betTotalsForQuickBtn.length-1];null===(e=this.view)||void 0===e||e.updateCurBet(this.getBetNum(),i,r,!0)},t.prototype.upateBtnAddAndSubBetGray=function(t){var e,n;null===(e=this.view)||void 0===e||e.setBtnBetSubGray(0==this.curBetIndex),null===(n=this.view)||void 0===n||n.setBtnBetAddGray(t==this.betTotalsForQuickBtn.length-1)},t.prototype.onKeyDown=function(t){var e;t.keyCode===cc.macro.KEY.space&&(null===(e=this.view)||void 0===e?void 0:e.isBtnSpinClick())&&this.onClickBtnSpin()},t.prototype.onClickBtnSpin=function(){var t;p.tcLog.info("---------------------onClickBtnSpin"),null===(t=this.view)||void 0===t||t.playBtnSpinEffect(),cc.systemEvent.emit(c.pgGameEvent.clickSpin)},t.prototype.onClickBtnStopAutoMode=function(){f.uAudio.getInstance().playEffect(this.gameLogic.getClickBtnSound()),this.autoSpinNum=0,this.showBtnSpin(),cc.systemEvent.emit(c.pgGameEvent.quikStopAutoSpin)},t.prototype.onClickBtnOpenSetting=function(){var t;f.uAudio.getInstance().playEffect(this.gameLogic.getClickBtnSound()),null===(t=this.view)||void 0===t||t.updateNodeBtnsStatus(!1)},t.prototype.onClickBtnCloseSetting=function(){var t;f.uAudio.getInstance().playEffect(this.gameLogic.getClickBtnSound()),null===(t=this.view)||void 0===t||t.updateNodeBtnsStatus(!0)},t.prototype.setSpinNumFun=function(t,e){this.autoSpinNum=t||0,null!=e&&this.checkStopAutoCondition(e)},t.prototype.getSpinNum=function(){return this.autoSpinNum},t.prototype.showBtnSpin=function(){var t;null===(t=this.view)||void 0===t||t.setBtnSpinStatus(!0)},t.prototype.showAutoSpin=function(){var t;null===(t=this.view)||void 0===t||t.setBtnSpinStatus(!1,this.autoSpinNum)},t.prototype.getBetNum=function(){return p.tcLog.info("getBetNum==>>>>>",this.betTotals),0==this.betTotals.length&&this.initBetData(),this.betTotals[this.curBetIndex]||0},t.prototype.initBetNum=function(t,e){var n=Number(t)*Number(e)*5;p.tcLog.info("initBetNum===>>>>>>",n);for(var o=0,i=0;i<this.betTotals.length;i++)n==this.betTotals[i]&&(o=i);return o},t.prototype.getBetMultiple=function(t){for(var e,n=this.gameLogic.getBetSizes(),o={bet_size:0,bet_mul:0},i=0;i<n.length;++i)for(var r=0;r<this.betTimes.length;++r){var c=_.currency.accMul(n[i],this.betTimes[r]);if((c=_.currency.accMul(c,(null===(e=this.gameLogic)||void 0===e?void 0:e.getPayTimes())||0))==t){o.bet_size=n[i]/100,o.bet_mul=this.betTimes[r];break}}return o},t.prototype.setBetNum=function(t,e){var n;void 0===e&&(e=!1);var o=t==this.betTotalsForQuickBtn[0],i=t==this.betTotalsForQuickBtn[this.betTotalsForQuickBtn.length-1];null===(n=this.view)||void 0===n||n.updateCurBet(t,o,i,e)},t.prototype.setBonus=function(t){var e;t<0&&p.tcLog.error("value",t),null===(e=this.view)||void 0===e||e.updateBouns(t)},t.prototype.setWinCount=function(t){var e;this.curWin=t,null===(e=this.view)||void 0===e||e.updateCurWinCount(t)},t.prototype.IsQuickModel=function(){return this.bQuickModel},t.prototype.initBetData=function(){var t,e,n=this;if(null===(t=this.gameLogic)||void 0===t?void 0:t.getPayTimes){this.betTotals.length=0,this.betMultiple.length=0;for(var o=this.gameLogic.getBetSizes(),i=0;i<o.length;++i)for(var r=0;r<this.betTimes.length;++r){var c=_.currency.accMul(o[i],this.betTimes[r]);if(c=_.currency.accMul(c,(null===(e=this.gameLogic)||void 0===e?void 0:e.getPayTimes())||0),!this.betTotals.includes(c)){this.betTotals.push(c);var s={bet_size:o[i]/100,bet_mul:this.betTimes[r]};this.betMultiple.push(s)}}this.betTotals.sort(function(t,e){return t-e}),this.betTotalsForQuickBtn.length=0,this.betOfList.forEach(function(t){n.betTotalsForQuickBtn.push(n.betTotals[t-1])}),p.tcLog.info("====>>>>>>>>betTotalsForQuickBtn",this.betTotalsForQuickBtn)}else p.tcLog.error("PgGameContorlPanelLogic Does not implement interface PgGameLogicHandler")},t.prototype.setBtnSpineStatus=function(t){var e,n;p.tcLog.info("\u8bbe\u7f6espine\u6309\u94ae\u72b6\u6001===>>>>>",t),this.getSpinNum()>0?null===(e=this.view)||void 0===e||e.setAutoBtnSpinStaus():null===(n=this.view)||void 0===n||n.setBtnSpineStatus(t)},t.prototype.checkStopAutoCondition=function(t){if(p.tcLog.info("PgGameContorlPanelLogic.checkStopAduio :"+t),!(t<0)){var e=t-this.getBetNum();this.autoModeWinAll+=e,this.autoModeWinOnce=t,(0!==this.stopAudioSpinCondition.slider1Mum&&this.autoModeWinAll/1e4<-this.stopAudioSpinCondition.slider1Mum||0!==this.stopAudioSpinCondition.slider2Mum&&this.autoModeWinAll/1e4>=this.stopAudioSpinCondition.slider2Mum||0!==this.stopAudioSpinCondition.slider3Mum&&this.autoModeWinOnce/1e4>=this.stopAudioSpinCondition.slider3Mum)&&(this.autoSpinNum=0,this.showBtnSpin(),cc.systemEvent.emit(c.pgGameEvent.quikStopAutoSpin))}},t.prototype.resetAutoData=function(){this.autoModeWinAll=0,this.autoModeWinOnce=0},t.prototype.clear=function(){var t,e,n,o,i,r,c,s,a,l,u;this.gameLogic=void 0,null===(t=this.viewNode)||void 0===t||t.destroy(),this.view=void 0,null===(n=null===(e=this.ruleView)||void 0===e?void 0:e.node)||void 0===n||n.destroy(),null===(i=null===(o=this.payTableView)||void 0===o?void 0:o.node)||void 0===i||i.destroy(),null===(c=null===(r=this.payWalletView)||void 0===r?void 0:r.node)||void 0===c||c.destroy(),null===(a=null===(s=this.PgAutorotationView)||void 0===s?void 0:s.node)||void 0===a||a.destroy(),this.autoSpinNum=0,this.curWin=0,null===(u=null===(l=this.betSettingView)||void 0===l?void 0:l.node)||void 0===u||u.destroy(),this.bQuickModel=!1,this.curGameId=0},o([b.throttle(300)],t.prototype,"onClickBtnQickMode",null),o([b.throttle(300)],t.prototype,"onClickBtnStopAutoMode",null),o([b.throttle(300)],t.prototype,"onClickBtnOpenSetting",null),o([b.throttle(300)],t.prototype,"onClickBtnCloseSetting",null),t}();n.default=B,cc._RF.pop()},{"../../../../../script/app/env":void 0,"../../../../../script/config/config":void 0,"../../../../../script/descriptor/descriptor":void 0,"../../../../../script/event/event":void 0,"../../../../../script/framework/audio/audio":void 0,"../../../../../script/framework/i18n/i18n":void 0,"../../../../../script/framework/log/log":void 0,"../../../../../script/framework/res/res":void 0,"../../../../../script/pkg/currency":void 0,"./PgAutorotation":"PgAutorotation","./PgEvent":"PgEvent","./PgGameControlPanelView":"PgGameControlPanelView","./PgGameHistoryView":"PgGameHistoryView","./PgGameRuleView":"PgGameRuleView","./PgGameWalletView":"PgGameWalletView","./pgGameBetSettingView":"pgGameBetSettingView"}],PgGameControlPanelView:[function(t,e,n){"use strict";cc._RF.push(e,"5ea22eF6XFPtL2yx7kD1R1E","PgGameControlPanelView");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},c=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function c(t){try{a(o.next(t))}catch(e){r(e)}}function s(t){try{a(o.throw(t))}catch(e){r(e)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(c,s)}a((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return a([t,e])}}function a(r){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,o=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(s){r=[6,s],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.startRotate=void 0;var a=t("../../../../../script/framework/log/log"),l=t("../../../../../script/framework/res/res"),u=t("../../../../../script/framework/storage/storage"),h=t("../../../../../script/pkg/currency"),d=t("./PgEvent"),p=t("./PgGameControlPanelLogic"),f=t("./btnSpineRotateAni"),g=t("../../../../../script/event/event"),y=cc._decorator,v=y.ccclass,b=(y.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bMinBet=!1,e.bMaxBet=!1,e.intervalId=-1,e.intervalIds=-1,e.isBtnMOUSE=!1,e}return i(e,t),e.prototype.onLoad=function(){var t,e;this.btnBonus=cc.find("nodeBonus",this.node).getComponent(cc.Button),this.btnWin=cc.find("nodeWin",this.node).getComponent(cc.Button),this.btnBet=cc.find("nodeBet",this.node).getComponent(cc.Button),this.labelCurBonus=cc.find("nodeBonus/label",this.node).getComponent(cc.Label),this.labelCurBet=cc.find("nodeBet/label",this.node).getComponent(cc.Label),this.labelCurWin=cc.find("nodeWin/label",this.node).getComponent(cc.Label),this.nodeSetting=cc.find("nodeSetting",this.node),this.nodeSpine=cc.find("nodeSpine",this.node),this.btnSound=cc.find("nodeSetting/btnSound",this.node).getComponent(cc.Button),this.spriteBtnSound=cc.find("nodeSetting/btnSound/Background",this.node).getComponent(cc.Sprite),this.nodeSoundOff=cc.find("nodeSoundClose",this.node),this.btnPaytable=cc.find("nodeSetting/btnPaytable",this.node).getComponent(cc.Button),this.btnRule=cc.find("nodeSetting/btnRule",this.node).getComponent(cc.Button),this.btnHistory=cc.find("nodeSetting/btnHistory",this.node).getComponent(cc.Button),this.btnCloseSetting=cc.find("nodeSetting/btnClose",this.node).getComponent(cc.Button),this.btnOpenSetting=cc.find("nodeSpine/btnOpenSetting",this.node).getComponent(cc.Button),this.btnQickMode=cc.find("nodeSpine/btnQickMode",this.node).getComponent(cc.Button),this.activeBtnQuicMode=null===(t=this.btnQickMode)||void 0===t?void 0:t.node.getChildByName("active"),this.unActiveBtnQuicMode=null===(e=this.btnQickMode)||void 0===e?void 0:e.node.getChildByName("unActive"),this.btnTurbo=cc.find("nodeSpine/turbo",this.node),this.btnTurbo0=cc.find("nodeSpine/turbo0",this.node),this.btnSubBet=cc.find("nodeSpine/btnSub",this.node).getComponent(cc.Button),this.btnAddBet=cc.find("nodeSpine/btnAdd",this.node).getComponent(cc.Button),this.btnStartAutoMode=cc.find("nodeSpine/btnAuto",this.node).getComponent(cc.Button),this.btnSpin=cc.find("btnSpine",this.node).getComponent(cc.Button),this.btnStopAutoMode=cc.find("btnAutostop",this.node).getComponent(cc.Button),this.labelAutoCount=cc.find("btnAutostop/label",this.node).getComponent(cc.Label),this.btnSpinRotateAni=cc.find("Background/icon",this.btnSpin.node).getComponent(f.default),this.spriteBtnSpin=cc.find("btnSpine/Background/icon",this.node).getComponent(cc.Sprite),this.spriteBtnSpinNormal=cc.find("btnSpine/Background/icon/normal",this.node).getComponent(cc.Sprite),this.spriteBtnSpineRun=cc.find("btnSpine/Background/icon/run",this.node).getComponent(cc.Sprite),this.spriteBtnSpinNormalGray=cc.find("btnSpine/Background/icon/normalgray",this.node).getComponent(cc.Sprite),this.spriteBtnSpineRunGray=cc.find("btnSpine/Background/icon/rungray",this.node).getComponent(cc.Sprite),this.btnSpinEffect=cc.find("btnSpine/effect",this.node),this.btnSpinEnter=cc.find("btnSpine/enter",this.node),this.btnSpinEnter2=cc.find("btnSpine/Background/icon/enter2",this.node),this.btnSpinEnter2.active=!1},e.prototype.onMouseEnter=function(){this.isBtnMOUSE=!0,this.btnSpin.interactable&&(this.btnSpinEnter.active=!0,this.btnSpinEnter2.active=!0)},e.prototype.onMouseLeave=function(){this.isBtnMOUSE=!1,this.btnSpinEnter.active=!1,this.btnSpinEnter2.active=!1},e.prototype.start=function(){cc.systemEvent.on(d.pgGameEvent.updateBonus,this.updateBouns,this),cc.systemEvent.on(d.pgGameEvent.updateCurBet,this.updateCurBet,this),cc.systemEvent.on(d.pgGameEvent.updateCurWinCount,this.updateCurWinCount,this)},e.prototype.onEnable=function(){var t=this;this.updateNodeBtnsStatus(!0,0),this.initSoundIconStatus(),this.intervalId=window.setInterval(function(){if(t.btnTurbo){var e=t.btnTurbo.getComponent(cc.Animation),n="turbo"+Math.floor(5*Math.random()+1);e.play(n)}},2e3),this.intervalIds=window.setInterval(function(){t.btnTurbo0&&t.btnTurbo0.getComponent(cc.Animation).play("turbo0")},5e3),this.btnSpin.node.on(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this),this.btnSpin.node.on(cc.Node.EventType.MOUSE_LEAVE,this.onMouseLeave,this),this.btnStopAutoMode.node.on(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this),this.btnStopAutoMode.node.on(cc.Node.EventType.MOUSE_LEAVE,this.onMouseLeave,this),this.btnAddBet.node.on(cc.Node.EventType.TOUCH_START,this.onAddBetBtnTouchStart,this),this.btnAddBet.node.on(cc.Node.EventType.TOUCH_END,this.onAddBetBtnTouchEnd,this),this.btnAddBet.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onAddBetBtnTouchEnd,this),this.btnSubBet.node.on(cc.Node.EventType.TOUCH_START,this.onSubBetBtnTouchStart,this),this.btnSubBet.node.on(cc.Node.EventType.TOUCH_END,this.onSubBetBtnTouchEnd,this),this.btnSubBet.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onSubBetBtnTouchEnd,this)},e.prototype.onDisable=function(){clearInterval(this.intervalId),clearInterval(this.intervalIds),this.btnSpin.node.off(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this),this.btnSpin.node.off(cc.Node.EventType.MOUSE_LEAVE,this.onMouseLeave,this),this.btnStopAutoMode.node.off(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this),this.btnStopAutoMode.node.off(cc.Node.EventType.MOUSE_LEAVE,this.onMouseLeave,this),this.btnAddBet.node.off(cc.Node.EventType.TOUCH_START,this.onAddBetBtnTouchStart,this),this.btnAddBet.node.off(cc.Node.EventType.TOUCH_END,this.onAddBetBtnTouchEnd,this),this.btnAddBet.node.off(cc.Node.EventType.TOUCH_CANCEL,this.onAddBetBtnTouchEnd,this),this.btnSubBet.node.off(cc.Node.EventType.TOUCH_START,this.onSubBetBtnTouchStart,this),this.btnSubBet.node.off(cc.Node.EventType.TOUCH_END,this.onSubBetBtnTouchEnd,this),this.btnSubBet.node.off(cc.Node.EventType.TOUCH_CANCEL,this.onSubBetBtnTouchEnd,this)},e.prototype.updateBouns=function(t){null!=t&&(this.labelCurBonus.string=""+h.currency.getSymbol()+h.currency.format(t))},e.prototype.updateCurBet=function(t,e,n,o){var i;if(void 0===o&&(o=!0),null!=t){this.bMaxBet=n,this.bMinBet=e,this.setBtnBetSubGray(e),this.setBtnBetAddGray(n),this.labelCurBet.string=""+h.currency.getSymbol()+h.currency.format(t),a.tcLog.log("------------------",t);var r=t/1e4<10?1.2:t/1e4<100?1.4:1.6;cc.Tween.stopAllByTarget(this.labelCurBet),o&&cc.tween(null===(i=this.labelCurBet)||void 0===i?void 0:i.node).to(.034,{scale:r}).to(.15,{scale:.8}).to(.15,{scale:1}).to(.15,{scale:.9}).to(.15,{scale:1},{easing:cc.easing.backOut}).start()}},e.prototype.updateCurWinCount=function(t){null!=t&&(this.labelCurWin.string=""+h.currency.getSymbol()+h.currency.format(t))},e.prototype.bindClickBtnOpenSetting=function(t){var e;null===(e=this.btnOpenSetting)||void 0===e||e.node.on("click",t,this)},e.prototype.bindClickBtnCloseSetting=function(t){var e;null===(e=this.btnCloseSetting)||void 0===e||e.node.on("click",t,this)},e.prototype.bindClickBtnBonus=function(t){var e;null===(e=this.btnBonus)||void 0===e||e.node.on("click",t,this)},e.prototype.bindClickBtnWin=function(t){var e;null===(e=this.btnWin)||void 0===e||e.node.on("click",t,this)},e.prototype.bindClickBtnBet=function(t){var e;null===(e=this.btnBet)||void 0===e||e.node.on("click",t,this)},e.prototype.bindClickBtnSound=function(t){var e;null===(e=this.btnSound)||void 0===e||e.node.on("click",t,this)},e.prototype.bindClickBtnPaytable=function(t){var e;null===(e=this.btnPaytable)||void 0===e||e.node.on("click",t,this)},e.prototype.bindClickBtnRule=function(t){var e;null===(e=this.btnRule)||void 0===e||e.node.on("click",t,this)},e.prototype.bindClickBtnHistory=function(t){var e;null===(e=this.btnHistory)||void 0===e||e.node.on("click",t,this)},e.prototype.bindClickBtnQickMode=function(t){var e;null===(e=this.btnQickMode)||void 0===e||e.node.on("click",t,this)},e.prototype.bindClickBtnSubBet=function(t){var e;null===(e=this.btnSubBet)||void 0===e||e.node.on("click",t,this)},e.prototype.bindClickBtnAddBet=function(t){var e;null===(e=this.btnAddBet)||void 0===e||e.node.on("click",t,this)},e.prototype.bindClickBtnStartAutoMode=function(t){var e;null===(e=this.btnStartAutoMode)||void 0===e||e.node.on("click",t,this)},e.prototype.bindClickBtnSpin=function(t){var e;null===(e=this.btnSpin)||void 0===e||e.node.on("click",t,this)},e.prototype.bindClickBtnStopAutoMode=function(t){var e;null===(e=this.btnStopAutoMode)||void 0===e||e.node.on("click",t,this)},e.prototype.onClickBtnSound=function(t){return c(this,void 0,void 0,function(){var e,n;return s(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,l.tcRes.load("PGGameRes",cc.SpriteFrame,t?"artwork/icon_sound_open":"artwork/icon_sound_close")];case 1:return e=o.sent(),this.spriteBtnSound.spriteFrame=e,[3,3];case 2:return n=o.sent(),a.tcLog.error("PgGameControlPanelView.onClickBtnSound load soundSPrite err:"+n),[3,3];case 3:return[2]}})})},e.prototype.onAddBetBtnTouchStart=function(){this.btnAddBet.interactable&&70!=this.btnAddBet.node.opacity&&(this.btnAddBet.node.opacity=128)},e.prototype.onAddBetBtnTouchEnd=function(){this.btnAddBet.interactable&&70!=this.btnAddBet.node.opacity&&(this.btnAddBet.node.opacity=255)},e.prototype.onSubBetBtnTouchStart=function(){this.btnSubBet.interactable&&70!=this.btnSubBet.node.opacity&&(this.btnSubBet.node.opacity=128)},e.prototype.onSubBetBtnTouchEnd=function(){this.btnSubBet.interactable&&70!=this.btnSubBet.node.opacity&&(this.btnSubBet.node.opacity=255)},e.prototype.updateNodeBtnsStatus=function(t,e){var n,o,i,r,c;void 0===e&&(e=.2);var s="on"===(null!==(n=u.tcStorage.readAny(u.tcStorage.Keys.SoundSwitch))&&void 0!==n?n:"on");this.nodeSoundOff.active=t&&!s;var a=cc.tween().to(e,{position:cc.v3(0,151,0)}),l=cc.tween().to(e,{opacity:255}),h=cc.tween().to(e,{position:cc.v3(0,0,0)}),d=cc.tween().to(e,{opacity:0}).set({active:!1});cc.Tween.stopAllByTarget(this.nodeSetting),cc.Tween.stopAllByTarget(this.nodeSpine),cc.Tween.stopAllByTarget(null===(o=this.btnSpin)||void 0===o?void 0:o.node),t?(cc.tween(this.nodeSetting).set({active:!0}).parallel(h,d).start(),cc.tween(this.nodeSpine).set({active:!0}).parallel(a,l).start(),cc.tween(null===(i=this.btnSpin)||void 0===i?void 0:i.node).set({active:!0}).to(.1,{opacity:255}).start(),null===(r=this.btnSpinRotateAni)||void 0===r||r.startRotate(4)):(cc.tween(this.nodeSetting).set({active:!0}).parallel(a,l).start(),cc.tween(this.nodeSpine).set({active:!0}).parallel(h,d).start(),cc.tween(null===(c=this.btnSpin)||void 0===c?void 0:c.node).to(.1,{opacity:0}).set({active:!1}).start())},e.prototype.updateBtnQuickModeStatus=function(t,e){a.tcLog.info("\u8bbe\u7f6e\u6309\u94ae\u72b6\u6001===>>>>>",t),e?(this.activeBtnQuicMode&&(this.activeBtnQuicMode.active=t),this.unActiveBtnQuicMode&&(this.unActiveBtnQuicMode.active=!t)):(this.unActiveBtnQuicMode.active=!1,this.btnTurbo&&(this.btnTurbo.active=t),this.btnTurbo0&&(this.btnTurbo0.active=t),this.activeBtnQuicMode&&(this.activeBtnQuicMode.active=!t)),cc.systemEvent.emit(g.event.quicModeEvent,t)},e.prototype.playLoop=function(){if(this.btnTurbo=cc.find("nodeSpine/turbo",this.node),this.btnTurbo){var t=this.btnTurbo.getComponent(cc.Animation),e="turbo"+Math.floor(8*Math.random());t.play(e)}},e.prototype.setAutoBtnSpinStaus=function(){this.setBtnOpactivty(this.btnSubBet.node,!0),this.setBtnOpactivty(this.btnAddBet.node,!0),this.setBtnOpactivty(this.btnStartAutoMode.node,!0),this.setBtnOpactivty(this.btnOpenSetting.node,!0),this.btnSpinEnter.active=!1,this.btnSpinEnter2.active=!1,this.btnSpin.interactable=!1,this.btnAddBet.interactable=!1,this.btnSubBet.interactable=!1,this.btnStartAutoMode.interactable=!1,this.btnOpenSetting.interactable=!1,this.btnBonus.interactable=!1,this.btnBet.interactable=!1},e.prototype.setBtnSpineStatus=function(t){var e,n,o,i,r,c="#FFFFFF";switch(t){case p.EBtnSpineStatus.ACTIVE_NORMAL:this.spriteBtnSpin.spriteFrame=this.spriteBtnSpinNormal.spriteFrame,null===(e=this.btnSpinRotateAni)||void 0===e||e.startRotate(4),this.setBtnOpactivty(this.btnSubBet.node,this.bMinBet),this.setBtnOpactivty(this.btnAddBet.node,this.bMaxBet),this.setBtnOpactivty(this.btnStartAutoMode.node,!1),this.setBtnOpactivty(this.btnOpenSetting.node,!1),this.isBtnMOUSE&&(this.btnSpinEnter.active=!0,this.btnSpinEnter2.active=!0),this.btnSpin.interactable=!0,this.btnAddBet.interactable=!0,this.btnSubBet.interactable=!0,this.btnStartAutoMode.interactable=!0,this.btnOpenSetting.interactable=!0,this.btnBonus.interactable=!0,this.btnBet.interactable=!0,c="#86F0FF";break;case p.EBtnSpineStatus.ACTIVE_RUN:null===(n=this.btnSpinRotateAni)||void 0===n||n.startRotate(.5),this.spriteBtnSpin.spriteFrame=this.spriteBtnSpineRun.spriteFrame,this.setBtnOpactivty(this.btnSubBet.node,!0),this.setBtnOpactivty(this.btnAddBet.node,!0),this.setBtnOpactivty(this.btnStartAutoMode.node,!0),this.setBtnOpactivty(this.btnOpenSetting.node,!0),this.btnSpinEnter.active=!1,this.btnSpinEnter2.active=!1,this.btnSpin.interactable=!0,this.btnAddBet.interactable=!1,this.btnSubBet.interactable=!1,this.btnStartAutoMode.interactable=!1,this.btnOpenSetting.interactable=!1,this.btnBonus.interactable=!1,this.btnBet.interactable=!1,c="#FFFFFF";break;case p.EBtnSpineStatus.UNACTIVE_NORMAL:a.tcLog.info("UNACTIVE_NORMAL==========================>>>>>>>>>>>>>>>>>>>>>"),this.spriteBtnSpin.spriteFrame=this.spriteBtnSpinNormalGray.spriteFrame,null===(o=this.btnSpinRotateAni)||void 0===o||o.startRotate(0),this.setBtnOpactivty(this.btnSubBet.node,!0),this.setBtnOpactivty(this.btnAddBet.node,!0),this.setBtnOpactivty(this.btnStartAutoMode.node,!0),this.setBtnOpactivty(this.btnOpenSetting.node,!0),this.btnSpinEnter.active=!1,this.btnSpinEnter2.active=!1,this.btnSpin.interactable=!1,this.btnAddBet.interactable=!1,this.btnSubBet.interactable=!1,this.btnStartAutoMode.interactable=!1,this.btnOpenSetting.interactable=!1,this.btnBonus.interactable=!1,this.btnBet.interactable=!1,c="#86F0FF";break;case p.EBtnSpineStatus.UNACTIVE_RUN:a.tcLog.info("unactive_run==========================>>>>>>>>>>>>>>>>>>>>>"),this.spriteBtnSpin.spriteFrame=this.spriteBtnSpineRunGray.spriteFrame,null===(i=this.btnSpinRotateAni)||void 0===i||i.startRotate(.5),this.setBtnOpactivty(this.btnSubBet.node,!0),this.setBtnOpactivty(this.btnAddBet.node,!0),this.setBtnOpactivty(this.btnStartAutoMode.node,!0),this.setBtnOpactivty(this.btnOpenSetting.node,!0),this.btnSpinEnter.active=!1,this.btnSpinEnter2.active=!1,this.btnSpin.interactable=!1,this.btnAddBet.interactable=!1,this.btnSubBet.interactable=!1,this.btnStartAutoMode.interactable=!1,this.btnOpenSetting.interactable=!1,this.btnBonus.interactable=!1,this.btnBet.interactable=!1,c="#FFFFFF";break;case p.EBtnSpineStatus.ACTIVE_STOP:this.spriteBtnSpin.spriteFrame=this.spriteBtnSpinNormal.spriteFrame,null===(r=this.btnSpinRotateAni)||void 0===r||r.startRotate(0),this.setBtnOpactivty(this.btnSubBet.node,this.bMinBet),this.setBtnOpactivty(this.btnAddBet.node,this.bMaxBet),this.setBtnOpactivty(this.btnStartAutoMode.node,!1),this.setBtnOpactivty(this.btnOpenSetting.node,!1),this.btnSpinEnter.active=!1,this.btnSpinEnter2.active=!1,this.btnSpin.interactable=!1,this.btnAddBet.interactable=!1,this.btnSubBet.interactable=!1,this.btnStartAutoMode.interactable=!1,this.btnOpenSetting.interactable=!1,this.btnBonus.interactable=!1,this.btnBet.interactable=!1,c="#86F0FF"}this.updateLabelColor(c)},e.prototype.setBtnBetAddGray=function(t){a.tcLog.info("--------------------------------------");var e=t?70:255;this.btnAddBet.node.opacity=e},e.prototype.setBtnBetSubGray=function(t){var e=t?70:255;this.btnSubBet.node.opacity=e},e.prototype.setBtnOpactivty=function(t,e){var n=e?66:255;if(t.opacity=n,"btnAuto"==t.name){var o=e?30:255;t.opacity=o}},e.prototype.updateLabelColor=function(t){void 0===t&&(t="F5F5F5"),this.labelCurBet.node.color=cc.Color.fromHEX(new cc.Color,t),this.labelCurBonus.node.color=cc.Color.fromHEX(new cc.Color,t),this.labelCurWin.node.color=cc.Color.fromHEX(new cc.Color,t)},e.prototype.setLeftAutoSpinCount=function(t){this.labelAutoCount.string=t.toString()},e.prototype.setBtnSpinStatus=function(t,e){void 0===e&&(e=0),this.btnStopAutoMode.node.active=!t,this.btnSpin.node.active=t,a.tcLog.info("\u8bbe\u7f6e\u81ea\u52a8\u548c\u624b\u52a8\u6309\u94ae\u72b6\u6001===>>>>>",t),t?this.setBtnSpineStatus(p.EBtnSpineStatus.ACTIVE_NORMAL):(this.updateLabelColor("#F5F5F5"),this.setLeftAutoSpinCount(e))},e.prototype.initSoundIconStatus=function(){var t,e="on"===(null!==(t=u.tcStorage.readAny(u.tcStorage.Keys.SoundSwitch))&&void 0!==t?t:"on");this.onClickBtnSound(e)},e.prototype.playBtnSpinEffect=function(){var t,e=this;this.btnSpinEffect.active=!0;var n=null===(t=this.btnSpinEffect)||void 0===t?void 0:t.getComponentsInChildren(cc.Animation);n&&n.forEach(function(t){t.node.active=!0,t.play()}),this.scheduleOnce(function(){e.btnSpinEffect.active=!1},.5)},e.prototype.isBtnSpinClick=function(){return this.btnSpin.interactable},r([v],e)}(cc.Component));n.default=b,n.startRotate=function(){throw new Error("Function not implemented.")},cc._RF.pop()},{"../../../../../script/event/event":void 0,"../../../../../script/framework/log/log":void 0,"../../../../../script/framework/res/res":void 0,"../../../../../script/framework/storage/storage":void 0,"../../../../../script/pkg/currency":void 0,"./PgEvent":"PgEvent","./PgGameControlPanelLogic":"PgGameControlPanelLogic","./btnSpineRotateAni":"btnSpineRotateAni"}],PgGameHistoryView:[function(t,e,n){"use strict";cc._RF.push(e,"fc30a98eqtMoI7zJKX9a+Vl","PgGameHistoryView");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},c=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function c(t){try{a(o.next(t))}catch(e){r(e)}}function s(t){try{a(o.throw(t))}catch(e){r(e)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(c,s)}a((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return a([t,e])}}function a(r){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,o=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(s){r=[6,s],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../../../../script/config/config"),l=t("../../../../../script/framework/audio/audio"),u=t("../../../../../script/framework/log/log"),h=t("../../../../../script/framework/res/res"),d=t("../history/UIDateSelect"),p=t("../history/UIselectdate"),f=t("../../../gameCommon/script/game-loading"),g=t("./PgEvent"),y=cc._decorator,v=y.ccclass,b=(y.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onLoad=function(){var t=this;this.btnClose=cc.find("aniRoot/btn_close",this.node),this.aniRoot=cc.find("aniRoot",this.node),this.loadtipBig=cc.find("aniRoot/loadtipBig",this.node),this.bottom_f=cc.find("aniRoot/bottom_f",this.node),this.btnClose.addComponent(cc.Button),this.isLoadtipBig=!1,this.btnClose.on("click",function(){window.changeTrophiesIconShow&&window.changeTrophiesIconShow(!0),u.tcLog.info("changeHistory===>>>>>>>>",!1),cc.systemEvent.emit(g.pgGameEvent.close_history),cc.tween(t.aniRoot).set({position:cc.v3(0,0,0)}).to(.3,{position:cc.v3(0,-1440,0)}).call(function(){t.node.active=!1}).start()}),cc.systemEvent.on(g.pgGameEvent.open_history_view,this.show,this),cc.systemEvent.on(g.pgGameEvent.close_history_view,this.onCloseHistoryView,this),cc.systemEvent.on(g.pgGameEvent.open_his_selectdate_view,this.onOpenSelectDateView,this),cc.systemEvent.on(g.pgGameEvent.close_his_selectdate_view,this.onCloseSelectDateView,this),cc.systemEvent.on(g.pgGameEvent.open_his_dateSelect_view,this.onOpenDateSelectView,this),cc.systemEvent.on(g.pgGameEvent.close_his_dateSelect_view,this.onCloseDateSelectView,this)},e.prototype.onCloseHistoryView=function(){u.tcLog.info("changeHistory===>>>>>>>>",!1),this.node.active=!1},e.prototype.addContent=function(t,e,n,o){var i;return void 0===o&&(o=l.AudioClipName.CLICKBTN),c(this,void 0,void 0,function(){var o,r,c;return s(this,function(s){switch(s.label){case 0:if(this.label&&(this.label.string=e),!n||!this.nodeRuleContentParent)return[2];s.label=1;case 1:return s.trys.push([1,3,,4]),(o=a.gameHelper.getBundleName(t))?[4,h.tcRes.load(o,cc.Prefab,n)]:(u.tcLog.error("pgGameRuleView get bundlename null"),[2]);case 2:return r=s.sent(),null===(i=this.nodeRuleContentParent)||void 0===i||i.addChild(cc.instantiate(r)),[3,4];case 3:return c=s.sent(),u.tcLog.error("PgGameRuleView.error,"+c),[3,4];case 4:return[2]}})})},e.prototype.show=function(t){var e=this;void 0===t&&(t=!0),window.changeTrophiesIconShow&&window.changeTrophiesIconShow(!1),u.tcLog.info("=====",t),t?(this.bottom_f.active=!1,this.node.active=!0,cc.tween(this.aniRoot).set({position:cc.v3(0,0,0)}).to(.3,{position:cc.v3(0,0,0)}).call(function(){e.loadtipBig.active=!1,e.loadtipBig.opacity=0}).start()):(this.bottom_f.active=!1,this.node.active=!0,cc.tween(this.aniRoot).set({position:cc.v3(0,-1440,0)}).to(.3,{position:cc.v3(0,0,0)}).call(function(){e.isLoadtipBig?(e.node.active=!0,e.loadtipBig.active=!1,e.loadtipBig.opacity=0,u.tcLog.info("changeHistory==1111=>>>>>>>>",!0),a.config.isHistoryFromHTML=!1,e.bottom_f.active=!0,e.scheduleOnce(function(){e.bottom_f.active=!1},1)):(e.node.active=!0,e.loadtipBig.active=!0,e.loadtipBig.opacity=255,u.tcLog.info("changeHistory=22222==>>>>>>>>",!0),e.bottom_f.active=!1,e.scheduleOnce(function(){cc.tween(e.loadtipBig).to(.2,{opacity:0}).call(function(){a.config.isHistoryFromHTML=!1}).start()},1)),e.isLoadtipBig=!1}).start())},e.prototype.onOpenSelectDateView=function(){var t;return c(this,void 0,void 0,function(){var e,n,o;return s(this,function(i){switch(i.label){case 0:if(this.nodeSelectdate)return[3,4];i.label=1;case 1:return i.trys.push([1,3,,4]),f.gameLoadingDialog.show({duration:20}),[4,h.tcRes.load("PGGameRes",cc.Prefab,"prefab/history/UIselectdate")];case 2:return e=i.sent(),(n=cc.instantiate(e)).setParent(a.config.uiNode.dialog),this.nodeSelectdate=n.getComponent(p.UIselectdate),f.gameLoadingDialog.close(),[3,4];case 3:return o=i.sent(),u.tcLog.error("PgGameControlPanellogic show onClickBtnHistory error,"+o),[3,4];case 4:return null===(t=this.nodeSelectdate)||void 0===t||t.show(),[2]}})})},e.prototype.onCloseSelectDateView=function(){this.nodeSelectdate.node.active=!1},e.prototype.onOpenDateSelectView=function(){var t;return c(this,void 0,void 0,function(){var e,n,o;return s(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),f.gameLoadingDialog.show({duration:20}),[4,h.tcRes.load("PGGameRes",cc.Prefab,"prefab/history/UIDateSelect")];case 1:return e=i.sent(),(n=cc.instantiate(e)).setParent(a.config.uiNode.dialog),this.nodeDateselect=n.getComponent(d.UIDateSelect),null===(t=this.nodeDateselect)||void 0===t||t.show(),f.gameLoadingDialog.close(),[3,3];case 2:return o=i.sent(),u.tcLog.error("PgGameControlPanellogic show onClickBtnHistory error,"+o),[3,3];case 3:return[2]}})})},e.prototype.onCloseDateSelectView=function(){this.nodeDateselect.node.destroy()},r([v],e)}(cc.Component));n.default=b,cc._RF.pop()},{"../../../../../script/config/config":void 0,"../../../../../script/framework/audio/audio":void 0,"../../../../../script/framework/log/log":void 0,"../../../../../script/framework/res/res":void 0,"../../../gameCommon/script/game-loading":void 0,"../history/UIDateSelect":"UIDateSelect","../history/UIselectdate":"UIselectdate","./PgEvent":"PgEvent"}],PgGameRuleView:[function(t,e,n){"use strict";cc._RF.push(e,"c3670vW8HJKF4KdV8f8M3v0","PgGameRuleView");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},c=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function c(t){try{a(o.next(t))}catch(e){r(e)}}function s(t){try{a(o.throw(t))}catch(e){r(e)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(c,s)}a((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return a([t,e])}}function a(r){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,o=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(s){r=[6,s],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../../../../script/config/config"),l=t("../../../../../script/framework/audio/audio"),u=t("../../../../../script/framework/log/log"),h=t("../../../../../script/framework/res/res"),d=cc._decorator,p=d.ccclass,f=(d.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.clickBtnSound=l.AudioClipName.CLICKBTN,e}return i(e,t),e.prototype.onLoad=function(){var t=this;this.btnClose=cc.find("body/title/btnClose",this.node),this.body=cc.find("body",this.node),this.UIViewAni=cc.find("body/UIViewAni",this.node),this.nodeRuleContentParent=cc.find("body/content/view/content",this.node),this.label=cc.find("body/title/label",this.node).getComponent(cc.Label),this.scrollbar=cc.find("body/content/scrollBar",this.node),this.scrollView=cc.find("body/content",this.node).getComponent(cc.ScrollView),this.btnClose.on("click",function(){l.uAudio.getInstance().playEffect(t.clickBtnSound),t.node.active=!1,window.changeTrophiesIconShow&&window.changeTrophiesIconShow(!0)})},e.prototype.addContent=function(t,e,n,o){var i;return void 0===o&&(o=l.AudioClipName.CLICKBTN),c(this,void 0,void 0,function(){var r,c,l;return s(this,function(s){switch(s.label){case 0:if(u.tcLog.info(n),this.clickBtnSound=o,this.initScrollBar(),this.label&&(this.label.string=e),!n||!this.nodeRuleContentParent)return[2];s.label=1;case 1:return s.trys.push([1,3,,4]),(r=a.gameHelper.getBundleName(t))?(u.tcLog.info("url\u5730\u5740",n),[4,h.tcRes.load(r,cc.Prefab,n)]):(u.tcLog.error("pgGameRuleView get bundlename null"),[2]);case 2:return c=s.sent(),null===(i=this.nodeRuleContentParent)||void 0===i||i.addChild(cc.instantiate(c)),[3,4];case 3:return l=s.sent(),u.tcLog.error("PgGameRuleView.error,"+l),[3,4];case 4:return[2]}})})},e.prototype.initScrollBar=function(){var t,e=this,n=1;null===(t=this.nodeRuleContentParent)||void 0===t||t.on(cc.Node.EventType.MOUSE_WHEEL,function(t){var o=t.getScrollY();e.scrollView.getMaxScrollOffset(),o>0?(n+=.1)>=1&&(n=1):o<0&&(n-=.1)<=0&&(n=0),e.scrollView.scrollTo(cc.v2(0,n))},this)},e.prototype.show=function(){var t=this;this.node.active=!0,this.UIViewAni.active=!0,window.changeTrophiesIconShow&&window.changeTrophiesIconShow(!1),cc.tween(this.body).set({position:cc.v3(0,-1440,0)}).to(.3,{position:cc.v3(0,0,0)}).call(function(){t.scheduleOnce(function(){t.UIViewAni.active=!1},1.5)}).start()},r([p],e)}(cc.Component));n.default=f,cc._RF.pop()},{"../../../../../script/config/config":void 0,"../../../../../script/framework/audio/audio":void 0,"../../../../../script/framework/log/log":void 0,"../../../../../script/framework/res/res":void 0}],PgGameWalletView:[function(t,e,n){"use strict";cc._RF.push(e,"c8f86HTdmVFWrcjC7INgrbl","PgGameWalletView");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var c=t("../../../../../script/app/env"),s=t("../../../../../script/framework/audio/audio"),a=t("../../../../../script/pkg/currency"),l=cc._decorator,u=l.ccclass,h=(l.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onLoad=function(){var t,e=this;this.btnClose=cc.find("body/btnClose",this.node),this.body=cc.find("body",this.node),this.mask=cc.find("mask",this.node),this.UIViewAni=cc.find("body/UIViewAni",this.node),this.labelBonus=cc.find("body/wallet/label",this.node).getComponent(cc.Label),this.bodyWidget=null===(t=this.body)||void 0===t?void 0:t.getComponent(cc.Widget),this.isUIViewAni=!1,this.btnClose.on("click",function(){window.changeTrophiesIconShow&&window.changeTrophiesIconShow(!0),s.uAudio.getInstance().playEffect(s.AudioClipName.CLICKBTN),cc.tween(e.body).to(.3,{position:cc.v3(0,-685,0)}).call(function(){e.node.active=!1}).start()}),this.mask.on("click",function(){window.changeTrophiesIconShow&&window.changeTrophiesIconShow(!0),s.uAudio.getInstance().playEffect(s.AudioClipName.CLICKBTN),cc.tween(e.body).to(.3,{position:cc.v3(0,-685,0)}).call(function(){e.node.active=!1}).start()})},e.prototype.show=function(){var t=this;window.changeTrophiesIconShow&&window.changeTrophiesIconShow(!1),this.node.active=!0,this.labelBonus&&(this.labelBonus.string=""+a.currency.getSymbol()+a.currency.format(c.env.curGameData.balance)),this.UIViewAni.active=!0,this.isUIViewAni&&(this.UIViewAni.active=!1),cc.tween(this.body).set({position:cc.v3(0,-685,0)}).to(.3,{position:cc.v3(0,0,0)}).call(function(){t.scheduleOnce(function(){t.isUIViewAni=!0,t.UIViewAni.active=!1},1)}).start()},r([u],e)}(cc.Component));n.default=h,cc._RF.pop()},{"../../../../../script/app/env":void 0,"../../../../../script/framework/audio/audio":void 0,"../../../../../script/pkg/currency":void 0}],RecordMgr:[function(t,e,n){"use strict";cc._RF.push(e,"0f6edp4W3xP7rwOjlSpPVaZ","RecordMgr");var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function c(t){try{a(o.next(t))}catch(e){r(e)}}function s(t){try{a(o.throw(t))}catch(e){r(e)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(c,s)}a((o=o.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,o,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return a([t,e])}}function a(r){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,o=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(s){r=[6,s],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../../../bundles-v2/update-v2/script/api/api-config"),c=t("../../../../../script/app/api"),s=t("../../../../../script/framework/log/log"),a=t("../script/PgEvent"),l=t("./DateUtil"),u=function(){function t(){this._filterFrom=1,this._filterTo=1,this._offset=1,this._dataCount=1,this._dataArr=[],this._allDetails={}}return t.getInstance=function(){return t._instance||(t._instance=new t),t._instance},t.delInstance=function(){t._instance},t.prototype.on_dtor=function(){},Object.defineProperty(t.prototype,"filterFrom",{get:function(){return this._filterFrom},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"filterTo",{get:function(){return this._filterTo},enumerable:!1,configurable:!0}),t.prototype.getDataList=function(){return this._dataArr},t.prototype.appendDatas=function(t){var e=t.data,n=e&&(null==e?void 0:e.list)||[];this._dataArr.push(n)},t.prototype.setFilter=function(t,e){this._filterFrom=t,this._filterTo=e,this._loaded=!1,this._shi_len=0,this._offset=1,this._dataCount=1,this._dataArr=[],this.isFullData=!1,cc.systemEvent.emit(a.pgGameEvent.ref_record_filter)},t.prototype.checkReqFull=function(){return this.isFullData},t.prototype.pullData=function(){var t=this;return new Promise(function(e){return o(t,void 0,void 0,function(){var t,n,o,s,a,u=this;return i(this,function(){return this.checkReqFull()?[2,e({error_code:0,data:{list:[]}})]:(t={start_ts:0,end_ts:0,page_size:20,page:this._offset,token:r.apiConfig.env.token,game_id:r.apiConfig.env.gameId},n=new Date(l.default.getSysTime()),o=n.getFullYear(),s=n.getMonth()+1,a=n.getDate(),l.default.getTimestamp(o,s,a,0,0,0),1==this.filterFrom?(t.start_ts=l.default.getTimestamp(o,s,a,0,0,0)/1e3,t.end_ts=l.default.getTimestamp(o,s,a,23,59,59)/1e3):7==this.filterFrom?(t.start_ts=Math.trunc((n.getTime()-6048e5)/1e3),t.end_ts=Math.trunc(n.getTime()/1e3)):(t.start_ts=Math.trunc(this.filterFrom/1e3),t.end_ts=Math.trunc(this.filterTo/1e3)),c.api.mouseHistory(t).then(function(t){var n=t;if((!n.historylist||n.historylist.length<20||0==n.historylist.length)&&(u.isFullData=!0),!n.historylist)return e({error_code:0,data:{list:[],count:0,bet:0,win:0}});var o=n.historylist.reduce(function(t,e){return e.groupId.length>0&&(t[e.groupId]||(t[e.groupId]=0),t[e.groupId]+=e.win),t},{}),i=n.historylist.filter(function(t){return t.leftTimes<0});n.historylist=i;for(var r=0;r<n.historylist.length;r++){var c=n.historylist[r];c.bet=10*c.bet,0==c.groupId.length?(c.win=10*c.win,c.bet,c.win):(c.win=10*o[c.groupId],c.win)}var s={error_code:0,data:{list:[],count:n.stat.total_count,bet:10*n.stat.total_bet_gold,win:10*n.stat.total_profit}};return s.data.list=n.historylist,e(s)}),Math.random(),[2])})})})},t.prototype.pullDetail=function(t,e,n){var a=this;return new Promise(function(l){return o(a,void 0,void 0,function(){var o,a;return i(this,function(){return this._allDetails[e]?[2,l(this._allDetails[e])]:(o={createTime:t,order_no:e,groupId:n,token:r.apiConfig.env.token,game_id:r.apiConfig.env.gameId},c.api.mouseDetail(o).then(function(t){for(var e,n,o=t,i=0;i<o.historyDetail.length;i++){var r=o.historyDetail[i],c=[],u=new Object;u.round_no=r.order,u.bet=10*r.bet,null!=r.leftTimes&&r.leftTimes>-1&&r.leftTimes<7?u.prize=10*r.win:u.prize=10*(r.bet+r.win),u.player_win_lose=10*r.win,o.historyDetail.length>1?u.trigger=!0:u.trigger=!1,u.balance=10*r.moneyAfter,u.bet_size=10*r.betIndex,u.bet_multiple=r.mutipleIndex,u.screen=r.screen,u.hits=r.hits,u.normalRoundTimes=r.normalRoundTimes,u.leftTimes=r.leftTimes,u.groupId=r.groupId,c.push(u);var h={create_timestamp:o.historyDetail[0].createTime,round_list:c};a.data.list.push(h)}if(s.tcLog.log("historyDetail:",a),null===(e=null==a?void 0:a.data)||void 0===e?void 0:e.list)return l(null===(n=null==a?void 0:a.data)||void 0===n?void 0:n.list)}),a={error_code:0,data:{list:[]}},[2])})})})},t}();n.default=u,cc._RF.pop()},{"../../../../../bundles-v2/update-v2/script/api/api-config":void 0,"../../../../../script/app/api":void 0,"../../../../../script/framework/log/log":void 0,"../script/PgEvent":"PgEvent","./DateUtil":"DateUtil"}],SharedThemeColor:[function(t,e,n){"use strict";cc._RF.push(e,"38ebb8bWq1HqJrAQ7BO4RvD","SharedThemeColor");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0}),n.SharedThemeColor=void 0;var c=t("./UIhistory"),s=cc._decorator,a=s.ccclass,l=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.rendererList=[],e}return i(e,t),e.prototype.onLoad=function(){this.rendererList.forEach(function(t){t.color=c.UIhistory.themeColor})},e.prototype.start=function(){this.destroy()},r([l({type:cc.Node})],e.prototype,"rendererList",void 0),r([a],e)}(cc.Component);n.SharedThemeColor=u,cc._RF.pop()},{"./UIhistory":"UIhistory"}],StringEx:[function(t,e,n){"use strict";cc._RF.push(e,"f0c63eQELxM3qTe7jE+u+Q6","StringEx"),Object.defineProperty(n,"__esModule",{value:!0}),n.StringEx=void 0;var o=function(){function t(){}return t.padStart=function(t,e,n){return t.length>=e?t:n.repeat(Math.ceil((e-t.length)/n.length)).slice(0,e-t.length)+t},t}();n.StringEx=o,cc._RF.pop()},{}],StringUtil:[function(t,e,n){"use strict";cc._RF.push(e,"094247qMWVCeq4O7njEBD8l","StringUtil"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../../../../script/framework/log/log"),i=t("./Globals"),r=/(%d)|(%s)/,c=/%s/,s=function(){function t(){}return t.getSufix=function(t){if(i.isEmpty(t))return"";var e=t.lastIndexOf(".");return null==e||e<=0?"":t.substring(e+1)},t.format=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.forEach(function(e,n){t=t.replace("{"+n+"}",e)}),t},t.formatStr=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=arguments.length;if(0===n)return"";var o=arguments[0];if(1===n)return""+o;var i="string"==typeof o&&r.test(o);if(i)for(var s=1;s<n;++s){var a=arguments[s],l="number"==typeof a?r:c;l.test(o)?o=o.replace(l,a):o+=" "+a}else for(s=1;s<n;++s)o+=" "+arguments[s];return o},t.lineStr=function(t,e){if(void 0===e&&(e=9),!t)return"";if(t.length<e)return t;for(var n="",o=0;o<t.length;o++)n+=t[o],(o+1)%e==0&&(n+="\n");return n},t.shortString=function(t){return i.isEmpty(t)?t:t.length>10?t.substring(0,9)+"...":t},t.lastCharIs=function(t,e){return!i.isEmpty(t)&&t[t.length-1]==e},t.Bytes2Str=function(t,e){void 0===e&&(e=7);for(var n="",o=0;o<t.length;o++){var i=t[o].toString(16);1==i.length&&(i="0"+i),n+=" "+i,o==e&&(n+="  ")}return n},t.utf8ArrayToString=function(t){if(i.isNil(t)||t.length<=0)return"";var e,n,o,r,c,s;for(e="",o=t.length,n=0;n<o;)switch((r=t[n++])>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:e+=String.fromCharCode(r);break;case 12:case 13:c=t[n++],e+=String.fromCharCode((31&r)<<6|63&c);break;case 14:c=t[n++],s=t[n++],e+=String.fromCharCode((15&r)<<12|(63&c)<<6|(63&s)<<0)}return e},t.stringToUTF8Bytes=function(t){for(var e=[],n=0;n<t.length;n++){var o=t.charCodeAt(n);o<128?e.push(o):o<2048?e.push(192|o>>6,128|63&o):o<55296||o>=57344?e.push(224|o>>12,128|o>>6&63,128|63&o):(n++,o=65536+((1023&o)<<10|1023&t.charCodeAt(n)),e.push(240|o>>18,128|o>>12&63,128|o>>6&63,128|63&o))}return e},t.printLn=function(t){var e="{\n";for(var n in t)if("data"==n){for(var i in e+="data: {\n",t.data)e+="    "+i+": "+JSON.stringify(t.data[i])+"\n";e+="}\n"}else e+=n+": "+JSON.stringify(t[n])+"\n";e+="}",o.tcLog.log(e)},t}();n.default=s,cc._RF.pop()},{"../../../../../script/framework/log/log":void 0,"./Globals":"Globals"}],UIDateSelect:[function(t,e,n){"use strict";cc._RF.push(e,"46b08SC/GBMRaHAOTLH0yq9","UIDateSelect");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0}),n.UIDateSelect=void 0;var c=t("../script/PgEvent"),s=t("./BaseView"),a=t("./RecordMgr"),l=t("./shared_record"),u=t("./shared_record_custom_date"),h=cc._decorator,d=h.ccclass,p=(h.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){this.node.on(l.SharedRecordEvent.REQUEST_CUSTOM_DATE_RECORD,this.onSelectData,this);var t=this.getComponent(u.SharedRecordCustomDate);t&&t.setDate(this.node)},e.prototype.onSelectData=function(t,e){cc.systemEvent.emit(c.pgGameEvent.close_his_selectdate_view),a.default.getInstance().setFilter(t,e)},e.prototype.onDestroy=function(){cc.systemEvent.emit(c.pgGameEvent.close_his_dateSelect_view)},e.prototype.show=function(){this.node.active=!0},r([d],e)}(s.BaseView));n.UIDateSelect=p,cc._RF.pop()},{"../script/PgEvent":"PgEvent","./BaseView":"BaseView","./RecordMgr":"RecordMgr","./shared_record":"shared_record","./shared_record_custom_date":"shared_record_custom_date"}],UIDetailTip:[function(t,e,n){"use strict";cc._RF.push(e,"20ff1+an9dIsaRQp/vTQM9f","UIDetailTip");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0}),n.UIDetailTip=void 0;var c=t("../../../../../script/framework/i18n/i18n"),s=t("../../../../../script/framework/log/log"),a=t("../../../../../script/pkg/currency"),l=t("./BaseView"),u=t("./CocosUtil"),h=cc._decorator,d=h.ccclass,p=(h.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.itemScore={51:300,83:100,82:50,81:30,3:15,2:5,1:3},e}return i(e,t),e.prototype.onLoad=function(){u.default.traverseNodes(this.node,this.m_ui)},e.prototype.start=function(){var t=this;u.default.addClickEvent(this.node,function(){t.node.removeFromParent()},this)},e.prototype.initData=function(t){var e=this;if(t){s.tcLog.log("UIDetailTip"),u.default.traverseNodes(this.node,this.m_ui),this.info=t;var n=t.dataArr;this.m_ui.lb_tiptxt.getComponent(cc.Label).string=c.tcI18n.i18nLabel("History.HistoryBetSize")+" x "+c.tcI18n.i18nLabel("History.HistoryBetLevel")+" x "+c.tcI18n.i18nLabel("History.HistoryTipsPayout"),this.m_ui.lab_gongshi.getComponent(cc.Label).string=a.currency.formatNoSymbol(n.bet_size)+" x "+n.bet_multiple+" x "+this.itemScore[t.itemData.symbol],this.node.getChildByName("bg_corner4").active=!1,this.scheduleOnce(function(){e.node.getChildByName("bg_corner4").active=!0;var n=u.default.convertSpaceAR(t.item,e.node);n.set(new cc.Vec3(n.x,n.y-116,n.z)),e.node.getChildByName("bg_corner4").setPosition(n)},.06)}},r([d],e)}(l.BaseView));n.UIDetailTip=p,cc._RF.pop()},{"../../../../../script/framework/i18n/i18n":void 0,"../../../../../script/framework/log/log":void 0,"../../../../../script/pkg/currency":void 0,"./BaseView":"BaseView","./CocosUtil":"CocosUtil"}],UIHisDetail:[function(t,e,n){"use strict";cc._RF.push(e,"f5d7b2xFABLpqRKodlZYEid","UIHisDetail");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},c=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function c(t){try{a(o.next(t))}catch(e){r(e)}}function s(t){try{a(o.throw(t))}catch(e){r(e)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(c,s)}a((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return a([t,e])}}function a(r){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,o=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(s){r=[6,s],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.UIHisDetail=void 0;var a=t("../../../../../script/framework/i18n/i18n"),l=t("../../../../../script/framework/log/log"),u=t("../../../../../script/pkg/currency"),h=t("../script/PgEvent"),d=t("./BaseView"),p=t("./CocosUtil"),f=t("./CompHisPage"),g=t("./DateUtil"),y=t("./RecordMgr"),v=t("./UIDetailTip"),b=t("./UIhistory"),_=cc._decorator,m=_.ccclass,S=_.property,w=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isAnim=!1,e._ddIndex=0,e._curIdx=0,e._detailData=null,e._data=null,e._expanded=!1,e._beforeData=null,e.pages=[],e._initedFL=!1,e.startTouchPosition=cc.Vec2.ZERO,e.character=cc.Vec2.ZERO,e}return i(e,t),e.prototype.onLoad=function(){p.default.traverseNodes(this.node,this.m_ui),this.m_ui.btn_pre.active=!1,this.m_ui.btn_next.active=!1,this.m_ui.expand_arrow.active=!1,this.m_ui.pan_frees.setPosition(cc.v3(0,1800,0)),this.setExpanded(!1),this.m_ui.aniRoot.opacity=1,cc.tween(this.node).delay(.5).call(function(){cc.systemEvent.emit(h.pgGameEvent.close_history_view)}).start(),this.m_ui.load_err.active=!1,this.m_ui.lb_title.color=b.UIhistory.themeColor,this.m_ui.expand_arrow.color=b.UIhistory.themeColor,this.m_ui.btn_close1.color=b.UIhistory.themeColor,this.m_ui.arrow_pre.color=b.UIhistory.themeColor,this.m_ui.arrow_next.color=b.UIhistory.themeColor},e.prototype.start=function(){var t=this;this.m_ui.detailBG.active=!1,this.m_ui.detailBG.on(cc.Node.EventType.TOUCH_END,function(){cc.systemEvent.emit(h.pgGameEvent.ui_close_hisdetail_tip),t.curcloneTip&&t.curcloneTip.isValid&&(t.curcloneTip.destroy(),t.curcloneTip=null)}),p.default.addClickEvent(this.m_ui.btn_close,function(){cc.Tween.stopAllByTarget(this.node),cc.systemEvent.emit(h.pgGameEvent.open_history_view),cc.systemEvent.emit(h.pgGameEvent.close_history_detail)},this),p.default.addClickEvent(this.m_ui.btn_pre,function(){var e=t._ddIndex;--e<0&&(e=0),t.turnPage(e)},this),p.default.addClickEvent(this.m_ui.btn_next,function(){var e=t._ddIndex;e++;var n=t.getTotalNum();e>n-1&&(e=n-1),t.turnPage(e)},this),p.default.addClickEvent(this.m_ui.btn_expand,function(){t._data.length<=1||t.setExpanded(!t._expanded)},this),p.default.addClickEvent(this.m_ui.btnClosePanFree,function(){t.setExpanded(!1)},this),p.default.addClickEvent(this.m_ui.retry,function(){return c(t,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return this.m_ui.load_err.active=!1,this.isAnim=!1,[4,this.waitAnim(!1)];case 1:return t.sent(),this.before(this._beforeData),[2]}})})},this),p.default.addClickEvent(this.m_ui.err_close,function(){cc.Tween.stopAllByTarget(t.node),cc.systemEvent.emit(h.pgGameEvent.open_history_view),cc.systemEvent.emit(h.pgGameEvent.close_history_detail)},this),cc.systemEvent.on(h.pgGameEvent.ui_show_hisdetail_tip,this.onShowDetailTip,this),cc.systemEvent.on(h.pgGameEvent.ui_close_hisdetail_tip,this.onHideDetailTip,this),this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.scheduleOnce(function(){t.m_ui.aniRoot.opacity=255}),cc.systemEvent.on(h.pgGameEvent.close_history_detail,this.onCloseDetailView,this)},e.prototype.onCloseDetailView=function(){var t=this;0==this._ddIndex&&cc.systemEvent.emit(h.pgGameEvent.open_history_view),cc.tween(this.node).to(.3,{position:cc.v3(this.node.width,0,0)}).call(function(){t.node.removeFromParent()}).start()},e.prototype.onTouchStart=function(t){this.startTouchPosition=t.getLocation()},e.prototype.onTouchMove=function(t){var e=t.getDelta();if((e.x>10||e.x<-10||e.y>10||e.y<-10)&&(this.character.x+=e.x,this.character.y+=e.y,(this.character.y>200||this.character.y<-200)&&(this.character=cc.Vec2.ZERO),this.character.x>200||this.character.x<-200)){var n=this._ddIndex;if(this.character.x>200)--n<0?(n=0,this.onCloseDetailView()):this.turnPage(n);else{n++;var o=this.getTotalNum();n>o-1?n=o-1:this.turnPage(n)}this.character=cc.Vec2.ZERO}},e.prototype.onTouchEnd=function(){this.startTouchPosition=cc.Vec2.ZERO},e.prototype.before=function(t){return c(this,void 0,void 0,function(){var e;return s(this,function(n){switch(n.label){case 0:return l.tcLog.log("selectOrder:",t),this._data=t,this._beforeData=t,this.waitAnim(!1),[4,y.default.getInstance().pullDetail(t.createTime,t.order,t.groupId)];case 1:return(e=n.sent())[0]?(this.onDetailData(e),[2]):(this.m_ui.load_err.active=!0,[2])}})})},e.prototype.setExpanded=function(t){var e=this;this._expanded=t,this.m_ui.expand_arrow.scaleY=t?-1:1,t?(this.m_ui.pan_frees.active=t,cc.tween(this.m_ui.pan_frees).to(.4,{position:cc.v3(0,-59,0)}).call(function(){e.m_ui.pan_frees.getComponent(cc.Widget).enabled=!0}).start(),this.initFreeList(),this.highSelect()):cc.tween(this.m_ui.pan_frees).to(.4,{position:cc.v3(0,1800,0)}).call(function(){e.m_ui.pan_frees.active=t}).start()},e.prototype.highSelect=function(){for(var t=0;t<this.m_ui.cont_frees.children.length;t++){var e=this.m_ui.cont_frees.children[t];t==this._curIdx?(e.getChildByName("lb_free_rmn").color=b.UIhistory.themeColor,e.getChildByName("lb_free_gld").color=b.UIhistory.themeColor):(e.getChildByName("lb_free_rmn").color=cc.color(255,255,255,255),e.getChildByName("lb_free_gld").color=cc.color(255,255,255,255))}},e.prototype.onShowDetailTip=function(t,e){if(l.tcLog.log("onShowDetailTip"),!(this.curcloneTip&&this.curcloneTip.isValid||!e)){this.m_ui.detailBG.active=!0;var n=cc.instantiate(this.detailTipPeb);n.active=!0,this.curcloneTip=n,n.getComponent(v.UIDetailTip).initData(e),t.removeAllChildren(),t.addChild(n)}},e.prototype.onHideDetailTip=function(){this.m_ui.detailBG.active=!1},e.prototype.onDetailData=function(t){if(this._curIdx=0,this._data=t,this._detailData=this._data[this._curIdx].round_list,this._detailData&&this._detailData[this._ddIndex]){this.m_ui.expand_arrow.active=this._data.length>1;var e=g.default.formatTime2(this._data[this._curIdx].create_timestamp)+" (GMT+8:00)";this.m_ui.lb_title_filter.getComponent(cc.Label).string=e.replace(/-/g,"/"),this.initPages(),this.selectPage(this._curIdx)}},e.prototype.initPages=function(){var t=this.m_ui.pages;this.pages.forEach(function(t){return t.destroy()}),this.pages.length=0;var e=this.getTotalNum();l.tcLog.log("initPages",e);for(var n=0;n<e;n++){var o=cc.instantiate(this.prfPage);t.addChild(o),o.setPosition(810*n,0,0),o.active=0==n,this.pages[n]=o,this.refreshPageData(n)}this.waitAnim(!0)},e.prototype.getTotalNum=function(){var t=0;return this._data.forEach(function(e){t+=e.round_list.length}),t},e.prototype.findCurIdx=function(t){for(var e=0,n=0;n<this._data.length;n++){var o=e+this._data[n].round_list.length;if(t<o)return n;e=o}return this._data.length-1},e.prototype.initFreeList=function(){var t=this;if(!this._initedFL){this._initedFL=!0;for(var e=this._data.length-1,n=function(n){var i=o.m_ui.cont_frees.children[n];i?i.getChildByName("lb_free_rmn").getComponent(cc.Label).string=0==n?a.tcI18n.i18nLabel("FortuneMouseHistory.HistoryDetailItemPrefabNormalSpin"):a.tcI18n.i18nLabel("FortuneMouseHistory.HistoryDetailItemPrefabRespin")+": "+n+"/"+e:((i=cc.instantiate(o.m_ui.cont_frees.children[0])).parent=o.m_ui.cont_frees,i.getChildByName("lb_free_rmn").getComponent(cc.Label).string=0==n?a.tcI18n.i18nLabel("FortuneMouseHistory.HistoryDetailItemPrefabNormalSpin"):a.tcI18n.i18nLabel("FortuneMouseHistory.HistoryDetailItemPrefabRespin")+": "+n+"/"+e),l.tcLog.log("initFreeList:",n,"  ",o._data[n].round_list[0].player_win_lose);var r=o._data[n].round_list[0].player_win_lose<0?"-":"";i.getChildByName("lb_free_gld").getComponent(cc.Label).string=0==n?r+""+u.currency.getSymbol()+u.currency.formatWithSymbol(Math.abs(o._data[n].round_list[0].player_win_lose)):""+u.currency.getSymbol()+u.currency.formatWithSymbol(o._data[n].round_list[0].player_win_lose),p.default.addClickEvent(i,function(){t.selectPage(n),t.setExpanded(!1),t.highSelect()},o,n,.96)},o=this,i=0;i<this._data.length;i++)n(i)}},e.prototype.setTitleName=function(){if(this._data[this._curIdx]){var t=this._data.length-1,e=this._curIdx;this.m_ui.lb_title.getComponent(cc.Label).string=0==t?a.tcI18n.i18nLabel("FortuneMouseHistory.HistoryDetailItemPrefabNormalSpin"):0==e?a.tcI18n.i18nLabel("FortuneMouseHistory.HistoryDetailItemPrefabNormalSpin"):a.tcI18n.i18nLabel("FortuneMouseHistory.HistoryDetailItemPrefabRespin")+": "+e+"/"+t}else this.m_ui.lb_title.getComponent(cc.Label).string=""},e.prototype.refreshPageData=function(t){var e=this.getDetailData(t);l.tcLog.info("refreshPageData ","  pageIdx:",t,"  _curIdx:",this._curIdx,e.data),window.changeOrderNo&&window.changeOrderNo(e.data.round_no),this.getDetailData(this._data.length-1),this.pages[t].getComponent(f.CompHisPage).setData(e.data,e.isFree,e.hasNext,t)},e.prototype.getDetailData=function(t){for(var e=0,n=0;n<this._data.length;n++){var o=this._data[n],i=e+o.round_list.length;if(t<i)return{data:o.round_list[t-e],isFree:o.free_total_times!=o.free_remain_times,hasNext:0!=o.round_list.length};e=i}},e.prototype.getDetailDatas=function(t){for(var e=0,n=0;n<this._data.length;n++){var o=this._data[n],i=e+o.round_list.length;if(t<i)return{data:o.round_list[t-e],isFree:o.free_total_times!=o.free_remain_times,hasNext:0!=o.round_list.length};e=i}},e.prototype.turnPage=function(t){var e=this._ddIndex;this.pages.forEach(function(t){cc.Tween.stopAllByTarget(t),t.active=!1}),cc.warn("turnPage"," len:",this.pages.length,"curIdx:",e,"nextIdx:",t),this.getDetailData(t),this.getDetailData(this._data.length-1);var n=this.pages[e],o=this.pages[t];n.active=!0,o.active=!0;var i=n.width;t>e?(n.setPosition(0,n.position.y,n.position.z),o.setPosition(i,o.position.y,o.position.z),cc.tween(n).by(.4,{position:cc.v3(-i,0,0)},{easing:cc.easing.cubicOut}).start(),cc.tween(o).by(.4,{position:cc.v3(-i,0,0)},{easing:cc.easing.cubicOut}).start()):(n.setPosition(0,n.position.y,n.position.z),o.setPosition(-i,o.position.y,o.position.z),cc.tween(n).by(.4,{position:cc.v3(i,0,0)},{easing:cc.easing.cubicOut}).start(),cc.tween(o).by(.4,{position:cc.v3(i,0,0)},{easing:cc.easing.cubicOut}).start()),this._ddIndex=t,this.m_ui.btn_pre.active=0!=this._ddIndex,this.m_ui.btn_next.active=this._ddIndex!=this.getTotalNum()-1,this._curIdx=this.findCurIdx(this._ddIndex),this.setTitleName()},e.prototype.findIndexZore=function(t){for(var e=0,n=0;n<this._data.length;n++){var o=this._data[n];if(n==t)break;e+=o.round_list.length}return e},e.prototype.selectPage=function(t){this._ddIndex=this.findIndexZore(t),console.warn("selectPage",this._ddIndex,t),this.getDetailData(t),this.getDetailData(this._data.length-1);var e=this.pages[this._ddIndex];e&&(this.pages.forEach(function(t){cc.Tween.stopAllByTarget(t),t.active=!1}),e.active=!0,this._curIdx=t,this.m_ui.btn_pre.active=0!=this._ddIndex,this.m_ui.btn_next.active=this._ddIndex!=this.getTotalNum()-1,console.warn("\u603b\u9875\u6570",this.getTotalNum()-1,this._ddIndex),e.position=e.position.set(new cc.Vec3(0,e.position.y,e.position.z)),this.setTitleName())},e.prototype.waitAnim=function(t){var e=this;return new Promise(function(n){e.m_ui.loadtip.active=!0;var o=e.m_ui.loadtip;cc.Tween.stopAllByTarget(o),o.opacity=255,t?cc.tween(o).to(.2,{opacity:0}).call(function(){n()}).start():(o.opacity=0,cc.tween(o).to(.2,{opacity:255}).delay(.5).call(function(){n()}).start())})},r([S(cc.Prefab)],e.prototype,"prfPage",void 0),r([S(cc.Prefab)],e.prototype,"detailTipPeb",void 0),r([S(cc.Boolean)],e.prototype,"isAnim",void 0),r([m],e)}(d.BaseView);n.UIHisDetail=w,cc._RF.pop()},{"../../../../../script/framework/i18n/i18n":void 0,"../../../../../script/framework/log/log":void 0,"../../../../../script/pkg/currency":void 0,"../script/PgEvent":"PgEvent","./BaseView":"BaseView","./CocosUtil":"CocosUtil","./CompHisPage":"CompHisPage","./DateUtil":"DateUtil","./RecordMgr":"RecordMgr","./UIDetailTip":"UIDetailTip","./UIhistory":"UIhistory"}],UIhistory:[function(t,e,n){"use strict";cc._RF.push(e,"54713LNUxxE94a4/8MxcMmz","UIhistory");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},c=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function c(t){try{a(o.next(t))}catch(e){r(e)}}function s(t){try{a(o.throw(t))}catch(e){r(e)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(c,s)}a((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return a([t,e])}}function a(r){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,o=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(s){r=[6,s],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.UIhistory=void 0;var a=t("../../../../../script/config/config"),l=t("../../../../../script/framework/i18n/i18n"),u=t("../../../../../script/framework/log/log"),h=t("../../../../../script/framework/res/res"),d=t("../../../../../script/pkg/currency"),p=t("../script/PgEvent"),f=t("./BaseView"),g=t("./CocosUtil"),y=t("./DateUtil"),v=t("./RecordMgr"),b=t("./UIHisDetail"),_=cc._decorator,m=_.ccclass,S=_.property,w=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.itemPre=new cc.Prefab,e}var n;return i(e,t),n=e,e.prototype.onLoad=function(){u.tcLog.log("onLoad"),g.default.traverseNodes(this.node,this.m_ui),this.isFristOpen=!0,this.m_ui.loadtipBig=cc.find("aniRoot/loadtipBig",this.node),this.m_ui.aniRoot=cc.find("aniRoot",this.node),this.m_ui.content=cc.find("aniRoot/ScrollView/view/content",this.node),this.m_ui.lb_title_filter=cc.find("aniRoot/top/lb_title_filter",this.node),this.m_ui.lb_filter=cc.find("aniRoot/bottom/Node/lb_filter",this.node),this.m_ui.load_err=cc.find("aniRoot/load_err",this.node),this.m_ui.retry=cc.find("aniRoot/load_err/retry",this.node),this.m_ui.retry.addComponent(cc.Button),this.m_ui.err_close=cc.find("aniRoot/load_err/err_close",this.node),this.m_ui.err_close.addComponent(cc.Button),this.m_ui.lb_record_cnt=cc.find("aniRoot/bottom/Node/lb_record_cnt",this.node),this.m_ui.lb_total_bet=cc.find("aniRoot/bottom/Node/lb_total_bet",this.node),this.m_ui.lb_total_profit=cc.find("aniRoot/bottom/Node/lb_total_profit",this.node),this.m_ui.lb_tip_none=cc.find("aniRoot/lb_tip_none",this.node),this.m_ui.load_err.active=!1,cc.systemEvent.on(p.pgGameEvent.ref_record_filter,this.onSearchFilterChg,this),this.m_ui.ScrollView.on("scrolling",this.scrollViewEventHandler,this),this.m_ui.lab_bet.getComponent(cc.Label).string=l.tcI18n.i18nLabel("History.HistoryMainPagePayout")+"("+d.currency.getSymbol()+")",this.m_ui.lab_profit.getComponent(cc.Label).string=l.tcI18n.i18nLabel("History.HistoryRecordTotalWin")+"("+d.currency.getSymbol()+")",this.m_ui.lab_timezone.getComponent(cc.Label).string=y.default.getGMTString(),cc.systemEvent.on(p.pgGameEvent.close_history,this.onCloseHistory,this)},e.prototype.scrollViewEventHandler=function(t){if(!v.default.getInstance().isFullData){var e=t.getComponent(cc.ScrollView).content.y,n=v.default.getInstance()._shi_len,o=v.default.getInstance()._loaded;e>=116*(n-10)&&!o&&(v.default.getInstance()._loaded=!0,this.getData())}},e.prototype.onCloseHistory=function(){this.isFristOpen=!0},e.prototype.start=function(){var t,e;return c(this,void 0,void 0,function(){var o=this;return s(this,function(i){switch(i.label){case 0:return u.tcLog.log("start"),[4,this.waitAnim(!1)];case 1:return i.sent(),this.fistTip.active=!1,0==n.isFristReqRecord&&(n.isFristReqRecord=!0,this.fistTip.active=!0),null===(t=this.m_ui.retry)||void 0===t||t.on("click",function(){return c(o,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return this.m_ui.load_err.active=!1,[4,this.waitAnim(!1)];case 1:return t.sent(),this.isFristOpen=!0,this.getData(),[2]}})})}),null===(e=this.m_ui.err_close)||void 0===e||e.on("click",function(){return c(o,void 0,void 0,function(){return s(this,function(){return cc.systemEvent.emit(p.pgGameEvent.close_history_view),this.isFristOpen=!0,[2]})})}),g.default.addClickEvent(this.m_ui.btn_filter,function(){cc.systemEvent.emit(p.pgGameEvent.open_his_selectdate_view)},this),[2]}})})},e.prototype.onEnable=function(){var t=this;this.m_ui.loadtipBig.opacity=255,u.tcLog.log("onEnable"),this.scheduleOnce(function(){t.isFristOpen&&(t.m_ui.content.y=0,t.isFristOpen=!1,t.initList(),v.default.getInstance().setFilter(1,1))},.2)},e.prototype.onDestroy=function(){this.unschedule(this.getData)},e.prototype.waitAnim=function(t){var e=this;return new Promise(function(n){n(),e.m_ui.loadtipBig.active=!0,cc.Tween.stopAllByTarget(e.m_ui.loadtipBig.opacity),e.m_ui.loadtipBig.opacity=255,t?cc.tween(e.m_ui.loadtipBig).delay(.3).to(.2,{opacity:0}).call(function(){n()}).start():cc.tween(e.m_ui.loadtipBig).call(function(){n()}).start()})},e.prototype.initList=function(){this.m_ui.content.removeAllChildren()},e.prototype.onSearchFilterChg=function(){return c(this,void 0,void 0,function(){var t,e;return s(this,function(n){switch(n.label){case 0:return this.initList(),1==v.default.getInstance().filterFrom?(this.m_ui.lb_title_filter.getComponent(cc.Label).string=l.tcI18n.i18nLabel("History.HistoryCalenderToday"),this.m_ui.lb_filter.getComponent(cc.Label).string=l.tcI18n.i18nLabel("History.HistoryCalenderToday")):7==v.default.getInstance().filterFrom?(this.m_ui.lb_title_filter.getComponent(cc.Label).string=l.tcI18n.i18nLabel("History.HistoryCalenderWeek"),this.m_ui.lb_filter.getComponent(cc.Label).string=l.tcI18n.i18nLabel("History.HistoryCalenderWeek")):(t=y.default.formatDay(v.default.getInstance().filterFrom,"/"),e=y.default.formatDay(v.default.getInstance().filterTo,"/"),this.m_ui.lb_title_filter.getComponent(cc.Label).string=t+" - "+e,this.m_ui.lb_filter.getComponent(cc.Label).string=t+" - "+e),0!=v.default.getInstance()._offset?[3,2]:[4,this.waitAnim(!1)];case 1:n.sent(),n.label=2;case 2:return this.getData(),[2]}})})},e.prototype.getData=function(){return c(this,void 0,void 0,function(){var t;return s(this,function(e){switch(e.label){case 0:return[4,this.refGetData()];case 1:return t=e.sent(),console.info("===>>>>>>>",t),t&&this.onReqHistory(t),[2,t]}})})},e.prototype.refGetData=function(){return c(this,void 0,Promise,function(){var t,e,n;return s(this,function(o){switch(o.label){case 0:return[4,v.default.getInstance().pullData()];case 1:return t=o.sent(),u.tcLog.log("refGetData",t),t?(e=t&&t.data&&t.data.count||0,v.default.getInstance()._dataCount=e,t&&t.data&&0!=t.data.list.length?(u.tcLog.log("_offset:",v.default.getInstance()._offset),v.default.getInstance()._shi_len+=t.data.list.length,v.default.getInstance()._offset+=1,v.default.getInstance().appendDatas(t),n=v.default.getInstance().getDataList().length,u.tcLog.log("len",n),[2,t]):[2,t]):(this.m_ui.load_err.active=!0,[2,null])}})})},e.prototype.onReqHistory=function(t){cc.systemEvent.emit(p.pgGameEvent.ui_req_loading_complete),this.fistTip.active=!1,v.default.getInstance()._loaded=!1,v.default.getInstance().isFullData?(this.m_ui.loadtip_get_all.active=!1,this.m_ui.lb_tip_get_all.active=!0):(this.m_ui.loadtip_get_all.active=!0,this.m_ui.lb_tip_get_all.active=!1);var e=t.data;this.m_ui.lb_record_cnt.getComponent(cc.Label).string=(e&&e.count||0)+" "+l.tcI18n.i18nLabel("History.HistoryRecords"),this.m_ui.lb_total_bet.getComponent(cc.Label).string=""+d.currency.getSymbol()+d.currency.formatWithSymbol(e&&e.bet||0),this.m_ui.lb_total_profit.getComponent(cc.Label).string=""+d.currency.getSymbol()+d.currency.formatWithSymbol(e&&e.win||0);var n=e&&e.count||0;this.m_ui.lb_tip_none.active=1==v.default.getInstance()._offset&&n<=0,1==v.default.getInstance()._offset&&n<=0&&(this.m_ui.lb_tip_get_all.active=!1);for(var o=0;o<e.list.length;o++){var i=cc.instantiate(this.itemPre);this.m_ui.content.addChild(i),i.getComponent(B)||i.addComponent(B);var r=i.getComponent(B);r&&r.setGameID(e.list[o],o)}},e.isFristReqRecord=!1,e.themeColor=cc.color(255,200,36,255),r([S(cc.Prefab)],e.prototype,"itemPre",void 0),r([S(cc.Node)],e.prototype,"fistTip",void 0),n=r([m],e)}(f.BaseView);n.UIhistory=w;var B=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.setGameID=function(t,e){var n,o=this,i=cc.find("conts",this.node),r=i.getChildByName("layout"),l=r.getChildByName("other");l.getChildByName("free_ra").color=w.themeColor,l.getChildByName("lucky_neko_flag").color=w.themeColor,l.getChildByName("continuous").getChildByName("icon").color=w.themeColor,i.getChildByName("lb_time").getComponent(cc.Label).string=y.default.formatTime1(t.createTime,2),r.getChildByName("lb_order").getComponent(cc.Label).string=t.order.substring(0,9)+"\n"+t.order.substring(9),i.getChildByName("lb_bet").getComponent(cc.Label).string=d.currency.formatNoSymbol(t.bet);var p=t.win,f=i.getChildByName("lb_profit").getComponent(cc.Label);f.string=d.currency.formatNoSymbol(t.win),f.node.color=p>0&&cc.color(255,255,255,255)||cc.color(190,190,190,255),this.node.color=e%2==0&&cc.color(52,52,63,255)||cc.color(48,48,60,255),l.getChildByName("free_ra").active=t.trigger,l.getChildByName("lucky_neko_flag").active=!1,l.active=t.trigger,null===(n=this.node)||void 0===n||n.on("click",function(){return c(o,void 0,void 0,function(){var e,n,o,i;return s(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,h.tcRes.load("PGGameRes",cc.Prefab,"prefab/history/UIHisDetail")];case 1:return e=r.sent(),(n=cc.instantiate(e)).setParent(a.config.uiNode.dialog),o=n.getComponent(b.UIHisDetail),cc.tween(n).set({position:cc.v3(n.width,0,0)}).to(.3,{position:cc.v3(0,0,0)}).start(),o&&o.before(t),[3,3];case 2:return i=r.sent(),u.tcLog.error("PgGameControlPanellogic show onClickBtnHistory error,"+i),[3,3];case 3:return[2]}})})})},e}(cc.Component);cc._RF.pop()},{"../../../../../script/config/config":void 0,"../../../../../script/framework/i18n/i18n":void 0,"../../../../../script/framework/log/log":void 0,"../../../../../script/framework/res/res":void 0,"../../../../../script/pkg/currency":void 0,"../script/PgEvent":"PgEvent","./BaseView":"BaseView","./CocosUtil":"CocosUtil","./DateUtil":"DateUtil","./RecordMgr":"RecordMgr","./UIHisDetail":"UIHisDetail"}],UIselectdate:[function(t,e,n){"use strict";cc._RF.push(e,"343577xSFxN5Jmpt/Lca9ks","UIselectdate");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0}),n.UIselectdate=void 0;var c=t("../script/PgEvent"),s=t("./BaseView"),a=t("./CocosUtil"),l=t("./RecordMgr"),u=t("./UIhistory"),h=cc._decorator,d=h.ccclass,p=(h.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onLoad=function(){a.default.traverseNodes(this.node,this.m_ui),a.default.setModal(this.node,!0),this.m_ui.lb_title.color=u.UIhistory.themeColor,this.m_ui.close.color=u.UIhistory.themeColor},e.prototype.start=function(){a.default.addClickEvent(this.m_ui.btn_close,function(){cc.systemEvent.emit(c.pgGameEvent.close_his_selectdate_view)},this),a.default.addClickEvent(this.m_ui.btn_today,function(){l.default.getInstance().setFilter(1,1),cc.systemEvent.emit(c.pgGameEvent.close_his_selectdate_view)},this),a.default.addClickEvent(this.m_ui.btn_7day,function(){l.default.getInstance().setFilter(7,7),cc.systemEvent.emit(c.pgGameEvent.close_his_selectdate_view)},this),a.default.addClickEvent(this.m_ui.btn_selfdef,function(){cc.systemEvent.emit(c.pgGameEvent.open_his_dateSelect_view)},this)},e.prototype.show=function(){this.node.active=!0;var t=l.default.getInstance().filterFrom;this.m_ui.lb_7day_title.color=7==t?u.UIhistory.themeColor:cc.color(175,175,175,255),this.m_ui.lb_today_title.color=1==t?u.UIhistory.themeColor:cc.color(175,175,175,255),this.m_ui.lb_selfdef_title.color=1!=t&&7!=t?u.UIhistory.themeColor:cc.color(175,175,175,255)},r([d],e)}(s.BaseView));n.UIselectdate=p,cc._RF.pop()},{"../script/PgEvent":"PgEvent","./BaseView":"BaseView","./CocosUtil":"CocosUtil","./RecordMgr":"RecordMgr","./UIhistory":"UIhistory"}],btnSpineRotateAni:[function(t,e,n){"use strict";cc._RF.push(e,"bbfd2HMQ49JHqeEaJ+CMzEr","btnSpineRotateAni");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,a=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.startRotate=function(t){void 0===t&&(t=8),cc.Tween.stopAllByTarget(this.node),cc.tween(this.node).by(t,{angle:-360}).union().repeatForever().start()},e.prototype.onDisable=function(){cc.Tween.stopAllByTarget(this.node)},r([s],e)}(cc.Component));n.default=a,cc._RF.pop()},{}],btnSpineRotateSpecialAni:[function(t,e,n){"use strict";cc._RF.push(e,"70d977/JU5LBqeYFLRRPpOH","btnSpineRotateSpecialAni");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,a=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onEnable=function(){var t=this;cc.tween(this.node).to(.5,{angle:-360}).call(function(){t.node&&(t.node.angle=0)}).union().repeatForever().start()},r([s],e)}(cc.Component));n.default=a,cc._RF.pop()},{}],pgGameBetSettingView:[function(t,e,n){"use strict";cc._RF.push(e,"f4229yHWBBOO6V0FAsj2AR3","pgGameBetSettingView");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},c=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),i=0;for(e=0;e<n;e++)for(var r=arguments[e],c=0,s=r.length;c<s;c++,i++)o[i]=r[c];return o};Object.defineProperty(n,"__esModule",{value:!0});var s=t("../../../../../script/app/env"),a=t("../../../../../script/framework/audio/audio"),l=t("../../../../../script/framework/log/log"),u=t("../../../../../script/pkg/currency"),h=cc._decorator,d=h.ccclass,p=(h.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.payTimes=0,e.betSizes=[],e.betTimes=[],e.betTotals=[],e.itemHight=0,e.curBetSizeIndex=0,e.curBetTimesIndex=0,e.curBetTotalIndex=0,e.clickBtnSound=a.AudioClipName.CLICKBTN,e}return i(e,t),e.prototype.onLoad=function(){this.btnClose=cc.find("body/btnClose",this.node),this.body=cc.find("body",this.node),this.mask=cc.find("body/mask",this.node),this.bgMask=cc.find("mask",this.node),this.bgMasks=cc.find("masks",this.node),this.labelCurBonus=cc.find("body/nodeBonus/label",this.node).getComponent(cc.Label),this.labelCurBet=cc.find("body/nodeBet/label",this.node).getComponent(cc.Label),this.labelcurWin=cc.find("body/nodeWin/label",this.node).getComponent(cc.Label),this.labelPayTimes=cc.find("body/scrollView/curSelectNote/labelBetTimes",this.node).getComponent(cc.Label),this.scrollViewBetSize=cc.find("body/scrollView/betSize",this.node).getComponent(cc.ScrollView),this.scrollViewBetTimes=cc.find("body/scrollView/betTimes",this.node).getComponent(cc.ScrollView),this.scrollViewBetTotal=cc.find("body/scrollView/betTotal",this.node).getComponent(cc.ScrollView),this.nodeBetSizeItemConatiner=cc.find("body/scrollView/betSize/view/content",this.node),this.nodeBetTimesItemConatiner=cc.find("body/scrollView/betTimes/view/content",this.node),this.nodeBetTotalItemConatiner=cc.find("body/scrollView/betTotal/view/content",this.node),this.nodelItemOtherScroll=cc.find("body/scrollView/itemSelect",this.node),this.nodeItemTotalScroll=cc.find("body/scrollView/itemTotal",this.node),this.stopBtnBetMask=cc.find("body/stopBtnMask",this.node),this.btnMaxBet=cc.find("body/BtnMaxBet",this.node),this.btnMaxBetBg=cc.find("body/BtnMaxBet/Background",this.node),this.btnOk=cc.find("body/BtnOk",this.node),this.itemHight=this.nodelItemOtherScroll.getContentSize().height,this.bindClickEvent()},e.prototype.bindClickEvent=function(){var t,e,n,o=this;null===(t=this.btnClose)||void 0===t||t.on("click",function(){a.uAudio.getInstance().playEffect(o.clickBtnSound),o.moveOut()}),this.bgMasks.on("click",function(){l.tcLog.info("------------------"),a.uAudio.getInstance().playEffect(o.clickBtnSound),o.moveOut()}),null===(e=this.btnMaxBet)||void 0===e||e.on("click",function(){a.uAudio.getInstance().playEffect(o.clickBtnSound),o.changeBetSize(o.betSizes.length-3,.2,!1),o.changeBetTimes(o.betTimes.length-3),o.btnMaxBetBg.opacity=120}),null===(n=this.btnOk)||void 0===n||n.on("click",function(){a.uAudio.getInstance().playEffect(o.clickBtnSound),o.betChangeCallback&&o.betChangeCallback(o.curBetTotalIndex-2||0),o.moveOut()})},e.prototype.moveOut=function(){var t=this;window.changeTrophiesIconShow&&window.changeTrophiesIconShow(!0),cc.tween(this.body).to(.3,{position:cc.v3(0,-685,0)}).call(function(){t.node.active=!1}).start(),cc.tween(this.bgMask).set({opacity:128}).to(.3,{opacity:0}).start()},e.prototype.init=function(t,e,n,o,i){var r,s,l,u,h,d;void 0===o&&(o=0),void 0===i&&(i=a.AudioClipName.CLICKBTN),this.betSizes=t.slice(),this.betTimes=e,this.betTotals=new(Array.bind.apply(Array,c([void 0],n))),this.clickBtnSound=i,(r=this.betSizes).push.apply(r,[0,-1]),(s=this.betSizes).unshift.apply(s,[-1,0]),(l=this.betTimes).push.apply(l,[0,-1]),(u=this.betTimes).unshift.apply(u,[-1,0]),(h=this.betTotals).push.apply(h,[0,-1]),(d=this.betTotals).unshift.apply(d,[-1,0]),this.payTimes=o||10,this.labelPayTimes.string=this.payTimes.toString(),this.showBetSizeItems(),this.showBetTimesItems(),this.showBetTotalBetItems(),this.bindEvent()},e.prototype.setBetCallback=function(t){this.betChangeCallback=t},e.prototype.bindEvent=function(){var t,e,n,o,i,r;null===(t=this.scrollViewBetSize)||void 0===t||t.node.on("scroll-ended",this.onScorllViewBetSizeScrollEnd,this),null===(e=this.scrollViewBetTimes)||void 0===e||e.node.on("scroll-ended",this.onScorllViewBetTimesScrollEnd,this),null===(n=this.scrollViewBetTotal)||void 0===n||n.node.on("scroll-ended",this.onScorllViewBetTotalScrollEnd,this),null===(o=this.scrollViewBetSize)||void 0===o||o.node.on("scrolling",this.onSelecttingBetValue,this),null===(i=this.scrollViewBetTimes)||void 0===i||i.node.on("scrolling",this.onSelecttingBetValue,this),null===(r=this.scrollViewBetTotal)||void 0===r||r.node.on("scrolling",this.onSelecttingBetValue,this)},e.prototype.show=function(t,e){var n=this;window.changeTrophiesIconShow&&window.changeTrophiesIconShow(!1),this.node.active=!0,this.mask.opacity=255,cc.tween(this.body).set({position:cc.v3(0,-685,0)}).to(.3,{position:cc.v3(0,0,0)}).call(function(){cc.tween(n.mask).set({opacity:255}).to(.5,{opacity:0}).start()}).start(),cc.tween(this.bgMask).set({opacity:0}).to(.3,{opacity:128}).start(),this.initScrollViews(t),this.labelCurBonus.string=""+u.currency.getSymbol()+u.currency.format(s.env.curGameData.balance),this.labelCurBet.string=""+u.currency.getSymbol()+u.currency.format(t),this.labelcurWin.string=""+u.currency.getSymbol()+u.currency.format(e)},e.prototype.showBetSizeItems=function(){var t=this;this.betSizes.forEach(function(e,n){var o=cc.instantiate(t.nodelItemOtherScroll);o.active=!0,o.setParent(t.nodeBetSizeItemConatiner),o.getComponent(cc.Label).string=e<0?"  ":0==e?"-":""+u.currency.getSymbol()+u.currency.format(e),o.on("click",function(){n>1&&n<t.betSizes.length-2&&t.onClickToChangeBetSize(n)},t)})},e.prototype.showBetTimesItems=function(){var t=this;this.betTimes.forEach(function(e,n){var o=cc.instantiate(t.nodelItemOtherScroll);o.active=!0,o.setParent(t.nodeBetTimesItemConatiner),o.getComponent(cc.Label).string=e<0?"  ":0==e?"-":e.toString(),o.on("click",function(){n>1&&n<t.betTimes.length-2&&t.onClickToChangeBetTimes(n)},t)})},e.prototype.showBetTotalBetItems=function(){var t=this;this.betTotals.forEach(function(e,n){var o=cc.instantiate(t.nodeItemTotalScroll);o.active=!0,o.setParent(t.nodeBetTotalItemConatiner),o.getComponent(cc.Label).string=e<0?" ":0==e?"-":""+u.currency.getSymbol()+u.currency.format(e),o.on("click",function(){n>1&&n<t.betTotals.length-2&&t.onClickToChangeBetTotal(n)},t)})},e.prototype.onClickToChangeBetSize=function(t,e){void 0===e&&(e=.2),a.uAudio.getInstance().playEffect(this.clickBtnSound),this.changeBetSize(t)},e.prototype.changeBetSize=function(t,e,n){var o=this;void 0===e&&(e=.2),void 0===n&&(n=!0),this.curBetSizeIndex=t,cc.tween(this.nodeBetSizeItemConatiner).to(e,{position:cc.v3(0,(t-2)*this.itemHight,0)}).call(function(){n?o.upateBetTotalByBetSizeAndTimes():o.checkStopBtnBetMaskStatus(!1)}).start()},e.prototype.onClickToChangeBetTimes=function(t,e){void 0===e&&(e=.2),a.uAudio.getInstance().playEffect(this.clickBtnSound),this.changeBetTimes(t)},e.prototype.changeBetTimes=function(t,e,n){var o=this;void 0===e&&(e=.2),void 0===n&&(n=!0),this.curBetTimesIndex=t,cc.tween(this.nodeBetTimesItemConatiner).to(e,{position:cc.v3(0,(t-2)*this.itemHight,0)}).call(function(){n?o.upateBetTotalByBetSizeAndTimes():o.checkStopBtnBetMaskStatus(!1)}).start()},e.prototype.onClickToChangeBetTotal=function(t,e){void 0===e&&(e=.2),a.uAudio.getInstance().playEffect(this.clickBtnSound),this.changeBetTotal(t,e)},e.prototype.changeBetTotal=function(t,e,n){var o=this;void 0===e&&(e=.2),void 0===n&&(n=!0),this.curBetTotalIndex=t,cc.tween(this.nodeBetTotalItemConatiner).to(e,{position:cc.v3(0,(t-2)*this.itemHight,0)}).call(function(){n?o.changeBetSizeAndTimesScrollView(t):o.checkStopBtnBetMaskStatus(!1)}).start(),this.curBetTotalIndex==this.betTotals.length-3?this.btnMaxBetBg.opacity=120:this.btnMaxBetBg.opacity=255},e.prototype.upateBetTotalByBetSizeAndTimes=function(t){void 0===t&&(t=.2);var e=u.currency.accMul(this.betSizes[this.curBetSizeIndex],this.betTimes[this.curBetTimesIndex]);e=u.currency.accMul(e,this.payTimes);var n=this.betSizes[this.curBetSizeIndex]*this.betTimes[this.curBetTimesIndex]*this.payTimes,o=Number.parseFloat(n.toFixed(2)),i=this.betTotals.indexOf(o);i!=this.curBetTotalIndex&&this.changeBetTotal(i,t,!1)},e.prototype.onScorllViewBetSizeScrollEnd=function(){var t,e=(null===(t=this.scrollViewBetSize)||void 0===t?void 0:t.getContentPosition())||cc.v2(0,0),n=Math.floor(e.y/this.itemHight)+2;n=Math.max(2,n),n=Math.min(this.betSizes.length-2,n),this.checkStopBtnBetMaskStatus(this.curBetSizeIndex!=n),this.changeBetSize(n)},e.prototype.onScorllViewBetTimesScrollEnd=function(){var t,e=(null===(t=this.scrollViewBetTimes)||void 0===t?void 0:t.getContentPosition())||cc.v2(0,0),n=Math.floor(e.y/this.itemHight)+2;n=Math.max(2,n),n=Math.min(this.betTimes.length-2,n),this.checkStopBtnBetMaskStatus(this.curBetTimesIndex!=n),this.changeBetTimes(n)},e.prototype.onScorllViewBetTotalScrollEnd=function(){var t,e=(null===(t=this.scrollViewBetTotal)||void 0===t?void 0:t.getContentPosition())||cc.v2(0,0),n=Math.floor(e.y/this.itemHight)+2;n=Math.max(2,n),n=Math.min(this.betTotals.length-2,n),this.checkStopBtnBetMaskStatus(this.curBetTotalIndex!=n),this.changeBetTotal(n)},e.prototype.changeBetSizeAndTimesScrollView=function(t){for(var e=-1,n=-1,o=2;o<this.betSizes.length-2;++o)for(var i=2;i<this.betTimes.length-2;++i){var r=u.currency.accMul(this.betSizes[o],this.betTimes[i]);if((r=u.currency.accMul(r,this.payTimes))==this.betTotals[t]){e=o,n=i;break}}this.curBetSizeIndex!=e&&e>-1&&this.changeBetSize(e,.2,!1),this.curBetTimesIndex!=n&&n>-1&&this.changeBetTimes(n,.2,!1)},e.prototype.initScrollViews=function(t){for(var e=2;e<this.betSizes.length-2;++e)for(var n=2;n<this.betTimes.length-2;++n){var o=u.currency.accMul(this.betSizes[e],this.betTimes[n]);if((o=u.currency.accMul(o,this.payTimes))==t){this.curBetSizeIndex=e,this.curBetTimesIndex=n;break}}this.curBetSizeIndex<2&&(this.curBetSizeIndex=2),this.curBetTimesIndex<2&&(this.curBetTimesIndex=2),this.changeBetSize(this.curBetSizeIndex,0,!1),this.changeBetTimes(this.curBetTimesIndex,0,!1),this.upateBetTotalByBetSizeAndTimes(0)},e.prototype.onSelecttingBetValue=function(){this.checkStopBtnBetMaskStatus(!0)},e.prototype.checkStopBtnBetMaskStatus=function(t){this.stopBtnBetMask.active=t},r([d],e)}(cc.Component));n.default=p,cc._RF.pop()},{"../../../../../script/app/env":void 0,"../../../../../script/framework/audio/audio":void 0,"../../../../../script/framework/log/log":void 0,"../../../../../script/pkg/currency":void 0}],recorddetail:[function(t,e,n){"use strict";cc._RF.push(e,"9d65bHrsE1JLqNm6GIjjl2F","recorddetail"),Object.defineProperty(n,"__esModule",{value:!0}),n.TItemtype=void 0,function(t){t[t.ITEM_TYPE_NIL=0]="ITEM_TYPE_NIL",t[t.ITEM_TYPE_WILD=1]="ITEM_TYPE_WILD",t[t.ITEM_TYPE_SCATTER=2]="ITEM_TYPE_SCATTER",t[t.ITEM_TYPE_H1=3]="ITEM_TYPE_H1",t[t.ITEM_TYPE_H2=4]="ITEM_TYPE_H2",t[t.ITEM_TYPE_H3=5]="ITEM_TYPE_H3",t[t.ITEM_TYPE_H4=6]="ITEM_TYPE_H4",t[t.ITEM_TYPE_A=7]="ITEM_TYPE_A",t[t.ITEM_TYPE_K=8]="ITEM_TYPE_K",t[t.ITEM_TYPE_Q=9]="ITEM_TYPE_Q",t[t.ITEM_TYPE_J=10]="ITEM_TYPE_J",t[t.ITEM_TYPE_10=11]="ITEM_TYPE_10",t[t.GOLD_MOD=16]="GOLD_MOD",t[t.ITEM_TYPE_H1_GOLD=19]="ITEM_TYPE_H1_GOLD",t[t.ITEM_TYPE_H2_GOLD=20]="ITEM_TYPE_H2_GOLD",t[t.ITEM_TYPE_H3_GOLD=21]="ITEM_TYPE_H3_GOLD",t[t.ITEM_TYPE_H4_GOLD=22]="ITEM_TYPE_H4_GOLD",t[t.ITEM_TYPE_A_GOLD=23]="ITEM_TYPE_A_GOLD",t[t.ITEM_TYPE_K_GOLD=24]="ITEM_TYPE_K_GOLD",t[t.ITEM_TYPE_Q_GOLD=25]="ITEM_TYPE_Q_GOLD",t[t.ITEM_TYPE_J_GOLD=26]="ITEM_TYPE_J_GOLD",t[t.ITEM_TYPE_10_GOLD=27]="ITEM_TYPE_10_GOLD"}(n.TItemtype||(n.TItemtype={})),cc._RF.pop()},{}],shared_config:[function(t,e,n){"use strict";cc._RF.push(e,"2bcd1MFnPhJD4fzahDPBgg3","shared_config"),Object.defineProperty(n,"__esModule",{value:!0}),n.SharedConfig=n.SCORE_MULTIPLE=void 0;var o=t("./MoneyUtils");n.SCORE_MULTIPLE=1e4;var i=function(){function t(){}return t.ScoreFormat=function(t){return o.MoneyUtil.Format(t/n.SCORE_MULTIPLE)},t.SetThemeColor=function(e){t.THEME_COLOR=e,Object.freeze(t.THEME_COLOR)},t}();n.SharedConfig=i,window.SharedConfig=i,cc._RF.pop()},{"./MoneyUtils":"MoneyUtils"}],shared_record_custom_date:[function(t,e,n){"use strict";cc._RF.push(e,"134f9blyQlLiaENIVSoPbpY","shared_record_custom_date");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0}),n.SharedRecordCustomDate=void 0;var c=t("../../../../../script/pkg/adapter-v2"),s=t("./shared_record"),a=t("./shared_record/DateEx"),l=t("./shared_record/shared_record_custom_select_list"),u=cc._decorator,h=u.ccclass,d=u.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.selectList=null,e.nowDate=null,e.record=null,e}var n;return i(e,t),n=e,e.getInstance=function(){return this.instance||(this.instance=new n),this.instance},e.prototype.onLoad=function(){var t=new Date;this.nowDate={year:t.getFullYear(),month:t.getMonth()+1,day:t.getDate()}},e.prototype.start=function(){this.lbStartYear.string=""+this.nowDate.year,this.lbStartMonth.string=""+this.nowDate.month,this.lbStartDay.string=""+this.nowDate.day,this.lbEndYear.string=""+this.nowDate.year,this.lbEndMonth.string=""+this.nowDate.month,this.lbEndDay.string=""+this.nowDate.day},e.prototype.setDate=function(t){this.record=t},e.prototype.onBtnSuccess=function(){var t=this.getStartDate(),e=this.getEndDate(),n=a.DateEx.getZeroTimestamp(t.year,t.month-1,t.day),o=a.DateEx.getZeroTimestamp(e.year,e.month-1,e.day);o+=86399e3,this.node.destroy(),this.record.emit(s.SharedRecordEvent.REQUEST_CUSTOM_DATE_RECORD,n,o,s.SelectDateType.CUSTOM)},e.prototype.onBtnBack=function(){this.node.destroy()},e.prototype.onBtnStartYear=function(){for(var t=this,e=[],n=this.getMonthsAgo().year;n<=this.nowDate.year;n++)e.push(n);var o=this.getStartDate().year;this.getSelectList(this.btnStartYear.node,e,o,function(e){if(o!=e){if(t.lbStartYear.string=""+e,t.nowDate.year>e)t.lbStartYear.string=""+e,t.lbStartMonth.string=""+((new Date).getMonth()+1-3+12),t.lbStartDay.string=""+new Date(e,Number(t.lbStartMonth.string),0).getDate();else{var n=new Date;t.lbStartYear.string=""+n.getFullYear(),t.lbStartMonth.string=""+(n.getMonth()+1),t.lbStartDay.string=""+n.getDate()}t.updateEndTime(t.getStartDate())}})},e.prototype.onBtnStartMonth=function(){for(var t=this,e=this.getMonthsAgo(),n=this.getStartDate(),o=n.year,i=n.month,r=[],c=0;c<=3;c++){var s=e.month+c;if(e.year<o){if(s<=12)continue;r.push(s-12)}else{if(s>12)break;r.push(s)}}this.getSelectList(this.btnStartMonth.node,r,i,function(e){i!=e&&(t.lbStartMonth.string=""+e,o<t.nowDate.year||t.nowDate.month>e?t.lbStartDay.string=""+a.DateEx.getMonthDay(o,e):t.lbStartDay.string=""+t.nowDate.day,t.updateEndTime(t.getStartDate()))})},e.prototype.onBtnStartDay=function(){var t,e=this,n=this.getStartDate(),o=n.year,i=n.month,r=n.day,c=1;if(o==this.nowDate.year&&i==this.nowDate.month)t=this.nowDate.day;else{t=a.DateEx.getMonthDay(o,i);var s=this.getMonthsAgo();s.year==o&&s.month==i&&(c=Math.max(c,s.day))}for(var l=[],u=c;u<=t;u++)l.push(u);this.getSelectList(this.btnStartDay.node,l,r,function(t){r!=t&&(e.lbStartDay.string=""+t,e.updateEndTime(e.getStartDate()))})},e.prototype.onBtnEndYear=function(){for(var t=this,e=[],n=this.getMonthsAgo().year;n<=this.nowDate.year;n++)e.push(n);var o=this.getEndDate().year;this.getSelectList(this.btnEndYear.node,e,o,function(e){if(o!=e){if(t.lbEndYear.string=""+e,t.nowDate.year>e)t.lbEndYear.string=""+e,t.lbEndMonth.string=""+((new Date).getMonth()+1-3+12),t.lbEndDay.string=""+new Date(e,Number(t.lbEndMonth.string),0).getDate();else{var n=new Date;t.lbEndYear.string=""+n.getFullYear(),t.lbEndMonth.string=""+(n.getMonth()+1),t.lbEndDay.string=""+n.getDate()}t.updateStartTime(t.getEndDate())}})},e.prototype.onBtnEndMonth=function(){var t=this;console.warn("btnendmonth");for(var e=this.getMonthsAgo(),n=this.getEndDate(),o=n.year,i=n.month,r=[],c=0;c<=3;c++){var s=e.month+c;if(e.year<o){if(s<=12)continue;r.push(s-12)}else{if(s>12)break;r.push(s)}}this.getSelectList(this.btnEndMonth.node,r,i,function(e){console.warn("month",i,e),i!=e&&(console.warn("this.nowDate.month",t.nowDate.month),t.lbEndMonth.string=""+e,o<t.nowDate.year||t.nowDate.month>e?t.lbEndDay.string=""+a.DateEx.getMonthDay(o,e):t.lbEndDay.string=""+t.nowDate.day,t.updateStartTime(t.getEndDate()))})},e.prototype.onBtnEndDay=function(){var t,e=this,n=this.getEndDate(),o=n.year,i=n.month,r=n.day,c=1;if(o==this.nowDate.year&&i==this.nowDate.month)t=this.nowDate.day;else{t=a.DateEx.getMonthDay(o,i);var s=this.getMonthsAgo();s.year==o&&s.month==i&&(c=Math.max(c,s.day))}for(var l=[],u=c;u<=t;u++)l.push(u);this.getSelectList(this.btnEndDay.node,l,r,function(t){r!=t&&(e.lbEndDay.string=""+t,e.updateStartTime(e.getEndDate()))})},e.prototype.getStartDate=function(){return{year:Number(this.lbStartYear.getComponent(cc.Label).string),month:Number(this.lbStartMonth.getComponent(cc.Label).string),day:Number(this.lbStartDay.getComponent(cc.Label).string)}},e.prototype.getEndDate=function(){return{year:Number(this.lbEndYear.getComponent(cc.Label).string),month:Number(this.lbEndMonth.getComponent(cc.Label).string),day:Number(this.lbEndDay.getComponent(cc.Label).string)}},e.prototype.updateStartTime=function(t){var e=new Date(t.year,t.month-1,t.day).getTime(),n=e-5184e5,o=this.getMonthsAgo(),i=new Date(o.year,o.month-1,o.day);n<i.getTime()&&(n=i.getTime());var r=this.getStartDate(),c=r.year,s=r.month,a=r.day,l=new Date(c,s-1,a).getTime();if(!(l>=n&&l<=e)){var u=new Date(n);u.getFullYear()!=c&&(this.lbStartYear.string=""+u.getFullYear()),u.getMonth()+1!=s&&(this.lbStartMonth.string=""+(u.getMonth()+1)),u.getDate()!=a&&(this.lbStartDay.string=""+u.getDate())}},e.prototype.updateEndTime=function(t){var e=new Date(t.year,t.month-1,t.day).getTime(),n=e+5184e5,o=new Date(this.nowDate.year,this.nowDate.month-1,this.nowDate.day);n>o.getTime()&&(n=o.getTime());var i=this.getEndDate(),r=i.year,c=i.month,s=i.day,a=new Date(r,c-1,s).getTime();if(!(a>=e&&a<=n)){var l=new Date(n);l.getFullYear()!=r&&(this.lbEndYear.string=""+l.getFullYear()),console.warn("\u66f4\u65b0\u7ed3\u675f\u65f6\u95f4",l.getMonth()+1,c,t),l.getMonth()+1!=c&&(this.lbEndMonth.string=""+(l.getMonth()+1)),l.getDate()!=s&&(this.lbEndDay.string=""+l.getDate())}},e.prototype.getMonthsAgo=function(){var t=Object.assign({},this.nowDate),e=a.DateEx.getMonthsAgo(this.nowDate.year,this.nowDate.month-1,3),n=e.year,o=e.month;t.year=n,t.month=o+1;var i=a.DateEx.getMonthDay(n,o);return t.day=Math.min(t.day,i),t},e.prototype.getSelectList=function(t,e,n,o){if(!cc.isValid(this.selectList)){var i=cc.instantiate(this.recordCustomSelectList);i.active=!0,this.ndSelectList.active=!0,i.parent=this.ndSelectList,this.selectList=i.getComponent(l.SharedRecordCustomSelectList)}if(this.selectList.getTarget()!=t){this.selectList.mystart();var r,s=t;r=c.AdapterV2.getInstance().winSizeHeight>1440?s.convertToWorldSpaceAR(new cc.Vec3(.5*(this.ndSelectList.width-s.width),.5*(this.ndSelectList.height-s.height)-217)):s.convertToWorldSpaceAR(new cc.Vec3(.5*(this.ndSelectList.width-s.width),.5*(this.ndSelectList.height-s.height))),this.selectList.setPosition(r),this.selectList.setTarget(t),this.selectList.setData(e,n),this.selectList.setCallback(o)}else this.selectList.destroySelf()},e.prototype.onBtnCheckSelectList=function(){cc.isValid(this.selectList)&&(this.selectList.destroySelf(),this.selectList=null)},r([d({type:cc.Button})],e.prototype,"btnStartYear",void 0),r([d({type:cc.Button})],e.prototype,"btnStartMonth",void 0),r([d({type:cc.Button})],e.prototype,"btnStartDay",void 0),r([d({type:cc.Button})],e.prototype,"btnEndYear",void 0),r([d({type:cc.Button})],e.prototype,"btnEndMonth",void 0),r([d({type:cc.Button})],e.prototype,"btnEndDay",void 0),r([d({type:cc.Label})],e.prototype,"lbStartYear",void 0),r([d({type:cc.Label})],e.prototype,"lbStartMonth",void 0),r([d({type:cc.Label})],e.prototype,"lbStartDay",void 0),r([d({type:cc.Label})],e.prototype,"lbEndYear",void 0),r([d({type:cc.Label})],e.prototype,"lbEndMonth",void 0),r([d({type:cc.Label})],e.prototype,"lbEndDay",void 0),r([d({type:cc.Node})],e.prototype,"ndSelectList",void 0),r([d({type:cc.Prefab})],e.prototype,"recordCustomSelectList",void 0),n=r([h],e)}(cc.Component);n.SharedRecordCustomDate=p,cc._RF.pop()},{"../../../../../script/pkg/adapter-v2":void 0,"./shared_record":"shared_record","./shared_record/DateEx":"DateEx","./shared_record/shared_record_custom_select_list":"shared_record_custom_select_list"}],shared_record_custom_select_list:[function(t,e,n){"use strict";cc._RF.push(e,"18b69QGHWZB06FfbYFyPCO7","shared_record_custom_select_list");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0}),n.SharedRecordCustomSelectList=void 0;var c=t("../../../../../../script/framework/log/log"),s=t("./NodeEx"),a=t("./shared_record_date_item"),l=cc._decorator,u=l.ccclass,h=l.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.selectData=null,e}return i(e,t),e.prototype.onLoad=function(){c.tcLog.log("SelectList onLoad:")},e.prototype.mystart=function(){var t=this;c.tcLog.log("SelectList start:");var e=this.ndContent;this.maxSize=new cc.Size(e.width,330),this.scrollBar.node.on(cc.Node.EventType.TOUCH_MOVE,function(e){var n=e.getLocation(),o=t.scrollBar.node.convertToNodeSpaceAR(cc.v3(n.x,n.y,0)),i=t.scrollBar.node.getChildByName("bar").getContentSize(),r=t.scrollBar.node.getContentSize();-o.y>r.height-i.height/2?o.y=-r.height+i.height/2:-o.y<i.height/2&&(o.y=-i.height/2);var c=(-o.y-i.height/2)/(r.height-i.height);t.svContent.scrollTo(cc.v2(0,1-c))})},e.prototype.onDestroy=function(){this.closeCallback&&this.closeCallback(this.selectData)},e.prototype.getTarget=function(){return this.target},e.prototype.getSelectData=function(){return this.selectData},e.prototype.setData=function(t,e){this.szData=t,this.selectData=e,this.reflush()},e.prototype.setCallback=function(t){this.closeCallback=t},e.prototype.setPosition=function(t){this.ndContent.position=s.NodeEx.getLocalPosition(this.node,t)},e.prototype.setTarget=function(t){this.target=t},e.prototype.destroySelf=function(){this.node.destroy()},e.prototype.reflush=function(){var t=this;this.content.node.removeAllChildren();for(var e=null,n=0,o=this.szData.length;n<o;n++){var i=cc.instantiate(this.recordDateItem);i.parent=this.content.node;var r=i.getComponent(a.SharedRecordDateItem);r.setString(""+this.szData[n]),r.setCallback(this.onClickDateItem.bind(this,this.szData[n])),this.selectData==this.szData[n]&&(e=r)}this.content.updateLayout();var c=this.ndContent,s=this.content,l=Math.min(s.node.height,this.maxSize.height);c.height=l,this.scrollBar.node.active=s.node.height>this.maxSize.height,this.content.getComponent(cc.Widget).updateAlignment(),this.scrollBar.node.active&&null!=e&&this.scheduleOnce(function(){t.scrollTo(e.node)},0)},e.prototype.scrollTo=function(t){var e=t,n=e.convertToWorldSpaceAR(new cc.Vec3(0,-.5*e.height)),o=this.content.node.convertToNodeSpaceAR(n),i=-1*this.maxSize.height;if(!(0>=o.y&&o.y>=i)){var r=i-o.y;this.svContent.scrollToOffset(new cc.Vec2(0,r))}},e.prototype.onClickDateItem=function(t){this.selectData=t,this.destroySelf()},r([h({type:cc.Node})],e.prototype,"ndContent",void 0),r([h({type:cc.Layout})],e.prototype,"content",void 0),r([h({type:cc.Scrollbar})],e.prototype,"scrollBar",void 0),r([h({type:cc.ScrollView})],e.prototype,"svContent",void 0),r([h({type:cc.Prefab})],e.prototype,"recordDateItem",void 0),r([u],e)}(cc.Component);n.SharedRecordCustomSelectList=d,cc._RF.pop()},{"../../../../../../script/framework/log/log":void 0,"./NodeEx":"NodeEx","./shared_record_date_item":"shared_record_date_item"}],shared_record_date_item:[function(t,e,n){"use strict";cc._RF.push(e,"523c1mg1WxBp49mVc1aLzvT","shared_record_date_item");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0}),n.SharedRecordDateItem=void 0;var c=cc._decorator,s=c.ccclass,a=c.property,l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onLoad=function(){},e.prototype.setCallback=function(t){this.callback=t},e.prototype.setString=function(t){this.lbDate.string=t},e.prototype.onClick=function(){this.callback()},r([a({type:cc.Label})],e.prototype,"lbDate",void 0),r([a({type:cc.Button})],e.prototype,"self",void 0),r([s],e)}(cc.Component);n.SharedRecordDateItem=l,cc._RF.pop()},{}],shared_record:[function(t,e,n){"use strict";cc._RF.push(e,"3a9afayLn9H5ZIxrGcKEYK5","shared_record");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0}),n.SharedRecord=n.SelectDateType=n.SharedRecordEvent=void 0;var c=cc._decorator,s=c.ccclass;c.property,function(t){t.CLOSE_RECORD="CLOSE_RECORD",t.OPEN_RECORD_DATE_TYPE="OPEN_RECORD_DATE_TYPE",t.OPEN_RECORD_CUSTOM_DATE="OPEN_RECORD_CUSTOM_DATE",t.REQUEST_CUSTOM_DATE_RECORD="REQUEST_CUSTOM_DATE_RECORD",t.OPEN_RECORD_ROUND_DETAIL_LIST="OPEN_RECORD_ROUND_DETAIL_LIST",t.REQUEST_REMAINING_DATA="REQUEST_REMAINING_DATA"}(n.SharedRecordEvent||(n.SharedRecordEvent={})),function(t){t[t.TODAY=0]="TODAY",t[t.LAST_WEEK=1]="LAST_WEEK",t[t.CUSTOM=2]="CUSTOM"}(n.SelectDateType||(n.SelectDateType={}));var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){},r([s],e)}(cc.Component);n.SharedRecord=a,cc._RF.pop()},{}]},{},["AThemeColor","AdaptScreen","BaseView","BlockComp","CHandler","CocosUtil","CommonUtil","CompDissItem","CompHisPage","DateUtil","Globals","HisLineAward","MoneyUtil","RecordMgr","SharedThemeColor","StringUtil","UIDateSelect","UIDetailTip","UIHisDetail","UIhistory","UIselectdate","recorddetail","shared_record","DateEx","MoneyUtils","NodeEx","StringEx","shared_config","shared_record_custom_select_list","shared_record_date_item","shared_record_custom_date","PgAutorotation","PgEvent","PgGameControlPanelLogic","PgGameControlPanelView","PgGameHistoryView","PgGameRuleView","PgGameWalletView","btnSpineRotateAni","btnSpineRotateSpecialAni","pgGameBetSettingView"]);